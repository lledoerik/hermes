{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import'./Player.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=window.location.hostname==='localhost'?'http://localhost:8000':'';axios.defaults.baseURL=API_URL;// SVG Icons\nconst PlayIcon=()=>/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M8 5v14l11-7z\"})});const PauseIcon=()=>/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"})});const SkipBackIcon=()=>/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z\"})});const SkipForwardIcon=()=>/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z\"})});const VolumeHighIcon=()=>/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"})});const VolumeLowIcon=()=>/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\"})});const VolumeMuteIcon=()=>/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z\"})});const FullscreenIcon=()=>/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"})});const FullscreenExitIcon=()=>/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"})});const SubtitlesIcon=()=>/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z\"})});const AudioIcon=()=>/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z\"})});const SpeedIcon=()=>/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M10 8v8l6-4-6-4zm11-5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14z\"})});const QualityIcon=()=>/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z\"})});const BackIcon=()=>/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"})});function Player(){const{type,id}=useParams();const navigate=useNavigate();const videoRef=useRef(null);const controlsTimeoutRef=useRef(null);const progressRef=useRef(null);const[item,setItem]=useState(null);const[loading,setLoading]=useState(true);const[videoLoading,setVideoLoading]=useState(true);const[isPlaying,setIsPlaying]=useState(false);const[currentTime,setCurrentTime]=useState(0);const[duration,setDuration]=useState(0);const[buffered,setBuffered]=useState(0);const[volume,setVolume]=useState(1);const[isMuted,setIsMuted]=useState(false);const[isFullscreen,setIsFullscreen]=useState(false);const[showControls,setShowControls]=useState(true);// Popup states\nconst[showAudioMenu,setShowAudioMenu]=useState(false);const[showSubtitleMenu,setShowSubtitleMenu]=useState(false);const[showSpeedMenu,setShowSpeedMenu]=useState(false);const[showQualityMenu,setShowQualityMenu]=useState(false);// Track selections\nconst[audioTracks,setAudioTracks]=useState([]);const[subtitleTracks,setSubtitleTracks]=useState([]);const[selectedAudio,setSelectedAudio]=useState(0);const[selectedSubtitle,setSelectedSubtitle]=useState(-1);const[playbackSpeed,setPlaybackSpeed]=useState(1);const[quality,setQuality]=useState('auto');const speeds=[0.25,0.5,0.75,1,1.25,1.5,1.75,2];const qualities=['auto','1080p','720p','480p','360p'];// Preferences from localStorage\nconst preferredAudioLang=localStorage.getItem('hermes_audio_lang')||'cat';const preferredSubtitleLang=localStorage.getItem('hermes_subtitle_lang')||'off';useEffect(()=>{loadMedia();document.addEventListener('fullscreenchange',handleFullscreenChange);return()=>{document.removeEventListener('fullscreenchange',handleFullscreenChange);};},[type,id]);const loadMedia=async()=>{try{let response;if(type==='episode'){response=await axios.get(\"/api/library/episodes/\".concat(id));}else{response=await axios.get(\"/api/library/movies/\".concat(id));}setItem(response.data);// Parse audio tracks\nif(response.data.audio_tracks){try{const tracks=JSON.parse(response.data.audio_tracks);setAudioTracks(tracks);const preferredIndex=tracks.findIndex(t=>{var _t$language;return(_t$language=t.language)===null||_t$language===void 0?void 0:_t$language.toLowerCase().includes(preferredAudioLang);});if(preferredIndex>=0)setSelectedAudio(preferredIndex);}catch(e){console.error('Error parsing audio tracks:',e);}}// Parse subtitles\nif(response.data.subtitles){try{const subs=JSON.parse(response.data.subtitles);setSubtitleTracks(subs);if(preferredSubtitleLang!=='off'){const preferredIndex=subs.findIndex(s=>{var _s$language;return(_s$language=s.language)===null||_s$language===void 0?void 0:_s$language.toLowerCase().includes(preferredSubtitleLang);});if(preferredIndex>=0)setSelectedSubtitle(preferredIndex);}}catch(e){console.error('Error parsing subtitles:',e);}}}catch(error){console.error('Error carregant media:',error);}finally{setLoading(false);}};const handleFullscreenChange=()=>{setIsFullscreen(!!document.fullscreenElement);};const closeAllMenus=()=>{setShowAudioMenu(false);setShowSubtitleMenu(false);setShowSpeedMenu(false);setShowQualityMenu(false);};const showControlsTemporarily=useCallback(()=>{setShowControls(true);if(controlsTimeoutRef.current){clearTimeout(controlsTimeoutRef.current);}if(isPlaying){controlsTimeoutRef.current=setTimeout(()=>{setShowControls(false);closeAllMenus();},3000);}},[isPlaying]);const handleMouseMove=()=>{showControlsTemporarily();};const togglePlay=()=>{if(!videoRef.current)return;if(isPlaying){videoRef.current.pause();}else{videoRef.current.play();}};const handleVideoPlay=()=>setIsPlaying(true);const handleVideoPause=()=>setIsPlaying(false);const handleVideoWaiting=()=>setVideoLoading(true);const handleVideoCanPlay=()=>setVideoLoading(false);const handleTimeUpdate=()=>{if(!videoRef.current)return;setCurrentTime(videoRef.current.currentTime);if(videoRef.current.buffered.length>0){setBuffered(videoRef.current.buffered.end(videoRef.current.buffered.length-1));}};const handleLoadedMetadata=()=>{if(!videoRef.current)return;setDuration(videoRef.current.duration);};const handleProgressClick=e=>{if(!progressRef.current||!videoRef.current)return;const rect=progressRef.current.getBoundingClientRect();const percent=(e.clientX-rect.left)/rect.width;videoRef.current.currentTime=percent*duration;};const skip=seconds=>{if(!videoRef.current)return;videoRef.current.currentTime+=seconds;};const handleVolumeChange=e=>{const newVolume=parseFloat(e.target.value);setVolume(newVolume);if(videoRef.current){videoRef.current.volume=newVolume;}setIsMuted(newVolume===0);};const toggleMute=()=>{if(!videoRef.current)return;if(isMuted){videoRef.current.volume=volume||1;setIsMuted(false);}else{videoRef.current.volume=0;setIsMuted(true);}};const toggleFullscreen=()=>{if(!document.fullscreenElement){document.documentElement.requestFullscreen();}else{document.exitFullscreen();}};const formatTime=seconds=>{if(!seconds||isNaN(seconds))return'0:00';const h=Math.floor(seconds/3600);const m=Math.floor(seconds%3600/60);const s=Math.floor(seconds%60);if(h>0){return\"\".concat(h,\":\").concat(m.toString().padStart(2,'0'),\":\").concat(s.toString().padStart(2,'0'));}return\"\".concat(m,\":\").concat(s.toString().padStart(2,'0'));};const handleBack=()=>{if(item!==null&&item!==void 0&&item.series_id){navigate(\"/series/\".concat(item.series_id));}else{navigate(-1);}};const handleAudioChange=index=>{var _audioTracks$index;setSelectedAudio(index);if((_audioTracks$index=audioTracks[index])!==null&&_audioTracks$index!==void 0&&_audioTracks$index.language){localStorage.setItem('hermes_audio_lang',audioTracks[index].language.toLowerCase());}setShowAudioMenu(false);};const handleSubtitleChange=index=>{var _subtitleTracks$index;setSelectedSubtitle(index);if(index===-1){localStorage.setItem('hermes_subtitle_lang','off');}else if((_subtitleTracks$index=subtitleTracks[index])!==null&&_subtitleTracks$index!==void 0&&_subtitleTracks$index.language){localStorage.setItem('hermes_subtitle_lang',subtitleTracks[index].language.toLowerCase());}setShowSubtitleMenu(false);};const handleSpeedChange=speed=>{setPlaybackSpeed(speed);if(videoRef.current){videoRef.current.playbackRate=speed;}setShowSpeedMenu(false);};const handleQualityChange=q=>{setQuality(q);setShowQualityMenu(false);};const getVideoUrl=()=>{if(type==='episode'){return\"\".concat(API_URL,\"/api/stream/episode/\").concat(id);}return\"\".concat(API_URL,\"/api/stream/movie/\").concat(id);};const VolumeIcon=()=>{if(isMuted||volume===0)return/*#__PURE__*/_jsx(VolumeMuteIcon,{});if(volume>0.5)return/*#__PURE__*/_jsx(VolumeHighIcon,{});return/*#__PURE__*/_jsx(VolumeLowIcon,{});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"player-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"player-loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})})});}return/*#__PURE__*/_jsx(\"div\",{className:\"player-container\",onMouseMove:handleMouseMove,onClick:e=>{if(e.target===e.currentTarget){closeAllMenus();}showControlsTemporarily();},children:/*#__PURE__*/_jsxs(\"div\",{className:\"player-wrapper\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,className:\"video-player\",src:getVideoUrl(),autoPlay:true,onPlay:handleVideoPlay,onPause:handleVideoPause,onWaiting:handleVideoWaiting,onCanPlay:handleVideoCanPlay,onTimeUpdate:handleTimeUpdate,onLoadedMetadata:handleLoadedMetadata,onClick:togglePlay}),videoLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"player-loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-controls \".concat(showControls?'visible':'hidden'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"player-top-bar\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"back-btn\",onClick:handleBack,children:[/*#__PURE__*/_jsx(BackIcon,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Tornar\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-title\",children:[/*#__PURE__*/_jsx(\"h2\",{children:(item===null||item===void 0?void 0:item.name)||'Reproduint'}),(item===null||item===void 0?void 0:item.series_name)&&/*#__PURE__*/_jsxs(\"span\",{children:[item.series_name,\" - T\",item.season_number,\" E\",item.episode_number]})]}),/*#__PURE__*/_jsx(\"div\",{style:{width:'100px'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-center\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"center-btn skip-btn\",onClick:()=>skip(-10),children:[/*#__PURE__*/_jsx(SkipBackIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"skip-text\",children:\"10\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"center-btn play-pause-btn\",onClick:togglePlay,children:isPlaying?/*#__PURE__*/_jsx(PauseIcon,{}):/*#__PURE__*/_jsx(PlayIcon,{})}),/*#__PURE__*/_jsxs(\"button\",{className:\"center-btn skip-btn\",onClick:()=>skip(10),children:[/*#__PURE__*/_jsx(SkipForwardIcon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"skip-text\",children:\"10\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-bottom-bar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"progress-container\",children:[/*#__PURE__*/_jsxs(\"div\",{ref:progressRef,className:\"progress-bar\",onClick:handleProgressClick,children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-buffered\",style:{width:\"\".concat(buffered/duration*100,\"%\")}}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-played\",style:{width:\"\".concat(currentTime/duration*100,\"%\")}}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-handle\",style:{left:\"\".concat(currentTime/duration*100,\"%\")}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"time-display\",children:[/*#__PURE__*/_jsx(\"span\",{children:formatTime(currentTime)}),/*#__PURE__*/_jsx(\"span\",{children:\"/\"}),/*#__PURE__*/_jsx(\"span\",{children:formatTime(duration)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"control-btn\",onClick:togglePlay,children:isPlaying?/*#__PURE__*/_jsx(PauseIcon,{}):/*#__PURE__*/_jsx(PlayIcon,{})}),/*#__PURE__*/_jsx(\"button\",{className:\"control-btn\",onClick:()=>skip(-10),children:/*#__PURE__*/_jsx(SkipBackIcon,{})}),/*#__PURE__*/_jsx(\"button\",{className:\"control-btn\",onClick:()=>skip(10),children:/*#__PURE__*/_jsx(SkipForwardIcon,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"volume-control\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"control-btn\",onClick:toggleMute,children:/*#__PURE__*/_jsx(VolumeIcon,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"volume-slider\",children:/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"1\",step:\"0.1\",value:isMuted?0:volume,onChange:handleVolumeChange})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"control-wrapper\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"control-btn \".concat(showSpeedMenu?'active':''),onClick:()=>{closeAllMenus();setShowSpeedMenu(!showSpeedMenu);},title:\"Velocitat\",children:[/*#__PURE__*/_jsx(SpeedIcon,{}),playbackSpeed!==1&&/*#__PURE__*/_jsxs(\"span\",{className:\"control-badge\",children:[playbackSpeed,\"x\"]})]}),showSpeedMenu&&/*#__PURE__*/_jsxs(\"div\",{className:\"control-menu\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"menu-header\",children:\"Velocitat\"}),speeds.map(speed=>/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item \".concat(playbackSpeed===speed?'selected':''),onClick:()=>handleSpeedChange(speed),children:[playbackSpeed===speed&&/*#__PURE__*/_jsx(\"span\",{className:\"check-icon\",children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"span\",{children:speed===1?'Normal':\"\".concat(speed,\"x\")})]},speed))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"control-wrapper\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"control-btn \".concat(showQualityMenu?'active':''),onClick:()=>{closeAllMenus();setShowQualityMenu(!showQualityMenu);},title:\"Qualitat\",children:/*#__PURE__*/_jsx(QualityIcon,{})}),showQualityMenu&&/*#__PURE__*/_jsxs(\"div\",{className:\"control-menu\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"menu-header\",children:\"Qualitat\"}),qualities.map(q=>/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item \".concat(quality===q?'selected':''),onClick:()=>handleQualityChange(q),children:[quality===q&&/*#__PURE__*/_jsx(\"span\",{className:\"check-icon\",children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"span\",{children:q==='auto'?'Auto':q})]},q))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"control-wrapper\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"control-btn \".concat(showAudioMenu?'active':''),onClick:()=>{closeAllMenus();setShowAudioMenu(!showAudioMenu);},title:\"Audio\",children:/*#__PURE__*/_jsx(AudioIcon,{})}),showAudioMenu&&/*#__PURE__*/_jsxs(\"div\",{className:\"control-menu\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"menu-header\",children:\"Audio\"}),audioTracks.length>0?audioTracks.map((track,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item \".concat(selectedAudio===index?'selected':''),onClick:()=>handleAudioChange(index),children:[selectedAudio===index&&/*#__PURE__*/_jsx(\"span\",{className:\"check-icon\",children:\"\\u2713\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"track-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"track-name\",children:track.language||\"Pista \".concat(index+1)}),track.codec&&/*#__PURE__*/_jsxs(\"span\",{className:\"track-detail\",children:[track.codec,\" \",track.channels?\"\".concat(track.channels,\"ch\"):'']})]})]},index)):/*#__PURE__*/_jsx(\"div\",{className:\"menu-item disabled\",children:\"No hi ha pistes alternatives\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"control-wrapper\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"control-btn \".concat(showSubtitleMenu?'active':'',\" \").concat(selectedSubtitle>=0?'has-selection':''),onClick:()=>{closeAllMenus();setShowSubtitleMenu(!showSubtitleMenu);},title:\"Subtitols\",children:/*#__PURE__*/_jsx(SubtitlesIcon,{})}),showSubtitleMenu&&/*#__PURE__*/_jsxs(\"div\",{className:\"control-menu\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"menu-header\",children:\"Subtitols\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item \".concat(selectedSubtitle===-1?'selected':''),onClick:()=>handleSubtitleChange(-1),children:[selectedSubtitle===-1&&/*#__PURE__*/_jsx(\"span\",{className:\"check-icon\",children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Desactivats\"})]}),subtitleTracks.map((track,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item \".concat(selectedSubtitle===index?'selected':''),onClick:()=>handleSubtitleChange(index),children:[selectedSubtitle===index&&/*#__PURE__*/_jsx(\"span\",{className:\"check-icon\",children:\"\\u2713\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"track-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"track-name\",children:track.language||\"Subtitol \".concat(index+1)}),track.forced&&/*#__PURE__*/_jsx(\"span\",{className:\"track-detail\",children:\"Forcat\"})]})]},index)),subtitleTracks.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"menu-item disabled\",children:\"No hi ha subtitols\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"control-btn\",onClick:toggleFullscreen,children:isFullscreen?/*#__PURE__*/_jsx(FullscreenExitIcon,{}):/*#__PURE__*/_jsx(FullscreenIcon,{})})]})]})]})]})]})});}export default Player;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useParams","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","API_URL","window","location","hostname","defaults","baseURL","PlayIcon","viewBox","fill","children","d","PauseIcon","SkipBackIcon","SkipForwardIcon","VolumeHighIcon","VolumeLowIcon","VolumeMuteIcon","FullscreenIcon","FullscreenExitIcon","SubtitlesIcon","AudioIcon","SpeedIcon","QualityIcon","BackIcon","Player","type","id","navigate","videoRef","controlsTimeoutRef","progressRef","item","setItem","loading","setLoading","videoLoading","setVideoLoading","isPlaying","setIsPlaying","currentTime","setCurrentTime","duration","setDuration","buffered","setBuffered","volume","setVolume","isMuted","setIsMuted","isFullscreen","setIsFullscreen","showControls","setShowControls","showAudioMenu","setShowAudioMenu","showSubtitleMenu","setShowSubtitleMenu","showSpeedMenu","setShowSpeedMenu","showQualityMenu","setShowQualityMenu","audioTracks","setAudioTracks","subtitleTracks","setSubtitleTracks","selectedAudio","setSelectedAudio","selectedSubtitle","setSelectedSubtitle","playbackSpeed","setPlaybackSpeed","quality","setQuality","speeds","qualities","preferredAudioLang","localStorage","getItem","preferredSubtitleLang","loadMedia","document","addEventListener","handleFullscreenChange","removeEventListener","response","get","concat","data","audio_tracks","tracks","JSON","parse","preferredIndex","findIndex","t","_t$language","language","toLowerCase","includes","e","console","error","subtitles","subs","s","_s$language","fullscreenElement","closeAllMenus","showControlsTemporarily","current","clearTimeout","setTimeout","handleMouseMove","togglePlay","pause","play","handleVideoPlay","handleVideoPause","handleVideoWaiting","handleVideoCanPlay","handleTimeUpdate","length","end","handleLoadedMetadata","handleProgressClick","rect","getBoundingClientRect","percent","clientX","left","width","skip","seconds","handleVolumeChange","newVolume","parseFloat","target","value","toggleMute","toggleFullscreen","documentElement","requestFullscreen","exitFullscreen","formatTime","isNaN","h","Math","floor","m","toString","padStart","handleBack","series_id","handleAudioChange","index","_audioTracks$index","handleSubtitleChange","_subtitleTracks$index","handleSpeedChange","speed","playbackRate","handleQualityChange","q","getVideoUrl","VolumeIcon","className","onMouseMove","onClick","currentTarget","ref","src","autoPlay","onPlay","onPause","onWaiting","onCanPlay","onTimeUpdate","onLoadedMetadata","name","series_name","season_number","episode_number","style","min","max","step","onChange","title","map","track","codec","channels","forced"],"sources":["E:/Develop/hermes-backend/frontend/src/pages/Player.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Player.css';\r\n\r\nconst API_URL = window.location.hostname === 'localhost'\r\n  ? 'http://localhost:8000'\r\n  : '';\r\n\r\naxios.defaults.baseURL = API_URL;\r\n\r\n// SVG Icons\r\nconst PlayIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M8 5v14l11-7z\"/>\r\n  </svg>\r\n);\r\n\r\nconst PauseIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"/>\r\n  </svg>\r\n);\r\n\r\nconst SkipBackIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z\"/>\r\n  </svg>\r\n);\r\n\r\nconst SkipForwardIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z\"/>\r\n  </svg>\r\n);\r\n\r\nconst VolumeHighIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"/>\r\n  </svg>\r\n);\r\n\r\nconst VolumeLowIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\"/>\r\n  </svg>\r\n);\r\n\r\nconst VolumeMuteIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z\"/>\r\n  </svg>\r\n);\r\n\r\nconst FullscreenIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"/>\r\n  </svg>\r\n);\r\n\r\nconst FullscreenExitIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"/>\r\n  </svg>\r\n);\r\n\r\nconst SubtitlesIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z\"/>\r\n  </svg>\r\n);\r\n\r\nconst AudioIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z\"/>\r\n  </svg>\r\n);\r\n\r\nconst SpeedIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M10 8v8l6-4-6-4zm11-5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14z\"/>\r\n  </svg>\r\n);\r\n\r\nconst QualityIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z\"/>\r\n  </svg>\r\n);\r\n\r\nconst BackIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"/>\r\n  </svg>\r\n);\r\n\r\nfunction Player() {\r\n  const { type, id } = useParams();\r\n  const navigate = useNavigate();\r\n  const videoRef = useRef(null);\r\n  const controlsTimeoutRef = useRef(null);\r\n  const progressRef = useRef(null);\r\n\r\n  const [item, setItem] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [videoLoading, setVideoLoading] = useState(true);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [buffered, setBuffered] = useState(0);\r\n  const [volume, setVolume] = useState(1);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [showControls, setShowControls] = useState(true);\r\n\r\n  // Popup states\r\n  const [showAudioMenu, setShowAudioMenu] = useState(false);\r\n  const [showSubtitleMenu, setShowSubtitleMenu] = useState(false);\r\n  const [showSpeedMenu, setShowSpeedMenu] = useState(false);\r\n  const [showQualityMenu, setShowQualityMenu] = useState(false);\r\n\r\n  // Track selections\r\n  const [audioTracks, setAudioTracks] = useState([]);\r\n  const [subtitleTracks, setSubtitleTracks] = useState([]);\r\n  const [selectedAudio, setSelectedAudio] = useState(0);\r\n  const [selectedSubtitle, setSelectedSubtitle] = useState(-1);\r\n  const [playbackSpeed, setPlaybackSpeed] = useState(1);\r\n  const [quality, setQuality] = useState('auto');\r\n\r\n  const speeds = [0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2];\r\n  const qualities = ['auto', '1080p', '720p', '480p', '360p'];\r\n\r\n  // Preferences from localStorage\r\n  const preferredAudioLang = localStorage.getItem('hermes_audio_lang') || 'cat';\r\n  const preferredSubtitleLang = localStorage.getItem('hermes_subtitle_lang') || 'off';\r\n\r\n  useEffect(() => {\r\n    loadMedia();\r\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\r\n    return () => {\r\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\r\n    };\r\n  }, [type, id]);\r\n\r\n  const loadMedia = async () => {\r\n    try {\r\n      let response;\r\n      if (type === 'episode') {\r\n        response = await axios.get(`/api/library/episodes/${id}`);\r\n      } else {\r\n        response = await axios.get(`/api/library/movies/${id}`);\r\n      }\r\n      setItem(response.data);\r\n\r\n      // Parse audio tracks\r\n      if (response.data.audio_tracks) {\r\n        try {\r\n          const tracks = JSON.parse(response.data.audio_tracks);\r\n          setAudioTracks(tracks);\r\n          const preferredIndex = tracks.findIndex(t =>\r\n            t.language?.toLowerCase().includes(preferredAudioLang)\r\n          );\r\n          if (preferredIndex >= 0) setSelectedAudio(preferredIndex);\r\n        } catch (e) {\r\n          console.error('Error parsing audio tracks:', e);\r\n        }\r\n      }\r\n\r\n      // Parse subtitles\r\n      if (response.data.subtitles) {\r\n        try {\r\n          const subs = JSON.parse(response.data.subtitles);\r\n          setSubtitleTracks(subs);\r\n          if (preferredSubtitleLang !== 'off') {\r\n            const preferredIndex = subs.findIndex(s =>\r\n              s.language?.toLowerCase().includes(preferredSubtitleLang)\r\n            );\r\n            if (preferredIndex >= 0) setSelectedSubtitle(preferredIndex);\r\n          }\r\n        } catch (e) {\r\n          console.error('Error parsing subtitles:', e);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error carregant media:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFullscreenChange = () => {\r\n    setIsFullscreen(!!document.fullscreenElement);\r\n  };\r\n\r\n  const closeAllMenus = () => {\r\n    setShowAudioMenu(false);\r\n    setShowSubtitleMenu(false);\r\n    setShowSpeedMenu(false);\r\n    setShowQualityMenu(false);\r\n  };\r\n\r\n  const showControlsTemporarily = useCallback(() => {\r\n    setShowControls(true);\r\n    if (controlsTimeoutRef.current) {\r\n      clearTimeout(controlsTimeoutRef.current);\r\n    }\r\n    if (isPlaying) {\r\n      controlsTimeoutRef.current = setTimeout(() => {\r\n        setShowControls(false);\r\n        closeAllMenus();\r\n      }, 3000);\r\n    }\r\n  }, [isPlaying]);\r\n\r\n  const handleMouseMove = () => {\r\n    showControlsTemporarily();\r\n  };\r\n\r\n  const togglePlay = () => {\r\n    if (!videoRef.current) return;\r\n    if (isPlaying) {\r\n      videoRef.current.pause();\r\n    } else {\r\n      videoRef.current.play();\r\n    }\r\n  };\r\n\r\n  const handleVideoPlay = () => setIsPlaying(true);\r\n  const handleVideoPause = () => setIsPlaying(false);\r\n  const handleVideoWaiting = () => setVideoLoading(true);\r\n  const handleVideoCanPlay = () => setVideoLoading(false);\r\n\r\n  const handleTimeUpdate = () => {\r\n    if (!videoRef.current) return;\r\n    setCurrentTime(videoRef.current.currentTime);\r\n\r\n    if (videoRef.current.buffered.length > 0) {\r\n      setBuffered(videoRef.current.buffered.end(videoRef.current.buffered.length - 1));\r\n    }\r\n  };\r\n\r\n  const handleLoadedMetadata = () => {\r\n    if (!videoRef.current) return;\r\n    setDuration(videoRef.current.duration);\r\n  };\r\n\r\n  const handleProgressClick = (e) => {\r\n    if (!progressRef.current || !videoRef.current) return;\r\n    const rect = progressRef.current.getBoundingClientRect();\r\n    const percent = (e.clientX - rect.left) / rect.width;\r\n    videoRef.current.currentTime = percent * duration;\r\n  };\r\n\r\n  const skip = (seconds) => {\r\n    if (!videoRef.current) return;\r\n    videoRef.current.currentTime += seconds;\r\n  };\r\n\r\n  const handleVolumeChange = (e) => {\r\n    const newVolume = parseFloat(e.target.value);\r\n    setVolume(newVolume);\r\n    if (videoRef.current) {\r\n      videoRef.current.volume = newVolume;\r\n    }\r\n    setIsMuted(newVolume === 0);\r\n  };\r\n\r\n  const toggleMute = () => {\r\n    if (!videoRef.current) return;\r\n    if (isMuted) {\r\n      videoRef.current.volume = volume || 1;\r\n      setIsMuted(false);\r\n    } else {\r\n      videoRef.current.volume = 0;\r\n      setIsMuted(true);\r\n    }\r\n  };\r\n\r\n  const toggleFullscreen = () => {\r\n    if (!document.fullscreenElement) {\r\n      document.documentElement.requestFullscreen();\r\n    } else {\r\n      document.exitFullscreen();\r\n    }\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    if (!seconds || isNaN(seconds)) return '0:00';\r\n    const h = Math.floor(seconds / 3600);\r\n    const m = Math.floor((seconds % 3600) / 60);\r\n    const s = Math.floor(seconds % 60);\r\n    if (h > 0) {\r\n      return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${m}:${s.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const handleBack = () => {\r\n    if (item?.series_id) {\r\n      navigate(`/series/${item.series_id}`);\r\n    } else {\r\n      navigate(-1);\r\n    }\r\n  };\r\n\r\n  const handleAudioChange = (index) => {\r\n    setSelectedAudio(index);\r\n    if (audioTracks[index]?.language) {\r\n      localStorage.setItem('hermes_audio_lang', audioTracks[index].language.toLowerCase());\r\n    }\r\n    setShowAudioMenu(false);\r\n  };\r\n\r\n  const handleSubtitleChange = (index) => {\r\n    setSelectedSubtitle(index);\r\n    if (index === -1) {\r\n      localStorage.setItem('hermes_subtitle_lang', 'off');\r\n    } else if (subtitleTracks[index]?.language) {\r\n      localStorage.setItem('hermes_subtitle_lang', subtitleTracks[index].language.toLowerCase());\r\n    }\r\n    setShowSubtitleMenu(false);\r\n  };\r\n\r\n  const handleSpeedChange = (speed) => {\r\n    setPlaybackSpeed(speed);\r\n    if (videoRef.current) {\r\n      videoRef.current.playbackRate = speed;\r\n    }\r\n    setShowSpeedMenu(false);\r\n  };\r\n\r\n  const handleQualityChange = (q) => {\r\n    setQuality(q);\r\n    setShowQualityMenu(false);\r\n  };\r\n\r\n  const getVideoUrl = () => {\r\n    if (type === 'episode') {\r\n      return `${API_URL}/api/stream/episode/${id}`;\r\n    }\r\n    return `${API_URL}/api/stream/movie/${id}`;\r\n  };\r\n\r\n  const VolumeIcon = () => {\r\n    if (isMuted || volume === 0) return <VolumeMuteIcon />;\r\n    if (volume > 0.5) return <VolumeHighIcon />;\r\n    return <VolumeLowIcon />;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"player-container\">\r\n        <div className=\"player-loading\">\r\n          <div className=\"loading-spinner\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"player-container\"\r\n      onMouseMove={handleMouseMove}\r\n      onClick={(e) => {\r\n        if (e.target === e.currentTarget) {\r\n          closeAllMenus();\r\n        }\r\n        showControlsTemporarily();\r\n      }}\r\n    >\r\n      <div className=\"player-wrapper\">\r\n        <video\r\n          ref={videoRef}\r\n          className=\"video-player\"\r\n          src={getVideoUrl()}\r\n          autoPlay\r\n          onPlay={handleVideoPlay}\r\n          onPause={handleVideoPause}\r\n          onWaiting={handleVideoWaiting}\r\n          onCanPlay={handleVideoCanPlay}\r\n          onTimeUpdate={handleTimeUpdate}\r\n          onLoadedMetadata={handleLoadedMetadata}\r\n          onClick={togglePlay}\r\n        />\r\n\r\n        {videoLoading && (\r\n          <div className=\"player-loading\">\r\n            <div className=\"loading-spinner\"></div>\r\n          </div>\r\n        )}\r\n\r\n        <div className={`player-controls ${showControls ? 'visible' : 'hidden'}`}>\r\n          {/* Top Bar */}\r\n          <div className=\"player-top-bar\">\r\n            <button className=\"back-btn\" onClick={handleBack}>\r\n              <BackIcon />\r\n              <span>Tornar</span>\r\n            </button>\r\n            <div className=\"player-title\">\r\n              <h2>{item?.name || 'Reproduint'}</h2>\r\n              {item?.series_name && (\r\n                <span>{item.series_name} - T{item.season_number} E{item.episode_number}</span>\r\n              )}\r\n            </div>\r\n            <div style={{ width: '100px' }}></div>\r\n          </div>\r\n\r\n          {/* Center Controls */}\r\n          <div className=\"player-center\">\r\n            <button className=\"center-btn skip-btn\" onClick={() => skip(-10)}>\r\n              <SkipBackIcon />\r\n              <span className=\"skip-text\">10</span>\r\n            </button>\r\n            <button className=\"center-btn play-pause-btn\" onClick={togglePlay}>\r\n              {isPlaying ? <PauseIcon /> : <PlayIcon />}\r\n            </button>\r\n            <button className=\"center-btn skip-btn\" onClick={() => skip(10)}>\r\n              <SkipForwardIcon />\r\n              <span className=\"skip-text\">10</span>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Bottom Bar */}\r\n          <div className=\"player-bottom-bar\">\r\n            {/* Progress Bar */}\r\n            <div className=\"progress-container\">\r\n              <div\r\n                ref={progressRef}\r\n                className=\"progress-bar\"\r\n                onClick={handleProgressClick}\r\n              >\r\n                <div\r\n                  className=\"progress-buffered\"\r\n                  style={{ width: `${(buffered / duration) * 100}%` }}\r\n                />\r\n                <div\r\n                  className=\"progress-played\"\r\n                  style={{ width: `${(currentTime / duration) * 100}%` }}\r\n                />\r\n                <div\r\n                  className=\"progress-handle\"\r\n                  style={{ left: `${(currentTime / duration) * 100}%` }}\r\n                />\r\n              </div>\r\n              <div className=\"time-display\">\r\n                <span>{formatTime(currentTime)}</span>\r\n                <span>/</span>\r\n                <span>{formatTime(duration)}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Bottom Controls Row */}\r\n            <div className=\"bottom-controls\">\r\n              <div className=\"left-controls\">\r\n                <button className=\"control-btn\" onClick={togglePlay}>\r\n                  {isPlaying ? <PauseIcon /> : <PlayIcon />}\r\n                </button>\r\n                <button className=\"control-btn\" onClick={() => skip(-10)}>\r\n                  <SkipBackIcon />\r\n                </button>\r\n                <button className=\"control-btn\" onClick={() => skip(10)}>\r\n                  <SkipForwardIcon />\r\n                </button>\r\n                <div className=\"volume-control\">\r\n                  <button className=\"control-btn\" onClick={toggleMute}>\r\n                    <VolumeIcon />\r\n                  </button>\r\n                  <div className=\"volume-slider\">\r\n                    <input\r\n                      type=\"range\"\r\n                      min=\"0\"\r\n                      max=\"1\"\r\n                      step=\"0.1\"\r\n                      value={isMuted ? 0 : volume}\r\n                      onChange={handleVolumeChange}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"right-controls\">\r\n                {/* Speed Button */}\r\n                <div className=\"control-wrapper\">\r\n                  <button\r\n                    className={`control-btn ${showSpeedMenu ? 'active' : ''}`}\r\n                    onClick={() => {\r\n                      closeAllMenus();\r\n                      setShowSpeedMenu(!showSpeedMenu);\r\n                    }}\r\n                    title=\"Velocitat\"\r\n                  >\r\n                    <SpeedIcon />\r\n                    {playbackSpeed !== 1 && (\r\n                      <span className=\"control-badge\">{playbackSpeed}x</span>\r\n                    )}\r\n                  </button>\r\n                  {showSpeedMenu && (\r\n                    <div className=\"control-menu\">\r\n                      <div className=\"menu-header\">Velocitat</div>\r\n                      {speeds.map((speed) => (\r\n                        <div\r\n                          key={speed}\r\n                          className={`menu-item ${playbackSpeed === speed ? 'selected' : ''}`}\r\n                          onClick={() => handleSpeedChange(speed)}\r\n                        >\r\n                          {playbackSpeed === speed && <span className=\"check-icon\">&#10003;</span>}\r\n                          <span>{speed === 1 ? 'Normal' : `${speed}x`}</span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Quality Button */}\r\n                <div className=\"control-wrapper\">\r\n                  <button\r\n                    className={`control-btn ${showQualityMenu ? 'active' : ''}`}\r\n                    onClick={() => {\r\n                      closeAllMenus();\r\n                      setShowQualityMenu(!showQualityMenu);\r\n                    }}\r\n                    title=\"Qualitat\"\r\n                  >\r\n                    <QualityIcon />\r\n                  </button>\r\n                  {showQualityMenu && (\r\n                    <div className=\"control-menu\">\r\n                      <div className=\"menu-header\">Qualitat</div>\r\n                      {qualities.map((q) => (\r\n                        <div\r\n                          key={q}\r\n                          className={`menu-item ${quality === q ? 'selected' : ''}`}\r\n                          onClick={() => handleQualityChange(q)}\r\n                        >\r\n                          {quality === q && <span className=\"check-icon\">&#10003;</span>}\r\n                          <span>{q === 'auto' ? 'Auto' : q}</span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Audio Button */}\r\n                <div className=\"control-wrapper\">\r\n                  <button\r\n                    className={`control-btn ${showAudioMenu ? 'active' : ''}`}\r\n                    onClick={() => {\r\n                      closeAllMenus();\r\n                      setShowAudioMenu(!showAudioMenu);\r\n                    }}\r\n                    title=\"Audio\"\r\n                  >\r\n                    <AudioIcon />\r\n                  </button>\r\n                  {showAudioMenu && (\r\n                    <div className=\"control-menu\">\r\n                      <div className=\"menu-header\">Audio</div>\r\n                      {audioTracks.length > 0 ? (\r\n                        audioTracks.map((track, index) => (\r\n                          <div\r\n                            key={index}\r\n                            className={`menu-item ${selectedAudio === index ? 'selected' : ''}`}\r\n                            onClick={() => handleAudioChange(index)}\r\n                          >\r\n                            {selectedAudio === index && <span className=\"check-icon\">&#10003;</span>}\r\n                            <div className=\"track-info\">\r\n                              <span className=\"track-name\">{track.language || `Pista ${index + 1}`}</span>\r\n                              {track.codec && (\r\n                                <span className=\"track-detail\">\r\n                                  {track.codec} {track.channels ? `${track.channels}ch` : ''}\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        ))\r\n                      ) : (\r\n                        <div className=\"menu-item disabled\">No hi ha pistes alternatives</div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Subtitles Button */}\r\n                <div className=\"control-wrapper\">\r\n                  <button\r\n                    className={`control-btn ${showSubtitleMenu ? 'active' : ''} ${selectedSubtitle >= 0 ? 'has-selection' : ''}`}\r\n                    onClick={() => {\r\n                      closeAllMenus();\r\n                      setShowSubtitleMenu(!showSubtitleMenu);\r\n                    }}\r\n                    title=\"Subtitols\"\r\n                  >\r\n                    <SubtitlesIcon />\r\n                  </button>\r\n                  {showSubtitleMenu && (\r\n                    <div className=\"control-menu\">\r\n                      <div className=\"menu-header\">Subtitols</div>\r\n                      <div\r\n                        className={`menu-item ${selectedSubtitle === -1 ? 'selected' : ''}`}\r\n                        onClick={() => handleSubtitleChange(-1)}\r\n                      >\r\n                        {selectedSubtitle === -1 && <span className=\"check-icon\">&#10003;</span>}\r\n                        <span>Desactivats</span>\r\n                      </div>\r\n                      {subtitleTracks.map((track, index) => (\r\n                        <div\r\n                          key={index}\r\n                          className={`menu-item ${selectedSubtitle === index ? 'selected' : ''}`}\r\n                          onClick={() => handleSubtitleChange(index)}\r\n                        >\r\n                          {selectedSubtitle === index && <span className=\"check-icon\">&#10003;</span>}\r\n                          <div className=\"track-info\">\r\n                            <span className=\"track-name\">{track.language || `Subtitol ${index + 1}`}</span>\r\n                            {track.forced && <span className=\"track-detail\">Forcat</span>}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                      {subtitleTracks.length === 0 && (\r\n                        <div className=\"menu-item disabled\">No hi ha subtitols</div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Fullscreen Button */}\r\n                <button className=\"control-btn\" onClick={toggleFullscreen}>\r\n                  {isFullscreen ? <FullscreenExitIcon /> : <FullscreenIcon />}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Player;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}