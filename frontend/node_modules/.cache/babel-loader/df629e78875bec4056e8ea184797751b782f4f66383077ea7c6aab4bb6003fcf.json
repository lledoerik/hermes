{"ast":null,"code":"var _jsxFileName = \"E:\\\\Develop\\\\hermes-backend\\\\frontend\\\\src\\\\pages\\\\Player.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { API_URL, API_ENDPOINTS, STORAGE_KEYS, DEFAULTS } from '../config';\nimport './Player.css';\n\n// Opening detection constants (typical anime/series opening times)\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst OPENING_START = 60; // Typically starts around 1 minute\nconst OPENING_END = 150; // Typically ends around 2:30\n\nfunction Player() {\n  _s();\n  const {\n    mediaId\n  } = useParams();\n  const navigate = useNavigate();\n  const videoRef = useRef(null);\n  const playerContainerRef = useRef(null);\n  const [media, setMedia] = useState(null);\n  const [nextEpisode, setNextEpisode] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [streamUrl, setStreamUrl] = useState(null);\n  const [preparing, setPreparing] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Track selection - can be changed during playback\n  const [selectedAudio, setSelectedAudio] = useState(0);\n  const [selectedSubtitle, setSelectedSubtitle] = useState(null);\n  const [quality, setQuality] = useState(localStorage.getItem(STORAGE_KEYS.quality) || DEFAULTS.quality);\n\n  // Player controls\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [buffered, setBuffered] = useState(0);\n  const [volume, setVolume] = useState(parseFloat(localStorage.getItem(STORAGE_KEYS.volume)) || DEFAULTS.volume);\n  const [isMuted, setIsMuted] = useState(false);\n  const [showControls, setShowControls] = useState(true);\n  const [showSettings, setShowSettings] = useState(false);\n  const [showTrackSelector, setShowTrackSelector] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [playbackRate, setPlaybackRate] = useState(1);\n\n  // Skip intro/opening state\n  const [showSkipIntro, setShowSkipIntro] = useState(false);\n  const [showNextEpisode, setShowNextEpisode] = useState(false);\n\n  // Keyboard shortcuts enabled\n  const [showShortcutsHelp, setShowShortcutsHelp] = useState(false);\n  const controlsTimeoutRef = useRef(null);\n  const savedTimeRef = useRef(0);\n  useEffect(() => {\n    loadMediaInfo();\n    return () => {\n      if (controlsTimeoutRef.current) {\n        clearTimeout(controlsTimeoutRef.current);\n      }\n      // Save progress on unmount\n      if (videoRef.current && currentTime > 0) {\n        localStorage.setItem(`progress_${mediaId}`, currentTime.toString());\n      }\n    };\n  }, [mediaId]);\n  useEffect(() => {\n    if (videoRef.current) {\n      videoRef.current.volume = isMuted ? 0 : volume;\n    }\n    localStorage.setItem(STORAGE_KEYS.volume, volume.toString());\n  }, [volume, isMuted]);\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (!streamUrl) return;\n      switch (e.key.toLowerCase()) {\n        case ' ':\n        case 'k':\n          e.preventDefault();\n          handlePlayPause();\n          break;\n        case 'arrowleft':\n          e.preventDefault();\n          skipTime(-10);\n          break;\n        case 'arrowright':\n          e.preventDefault();\n          skipTime(10);\n          break;\n        case 'j':\n          e.preventDefault();\n          skipTime(-10);\n          break;\n        case 'l':\n          e.preventDefault();\n          skipTime(10);\n          break;\n        case 'arrowup':\n          e.preventDefault();\n          setVolume(prev => Math.min(1, prev + 0.1));\n          break;\n        case 'arrowdown':\n          e.preventDefault();\n          setVolume(prev => Math.max(0, prev - 0.1));\n          break;\n        case 'm':\n          e.preventDefault();\n          setIsMuted(prev => !prev);\n          break;\n        case 'f':\n          e.preventDefault();\n          toggleFullscreen();\n          break;\n        case 's':\n          e.preventDefault();\n          if (showSkipIntro) skipOpening();\n          break;\n        case 'n':\n          e.preventDefault();\n          if (showNextEpisode && nextEpisode) goToNextEpisode();\n          break;\n        case 'escape':\n          setShowSettings(false);\n          setShowTrackSelector(false);\n          setShowShortcutsHelp(false);\n          break;\n        case '?':\n          setShowShortcutsHelp(prev => !prev);\n          break;\n        default:\n          // Speed controls\n          if (e.key === '>' && e.shiftKey) {\n            setPlaybackRate(prev => Math.min(2, prev + 0.25));\n          } else if (e.key === '<' && e.shiftKey) {\n            setPlaybackRate(prev => Math.max(0.25, prev - 0.25));\n          }\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [streamUrl, showSkipIntro, showNextEpisode, nextEpisode]);\n\n  // Update playback rate\n  useEffect(() => {\n    if (videoRef.current) {\n      videoRef.current.playbackRate = playbackRate;\n    }\n  }, [playbackRate]);\n  const loadMediaInfo = async () => {\n    try {\n      const response = await axios.get(`${API_URL}${API_ENDPOINTS.mediaDetail(mediaId)}`);\n      setMedia(response.data);\n\n      // Set default audio based on preference (Catalan first)\n      const preferredLang = localStorage.getItem(STORAGE_KEYS.audioLanguage) || DEFAULTS.audioLanguage;\n      if (response.data.audio_tracks) {\n        const catIndex = response.data.audio_tracks.findIndex(t => t.language === 'cat');\n        const preferredIndex = response.data.audio_tracks.findIndex(t => t.language === preferredLang);\n        if (catIndex >= 0) {\n          setSelectedAudio(catIndex);\n        } else if (preferredIndex >= 0) {\n          setSelectedAudio(preferredIndex);\n        }\n      }\n\n      // Load next episode if this is a series\n      if (response.data.series_id && response.data.episode_number) {\n        loadNextEpisode(response.data.series_id, response.data.season_number, response.data.episode_number);\n      }\n\n      // Load saved progress\n      const savedProgress = localStorage.getItem(`progress_${mediaId}`);\n      if (savedProgress) {\n        savedTimeRef.current = parseFloat(savedProgress);\n      }\n    } catch (err) {\n      console.error('Error loading media:', err);\n      setError('No s\\'ha pogut carregar el contingut');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadNextEpisode = async (seriesId, seasonNum, episodeNum) => {\n    try {\n      const response = await axios.get(`${API_URL}${API_ENDPOINTS.seasonEpisodes(seriesId, seasonNum)}`);\n      const episodes = response.data;\n      const nextEp = episodes.find(ep => ep.episode_number === episodeNum + 1);\n      if (nextEp) {\n        setNextEpisode(nextEp);\n      }\n    } catch (err) {\n      console.error('Error loading next episode:', err);\n    }\n  };\n  const startStream = async () => {\n    setPreparing(true);\n    setError(null);\n    try {\n      const response = await axios.post(`${API_URL}${API_ENDPOINTS.streamHls(mediaId)}`, {\n        audio_index: selectedAudio,\n        subtitle_index: selectedSubtitle,\n        quality: quality\n      });\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      setStreamUrl(`${API_URL}${response.data.playlist_url}`);\n    } catch (err) {\n      console.error('Error starting stream:', err);\n      setError('Error iniciant el streaming');\n    } finally {\n      setPreparing(false);\n    }\n  };\n  const playDirect = () => {\n    setStreamUrl(`${API_URL}${API_ENDPOINTS.streamDirect(mediaId)}`);\n  };\n\n  // Change audio/subtitle during playback\n  const changeTrack = async (type, index) => {\n    var _videoRef$current;\n    if (type === 'audio') {\n      setSelectedAudio(index);\n    } else {\n      setSelectedSubtitle(index);\n    }\n\n    // Save current time\n    const currentPos = ((_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.currentTime) || 0;\n\n    // Restart stream with new track selection\n    setPreparing(true);\n    try {\n      const response = await axios.post(`${API_URL}${API_ENDPOINTS.streamHls(mediaId)}`, {\n        audio_index: type === 'audio' ? index : selectedAudio,\n        subtitle_index: type === 'subtitle' ? index : selectedSubtitle,\n        quality: quality\n      });\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      setStreamUrl(`${API_URL}${response.data.playlist_url}`);\n      savedTimeRef.current = currentPos;\n    } catch (err) {\n      console.error('Error changing track:', err);\n    } finally {\n      setPreparing(false);\n    }\n  };\n  const handlePlayPause = () => {\n    if (videoRef.current) {\n      if (isPlaying) {\n        videoRef.current.pause();\n      } else {\n        videoRef.current.play();\n      }\n    }\n  };\n  const skipTime = seconds => {\n    if (videoRef.current) {\n      videoRef.current.currentTime = Math.max(0, Math.min(duration, videoRef.current.currentTime + seconds));\n    }\n  };\n  const skipOpening = () => {\n    if (videoRef.current) {\n      videoRef.current.currentTime = OPENING_END;\n      setShowSkipIntro(false);\n    }\n  };\n  const goToNextEpisode = () => {\n    if (nextEpisode) {\n      navigate(`/play/${nextEpisode.id}`);\n    }\n  };\n  const handleTimeUpdate = () => {\n    if (videoRef.current) {\n      const time = videoRef.current.currentTime;\n      setCurrentTime(time);\n\n      // Check if we're in the opening zone\n      if (time >= OPENING_START && time < OPENING_END) {\n        setShowSkipIntro(true);\n      } else {\n        setShowSkipIntro(false);\n      }\n\n      // Check if near the end for next episode prompt\n      if (duration > 0 && time >= duration - 30 && nextEpisode) {\n        setShowNextEpisode(true);\n      }\n\n      // Update buffered\n      if (videoRef.current.buffered.length > 0) {\n        setBuffered(videoRef.current.buffered.end(videoRef.current.buffered.length - 1));\n      }\n    }\n  };\n  const handleLoadedMetadata = () => {\n    if (videoRef.current) {\n      setDuration(videoRef.current.duration);\n\n      // Resume from saved position\n      if (savedTimeRef.current > 0) {\n        videoRef.current.currentTime = savedTimeRef.current;\n        savedTimeRef.current = 0;\n      }\n    }\n  };\n  const handleSeek = e => {\n    const rect = e.currentTarget.getBoundingClientRect();\n    const pos = (e.clientX - rect.left) / rect.width;\n    if (videoRef.current) {\n      videoRef.current.currentTime = pos * duration;\n    }\n  };\n  const handleVolumeChange = e => {\n    const newVolume = parseFloat(e.target.value);\n    setVolume(newVolume);\n    setIsMuted(newVolume === 0);\n  };\n  const toggleFullscreen = useCallback(() => {\n    const container = playerContainerRef.current;\n    if (!container) return;\n    if (!document.fullscreenElement) {\n      container.requestFullscreen().then(() => setIsFullscreen(true));\n    } else {\n      document.exitFullscreen().then(() => setIsFullscreen(false));\n    }\n  }, []);\n  const handleMouseMove = () => {\n    setShowControls(true);\n    if (controlsTimeoutRef.current) {\n      clearTimeout(controlsTimeoutRef.current);\n    }\n    controlsTimeoutRef.current = setTimeout(() => {\n      if (isPlaying) {\n        setShowControls(false);\n        setShowSettings(false);\n        setShowTrackSelector(false);\n      }\n    }, 3000);\n  };\n  const formatTime = seconds => {\n    if (!seconds || isNaN(seconds)) return '0:00';\n    const h = Math.floor(seconds / 3600);\n    const m = Math.floor(seconds % 3600 / 60);\n    const s = Math.floor(seconds % 60);\n    if (h > 0) {\n      return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\n    }\n    return `${m}:${s.toString().padStart(2, '0')}`;\n  };\n  const getLanguageName = code => {\n    const languages = {\n      cat: 'Catala',\n      spa: 'Castella',\n      eng: 'Angles',\n      jpn: 'Japones',\n      kor: 'Korea',\n      fra: 'Frances',\n      deu: 'Alemany',\n      ita: 'Italia',\n      por: 'Portugues',\n      und: 'Desconegut'\n    };\n    return languages[code] || code || 'Desconegut';\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-page loading\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Carregant...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 7\n    }, this);\n  }\n  if (error && !streamUrl) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-page error\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => navigate(-1),\n        children: \"Tornar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"player-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: playerContainerRef,\n      className: `player-container ${showControls ? 'show-controls' : ''}`,\n      onMouseMove: handleMouseMove,\n      onMouseLeave: () => isPlaying && setShowControls(false),\n      children: [streamUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"video-element\",\n        src: streamUrl,\n        onTimeUpdate: handleTimeUpdate,\n        onLoadedMetadata: handleLoadedMetadata,\n        onPlay: () => setIsPlaying(true),\n        onPause: () => setIsPlaying(false),\n        onClick: handlePlayPause,\n        onDoubleClick: toggleFullscreen,\n        autoPlay: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 11\n      }, this) :\n      /*#__PURE__*/\n      /* Pre-play screen */\n      _jsxDEV(\"div\", {\n        className: \"pre-play-screen\",\n        children: [(media === null || media === void 0 ? void 0 : media.backdrop) && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `${API_URL}${API_ENDPOINTS.backdrop(media.series_id || mediaId)}`,\n          alt: \"\",\n          className: \"pre-play-backdrop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pre-play-overlay\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pre-play-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"media-title\",\n            children: (media === null || media === void 0 ? void 0 : media.series_name) || (media === null || media === void 0 ? void 0 : media.title) || 'Video'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 15\n          }, this), (media === null || media === void 0 ? void 0 : media.episode_number) && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"episode-info\",\n            children: [\"Temporada \", media.season_number, \" - Episodi \", media.episode_number]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"track-selection\",\n            children: [(media === null || media === void 0 ? void 0 : media.audio_tracks) && media.audio_tracks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"track-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Audio:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: selectedAudio,\n                onChange: e => setSelectedAudio(parseInt(e.target.value)),\n                className: \"track-select\",\n                children: media.audio_tracks.map((track, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: index,\n                  children: [getLanguageName(track.language), track.title && ` - ${track.title}`, \"(\", track.codec, \")\"]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 19\n            }, this), (media === null || media === void 0 ? void 0 : media.subtitle_tracks) && media.subtitle_tracks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"track-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Subtitols:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: selectedSubtitle !== null && selectedSubtitle !== void 0 ? selectedSubtitle : '',\n                onChange: e => setSelectedSubtitle(e.target.value === '' ? null : parseInt(e.target.value)),\n                className: \"track-select\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Sense subtitols\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 490,\n                  columnNumber: 23\n                }, this), media.subtitle_tracks.map((track, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: index,\n                  children: [getLanguageName(track.language), \"(\", track.codec, \")\"]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 492,\n                  columnNumber: 25\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"track-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Qualitat:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                value: quality,\n                onChange: e => {\n                  setQuality(e.target.value);\n                  localStorage.setItem(STORAGE_KEYS.quality, e.target.value);\n                },\n                className: \"track-select\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"4k\",\n                  children: \"4K (Original)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 512,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"1080p\",\n                  children: \"1080p\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 513,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"720p\",\n                  children: \"720p\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 514,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"480p\",\n                  children: \"480p\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 515,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"play-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary play-btn\",\n              onClick: startStream,\n              disabled: preparing,\n              children: preparing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spinner small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 529,\n                  columnNumber: 23\n                }, this), \"Preparant...\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"24\",\n                  height: \"24\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n                    points: \"5,3 19,12 5,21\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 535,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 534,\n                  columnNumber: 23\n                }, this), \"Reproduir\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-secondary play-btn\",\n              onClick: playDirect,\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 547,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 546,\n                columnNumber: 19\n              }, this), \"Directe\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"shortcuts-hint\",\n            children: \"Prem ? per veure les dreceres de teclat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-btn\",\n        onClick: () => navigate(-1),\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"24\",\n          height: \"24\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M19 12H5M12 19l-7-7 7-7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 9\n      }, this), showSkipIntro && streamUrl && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"skip-intro-btn\",\n        onClick: skipOpening,\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"20\",\n          height: \"20\",\n          viewBox: \"0 0 24 24\",\n          fill: \"currentColor\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M5 4l10 8-10 8V4zM19 5h-2v14h2V5z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 13\n        }, this), \"Saltar intro\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 11\n      }, this), showNextEpisode && nextEpisode && streamUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"next-episode-prompt\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Seguent episodi:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"next-episode-btn\",\n          onClick: goToNextEpisode,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"next-ep-title\",\n            children: nextEpisode.title || `Episodi ${nextEpisode.episode_number}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 581,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"20\",\n            height: \"20\",\n            viewBox: \"0 0 24 24\",\n            fill: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M5 4l10 8-10 8V4zM19 5h-2v14h2V5z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 584,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 11\n      }, this), streamUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-container\",\n          onClick: handleSeek,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-buffered\",\n              style: {\n                width: `${buffered / duration * 100}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 597,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-fill\",\n              style: {\n                width: `${currentTime / duration * 100}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-handle\",\n              style: {\n                left: `${currentTime / duration * 100}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 596,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"controls-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"controls-left\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn\",\n              onClick: handlePlayPause,\n              title: \"Play/Pausa (K o Espai)\",\n              children: isPlaying ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                  x: \"6\",\n                  y: \"4\",\n                  width: \"4\",\n                  height: \"16\",\n                  rx: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 619,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"rect\", {\n                  x: \"14\",\n                  y: \"4\",\n                  width: \"4\",\n                  height: \"16\",\n                  rx: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 620,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 618,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n                  points: \"5,3 19,12 5,21\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 624,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 623,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 616,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn\",\n              onClick: () => skipTime(-10),\n              title: \"Retrocedir 10s (J o Fletxa esquerra)\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M12 8L8 12L12 16\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 632,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n                  x: \"14\",\n                  y: \"14\",\n                  fontSize: \"8\",\n                  fill: \"currentColor\",\n                  stroke: \"none\",\n                  children: \"10\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 633,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 631,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 630,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn\",\n              onClick: () => skipTime(10),\n              title: \"Avancar 10s (L o Fletxa dreta)\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M12 8L16 12L12 16\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 640,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n                  x: \"4\",\n                  y: \"14\",\n                  fontSize: \"8\",\n                  fill: \"currentColor\",\n                  stroke: \"none\",\n                  children: \"10\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 641,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 639,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 638,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"volume-control\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"control-btn\",\n                onClick: () => setIsMuted(!isMuted),\n                title: \"Silenciar (M)\",\n                children: isMuted || volume === 0 ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"24\",\n                  height: \"24\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M11 5L6 9H2v6h4l5 4V5zM23 9l-6 6M17 9l6 6\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 650,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 649,\n                  columnNumber: 23\n                }, this) : volume < 0.5 ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"24\",\n                  height: \"24\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M11 5L6 9H2v6h4l5 4V5zM15.54 8.46a5 5 0 010 7.07\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 654,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 653,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"24\",\n                  height: \"24\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M11 5L6 9H2v6h4l5 4V5zM15.54 8.46a5 5 0 010 7.07M19.07 4.93a10 10 0 010 14.14\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 658,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 657,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 647,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"range\",\n                min: \"0\",\n                max: \"1\",\n                step: \"0.05\",\n                value: isMuted ? 0 : volume,\n                onChange: handleVolumeChange,\n                className: \"volume-slider\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 662,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 646,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"time-display\",\n              children: [formatTime(currentTime), \" / \", formatTime(duration)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 614,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"controls-center\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"now-playing-title\",\n              children: [(media === null || media === void 0 ? void 0 : media.series_name) && `${media.series_name} - `, media !== null && media !== void 0 && media.episode_number ? `E${media.episode_number}` : media === null || media === void 0 ? void 0 : media.title]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 680,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 679,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"controls-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `control-btn speed-btn ${playbackRate !== 1 ? 'active' : ''}`,\n              onClick: () => setPlaybackRate(prev => prev === 2 ? 0.5 : prev + 0.25),\n              title: \"Velocitat de reproduccio\",\n              children: [playbackRate, \"x\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn\",\n              onClick: () => {\n                setShowTrackSelector(!showTrackSelector);\n                setShowSettings(false);\n              },\n              title: \"Audio i subtitols\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                  x: \"2\",\n                  y: \"4\",\n                  width: \"20\",\n                  height: \"16\",\n                  rx: \"2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 707,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M6 10h4M6 14h8\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 708,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 706,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 698,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn\",\n              onClick: () => {\n                setShowSettings(!showSettings);\n                setShowTrackSelector(false);\n              },\n              title: \"Configuracio\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                  cx: \"12\",\n                  cy: \"12\",\n                  r: \"3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 722,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 723,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 721,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 713,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn\",\n              onClick: toggleFullscreen,\n              title: \"Pantalla completa (F)\",\n              children: isFullscreen ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M8 3v3a2 2 0 01-2 2H3m18 0h-3a2 2 0 01-2-2V3m0 18v-3a2 2 0 012-2h3M3 16h3a2 2 0 012 2v3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 731,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 730,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 735,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 734,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 728,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 687,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 11\n      }, this), showTrackSelector && streamUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"track-panel glass\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Audio i Subtitols\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 747,\n          columnNumber: 13\n        }, this), (media === null || media === void 0 ? void 0 : media.audio_tracks) && media.audio_tracks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"track-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Audio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 751,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"track-list\",\n            children: media.audio_tracks.map((track, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `track-option ${selectedAudio === index ? 'active' : ''}`,\n              onClick: () => changeTrack('audio', index),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"track-lang\",\n                children: getLanguageName(track.language)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 759,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"track-codec\",\n                children: track.codec\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 760,\n                columnNumber: 23\n              }, this), selectedAudio === index && /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"16\",\n                height: \"16\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 763,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 762,\n                columnNumber: 25\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 754,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 752,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 750,\n          columnNumber: 15\n        }, this), (media === null || media === void 0 ? void 0 : media.subtitle_tracks) && media.subtitle_tracks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"track-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Subtitols\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 774,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"track-list\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `track-option ${selectedSubtitle === null ? 'active' : ''}`,\n              onClick: () => changeTrack('subtitle', null),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"track-lang\",\n                children: \"Sense subtitols\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 780,\n                columnNumber: 21\n              }, this), selectedSubtitle === null && /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"16\",\n                height: \"16\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 783,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 782,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 776,\n              columnNumber: 19\n            }, this), media.subtitle_tracks.map((track, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `track-option ${selectedSubtitle === index ? 'active' : ''}`,\n              onClick: () => changeTrack('subtitle', index),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"track-lang\",\n                children: getLanguageName(track.language)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 793,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"track-codec\",\n                children: track.codec\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 794,\n                columnNumber: 23\n              }, this), selectedSubtitle === index && /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"16\",\n                height: \"16\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 797,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 796,\n                columnNumber: 25\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 788,\n              columnNumber: 21\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 775,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 773,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"track-note\",\n          children: \"El canvi de pista pot trigar uns segons a aplicar-se.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 806,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 746,\n        columnNumber: 11\n      }, this), showSettings && streamUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"settings-panel glass\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Configuracio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 815,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settings-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Qualitat:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 818,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: quality,\n            onChange: e => {\n              setQuality(e.target.value);\n              localStorage.setItem(STORAGE_KEYS.quality, e.target.value);\n            },\n            className: \"settings-select\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"4k\",\n              children: \"4K (Original)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 827,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"1080p\",\n              children: \"1080p\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 828,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"720p\",\n              children: \"720p\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 829,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"480p\",\n              children: \"480p\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 830,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 819,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 817,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settings-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Velocitat:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 835,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"speed-options\",\n            children: [0.5, 0.75, 1, 1.25, 1.5, 2].map(speed => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `speed-option ${playbackRate === speed ? 'active' : ''}`,\n              onClick: () => setPlaybackRate(speed),\n              children: [speed, \"x\"]\n            }, speed, true, {\n              fileName: _jsxFileName,\n              lineNumber: 838,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 836,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 834,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 814,\n        columnNumber: 11\n      }, this), showShortcutsHelp && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"shortcuts-modal glass\",\n        onClick: () => setShowShortcutsHelp(false),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shortcuts-content\",\n          onClick: e => e.stopPropagation(),\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Dreceres de teclat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 855,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"shortcuts-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"Espai\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 858,\n                columnNumber: 19\n              }, this), \" / \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"K\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 858,\n                columnNumber: 38\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Play / Pausa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 859,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 857,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"J\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 862,\n                columnNumber: 19\n              }, this), \" / \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"Fletxa esquerra\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 862,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Retrocedir 10s\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 863,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 861,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"L\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 866,\n                columnNumber: 19\n              }, this), \" / \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"Fletxa dreta\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 866,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Avancar 10s\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 867,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 865,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"Fletxa amunt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 870,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Pujar volum\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 871,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 869,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"Fletxa avall\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 874,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Baixar volum\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 875,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 873,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"M\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 878,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Silenciar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 879,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 877,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 882,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Pantalla completa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 883,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 881,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"S\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 886,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Saltar intro\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 887,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 885,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"N\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 890,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Seguent episodi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 891,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 889,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"<\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 894,\n                columnNumber: 19\n              }, this), \" / \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \">\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 894,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Canviar velocitat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 895,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 893,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 856,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-shortcuts\",\n            onClick: () => setShowShortcutsHelp(false),\n            children: \"Tancar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 898,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 854,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 853,\n        columnNumber: 11\n      }, this), preparing && streamUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-overlay\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 908,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Canviant pista...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 909,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 907,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 416,\n    columnNumber: 5\n  }, this);\n}\n_s(Player, \"viv/ozL8ee8p7X03JeIblQMILbE=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Player;\nexport default Player;\nvar _c;\n$RefreshReg$(_c, \"Player\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useParams","useNavigate","Link","axios","API_URL","API_ENDPOINTS","STORAGE_KEYS","DEFAULTS","jsxDEV","_jsxDEV","Fragment","_Fragment","OPENING_START","OPENING_END","Player","_s","mediaId","navigate","videoRef","playerContainerRef","media","setMedia","nextEpisode","setNextEpisode","loading","setLoading","streamUrl","setStreamUrl","preparing","setPreparing","error","setError","selectedAudio","setSelectedAudio","selectedSubtitle","setSelectedSubtitle","quality","setQuality","localStorage","getItem","isPlaying","setIsPlaying","currentTime","setCurrentTime","duration","setDuration","buffered","setBuffered","volume","setVolume","parseFloat","isMuted","setIsMuted","showControls","setShowControls","showSettings","setShowSettings","showTrackSelector","setShowTrackSelector","isFullscreen","setIsFullscreen","playbackRate","setPlaybackRate","showSkipIntro","setShowSkipIntro","showNextEpisode","setShowNextEpisode","showShortcutsHelp","setShowShortcutsHelp","controlsTimeoutRef","savedTimeRef","loadMediaInfo","current","clearTimeout","setItem","toString","handleKeyDown","e","key","toLowerCase","preventDefault","handlePlayPause","skipTime","prev","Math","min","max","toggleFullscreen","skipOpening","goToNextEpisode","shiftKey","window","addEventListener","removeEventListener","response","get","mediaDetail","data","preferredLang","audioLanguage","audio_tracks","catIndex","findIndex","t","language","preferredIndex","series_id","episode_number","loadNextEpisode","season_number","savedProgress","err","console","seriesId","seasonNum","episodeNum","seasonEpisodes","episodes","nextEp","find","ep","startStream","post","streamHls","audio_index","subtitle_index","Promise","resolve","setTimeout","playlist_url","playDirect","streamDirect","changeTrack","type","index","_videoRef$current","currentPos","pause","play","seconds","id","handleTimeUpdate","time","length","end","handleLoadedMetadata","handleSeek","rect","currentTarget","getBoundingClientRect","pos","clientX","left","width","handleVolumeChange","newVolume","target","value","container","document","fullscreenElement","requestFullscreen","then","exitFullscreen","handleMouseMove","formatTime","isNaN","h","floor","m","s","padStart","getLanguageName","code","languages","cat","spa","eng","jpn","kor","fra","deu","ita","por","und","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","onMouseMove","onMouseLeave","src","onTimeUpdate","onLoadedMetadata","onPlay","onPause","onDoubleClick","autoPlay","backdrop","alt","series_name","title","onChange","parseInt","map","track","codec","subtitle_tracks","disabled","height","viewBox","fill","points","stroke","strokeWidth","d","style","x","y","rx","fontSize","step","cx","cy","r","speed","stopPropagation","_c","$RefreshReg$"],"sources":["E:/Develop/hermes-backend/frontend/src/pages/Player.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { API_URL, API_ENDPOINTS, STORAGE_KEYS, DEFAULTS } from '../config';\r\nimport './Player.css';\r\n\r\n// Opening detection constants (typical anime/series opening times)\r\nconst OPENING_START = 60; // Typically starts around 1 minute\r\nconst OPENING_END = 150; // Typically ends around 2:30\r\n\r\nfunction Player() {\r\n  const { mediaId } = useParams();\r\n  const navigate = useNavigate();\r\n  const videoRef = useRef(null);\r\n  const playerContainerRef = useRef(null);\r\n\r\n  const [media, setMedia] = useState(null);\r\n  const [nextEpisode, setNextEpisode] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [streamUrl, setStreamUrl] = useState(null);\r\n  const [preparing, setPreparing] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Track selection - can be changed during playback\r\n  const [selectedAudio, setSelectedAudio] = useState(0);\r\n  const [selectedSubtitle, setSelectedSubtitle] = useState(null);\r\n  const [quality, setQuality] = useState(\r\n    localStorage.getItem(STORAGE_KEYS.quality) || DEFAULTS.quality\r\n  );\r\n\r\n  // Player controls\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [buffered, setBuffered] = useState(0);\r\n  const [volume, setVolume] = useState(\r\n    parseFloat(localStorage.getItem(STORAGE_KEYS.volume)) || DEFAULTS.volume\r\n  );\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [showControls, setShowControls] = useState(true);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [showTrackSelector, setShowTrackSelector] = useState(false);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [playbackRate, setPlaybackRate] = useState(1);\r\n\r\n  // Skip intro/opening state\r\n  const [showSkipIntro, setShowSkipIntro] = useState(false);\r\n  const [showNextEpisode, setShowNextEpisode] = useState(false);\r\n\r\n  // Keyboard shortcuts enabled\r\n  const [showShortcutsHelp, setShowShortcutsHelp] = useState(false);\r\n\r\n  const controlsTimeoutRef = useRef(null);\r\n  const savedTimeRef = useRef(0);\r\n\r\n  useEffect(() => {\r\n    loadMediaInfo();\r\n    return () => {\r\n      if (controlsTimeoutRef.current) {\r\n        clearTimeout(controlsTimeoutRef.current);\r\n      }\r\n      // Save progress on unmount\r\n      if (videoRef.current && currentTime > 0) {\r\n        localStorage.setItem(`progress_${mediaId}`, currentTime.toString());\r\n      }\r\n    };\r\n  }, [mediaId]);\r\n\r\n  useEffect(() => {\r\n    if (videoRef.current) {\r\n      videoRef.current.volume = isMuted ? 0 : volume;\r\n    }\r\n    localStorage.setItem(STORAGE_KEYS.volume, volume.toString());\r\n  }, [volume, isMuted]);\r\n\r\n  // Keyboard shortcuts\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (!streamUrl) return;\r\n\r\n      switch (e.key.toLowerCase()) {\r\n        case ' ':\r\n        case 'k':\r\n          e.preventDefault();\r\n          handlePlayPause();\r\n          break;\r\n        case 'arrowleft':\r\n          e.preventDefault();\r\n          skipTime(-10);\r\n          break;\r\n        case 'arrowright':\r\n          e.preventDefault();\r\n          skipTime(10);\r\n          break;\r\n        case 'j':\r\n          e.preventDefault();\r\n          skipTime(-10);\r\n          break;\r\n        case 'l':\r\n          e.preventDefault();\r\n          skipTime(10);\r\n          break;\r\n        case 'arrowup':\r\n          e.preventDefault();\r\n          setVolume(prev => Math.min(1, prev + 0.1));\r\n          break;\r\n        case 'arrowdown':\r\n          e.preventDefault();\r\n          setVolume(prev => Math.max(0, prev - 0.1));\r\n          break;\r\n        case 'm':\r\n          e.preventDefault();\r\n          setIsMuted(prev => !prev);\r\n          break;\r\n        case 'f':\r\n          e.preventDefault();\r\n          toggleFullscreen();\r\n          break;\r\n        case 's':\r\n          e.preventDefault();\r\n          if (showSkipIntro) skipOpening();\r\n          break;\r\n        case 'n':\r\n          e.preventDefault();\r\n          if (showNextEpisode && nextEpisode) goToNextEpisode();\r\n          break;\r\n        case 'escape':\r\n          setShowSettings(false);\r\n          setShowTrackSelector(false);\r\n          setShowShortcutsHelp(false);\r\n          break;\r\n        case '?':\r\n          setShowShortcutsHelp(prev => !prev);\r\n          break;\r\n        default:\r\n          // Speed controls\r\n          if (e.key === '>' && e.shiftKey) {\r\n            setPlaybackRate(prev => Math.min(2, prev + 0.25));\r\n          } else if (e.key === '<' && e.shiftKey) {\r\n            setPlaybackRate(prev => Math.max(0.25, prev - 0.25));\r\n          }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [streamUrl, showSkipIntro, showNextEpisode, nextEpisode]);\r\n\r\n  // Update playback rate\r\n  useEffect(() => {\r\n    if (videoRef.current) {\r\n      videoRef.current.playbackRate = playbackRate;\r\n    }\r\n  }, [playbackRate]);\r\n\r\n  const loadMediaInfo = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_URL}${API_ENDPOINTS.mediaDetail(mediaId)}`);\r\n      setMedia(response.data);\r\n\r\n      // Set default audio based on preference (Catalan first)\r\n      const preferredLang = localStorage.getItem(STORAGE_KEYS.audioLanguage) || DEFAULTS.audioLanguage;\r\n      if (response.data.audio_tracks) {\r\n        const catIndex = response.data.audio_tracks.findIndex(t => t.language === 'cat');\r\n        const preferredIndex = response.data.audio_tracks.findIndex(t => t.language === preferredLang);\r\n\r\n        if (catIndex >= 0) {\r\n          setSelectedAudio(catIndex);\r\n        } else if (preferredIndex >= 0) {\r\n          setSelectedAudio(preferredIndex);\r\n        }\r\n      }\r\n\r\n      // Load next episode if this is a series\r\n      if (response.data.series_id && response.data.episode_number) {\r\n        loadNextEpisode(response.data.series_id, response.data.season_number, response.data.episode_number);\r\n      }\r\n\r\n      // Load saved progress\r\n      const savedProgress = localStorage.getItem(`progress_${mediaId}`);\r\n      if (savedProgress) {\r\n        savedTimeRef.current = parseFloat(savedProgress);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error loading media:', err);\r\n      setError('No s\\'ha pogut carregar el contingut');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadNextEpisode = async (seriesId, seasonNum, episodeNum) => {\r\n    try {\r\n      const response = await axios.get(\r\n        `${API_URL}${API_ENDPOINTS.seasonEpisodes(seriesId, seasonNum)}`\r\n      );\r\n      const episodes = response.data;\r\n      const nextEp = episodes.find(ep => ep.episode_number === episodeNum + 1);\r\n      if (nextEp) {\r\n        setNextEpisode(nextEp);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error loading next episode:', err);\r\n    }\r\n  };\r\n\r\n  const startStream = async () => {\r\n    setPreparing(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await axios.post(`${API_URL}${API_ENDPOINTS.streamHls(mediaId)}`, {\r\n        audio_index: selectedAudio,\r\n        subtitle_index: selectedSubtitle,\r\n        quality: quality,\r\n      });\r\n\r\n      await new Promise(resolve => setTimeout(resolve, 2000));\r\n\r\n      setStreamUrl(`${API_URL}${response.data.playlist_url}`);\r\n    } catch (err) {\r\n      console.error('Error starting stream:', err);\r\n      setError('Error iniciant el streaming');\r\n    } finally {\r\n      setPreparing(false);\r\n    }\r\n  };\r\n\r\n  const playDirect = () => {\r\n    setStreamUrl(`${API_URL}${API_ENDPOINTS.streamDirect(mediaId)}`);\r\n  };\r\n\r\n  // Change audio/subtitle during playback\r\n  const changeTrack = async (type, index) => {\r\n    if (type === 'audio') {\r\n      setSelectedAudio(index);\r\n    } else {\r\n      setSelectedSubtitle(index);\r\n    }\r\n\r\n    // Save current time\r\n    const currentPos = videoRef.current?.currentTime || 0;\r\n\r\n    // Restart stream with new track selection\r\n    setPreparing(true);\r\n    try {\r\n      const response = await axios.post(`${API_URL}${API_ENDPOINTS.streamHls(mediaId)}`, {\r\n        audio_index: type === 'audio' ? index : selectedAudio,\r\n        subtitle_index: type === 'subtitle' ? index : selectedSubtitle,\r\n        quality: quality,\r\n      });\r\n\r\n      await new Promise(resolve => setTimeout(resolve, 1500));\r\n\r\n      setStreamUrl(`${API_URL}${response.data.playlist_url}`);\r\n      savedTimeRef.current = currentPos;\r\n    } catch (err) {\r\n      console.error('Error changing track:', err);\r\n    } finally {\r\n      setPreparing(false);\r\n    }\r\n  };\r\n\r\n  const handlePlayPause = () => {\r\n    if (videoRef.current) {\r\n      if (isPlaying) {\r\n        videoRef.current.pause();\r\n      } else {\r\n        videoRef.current.play();\r\n      }\r\n    }\r\n  };\r\n\r\n  const skipTime = (seconds) => {\r\n    if (videoRef.current) {\r\n      videoRef.current.currentTime = Math.max(0, Math.min(duration, videoRef.current.currentTime + seconds));\r\n    }\r\n  };\r\n\r\n  const skipOpening = () => {\r\n    if (videoRef.current) {\r\n      videoRef.current.currentTime = OPENING_END;\r\n      setShowSkipIntro(false);\r\n    }\r\n  };\r\n\r\n  const goToNextEpisode = () => {\r\n    if (nextEpisode) {\r\n      navigate(`/play/${nextEpisode.id}`);\r\n    }\r\n  };\r\n\r\n  const handleTimeUpdate = () => {\r\n    if (videoRef.current) {\r\n      const time = videoRef.current.currentTime;\r\n      setCurrentTime(time);\r\n\r\n      // Check if we're in the opening zone\r\n      if (time >= OPENING_START && time < OPENING_END) {\r\n        setShowSkipIntro(true);\r\n      } else {\r\n        setShowSkipIntro(false);\r\n      }\r\n\r\n      // Check if near the end for next episode prompt\r\n      if (duration > 0 && time >= duration - 30 && nextEpisode) {\r\n        setShowNextEpisode(true);\r\n      }\r\n\r\n      // Update buffered\r\n      if (videoRef.current.buffered.length > 0) {\r\n        setBuffered(videoRef.current.buffered.end(videoRef.current.buffered.length - 1));\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLoadedMetadata = () => {\r\n    if (videoRef.current) {\r\n      setDuration(videoRef.current.duration);\r\n\r\n      // Resume from saved position\r\n      if (savedTimeRef.current > 0) {\r\n        videoRef.current.currentTime = savedTimeRef.current;\r\n        savedTimeRef.current = 0;\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSeek = (e) => {\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    const pos = (e.clientX - rect.left) / rect.width;\r\n    if (videoRef.current) {\r\n      videoRef.current.currentTime = pos * duration;\r\n    }\r\n  };\r\n\r\n  const handleVolumeChange = (e) => {\r\n    const newVolume = parseFloat(e.target.value);\r\n    setVolume(newVolume);\r\n    setIsMuted(newVolume === 0);\r\n  };\r\n\r\n  const toggleFullscreen = useCallback(() => {\r\n    const container = playerContainerRef.current;\r\n    if (!container) return;\r\n\r\n    if (!document.fullscreenElement) {\r\n      container.requestFullscreen().then(() => setIsFullscreen(true));\r\n    } else {\r\n      document.exitFullscreen().then(() => setIsFullscreen(false));\r\n    }\r\n  }, []);\r\n\r\n  const handleMouseMove = () => {\r\n    setShowControls(true);\r\n    if (controlsTimeoutRef.current) {\r\n      clearTimeout(controlsTimeoutRef.current);\r\n    }\r\n    controlsTimeoutRef.current = setTimeout(() => {\r\n      if (isPlaying) {\r\n        setShowControls(false);\r\n        setShowSettings(false);\r\n        setShowTrackSelector(false);\r\n      }\r\n    }, 3000);\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    if (!seconds || isNaN(seconds)) return '0:00';\r\n    const h = Math.floor(seconds / 3600);\r\n    const m = Math.floor((seconds % 3600) / 60);\r\n    const s = Math.floor(seconds % 60);\r\n    if (h > 0) {\r\n      return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${m}:${s.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const getLanguageName = (code) => {\r\n    const languages = {\r\n      cat: 'Catala',\r\n      spa: 'Castella',\r\n      eng: 'Angles',\r\n      jpn: 'Japones',\r\n      kor: 'Korea',\r\n      fra: 'Frances',\r\n      deu: 'Alemany',\r\n      ita: 'Italia',\r\n      por: 'Portugues',\r\n      und: 'Desconegut',\r\n    };\r\n    return languages[code] || code || 'Desconegut';\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"player-page loading\">\r\n        <div className=\"spinner\"></div>\r\n        <p>Carregant...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error && !streamUrl) {\r\n    return (\r\n      <div className=\"player-page error\">\r\n        <h2>{error}</h2>\r\n        <button className=\"btn btn-primary\" onClick={() => navigate(-1)}>\r\n          Tornar\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"player-page\">\r\n      <div\r\n        ref={playerContainerRef}\r\n        className={`player-container ${showControls ? 'show-controls' : ''}`}\r\n        onMouseMove={handleMouseMove}\r\n        onMouseLeave={() => isPlaying && setShowControls(false)}\r\n      >\r\n        {/* Video */}\r\n        {streamUrl ? (\r\n          <video\r\n            ref={videoRef}\r\n            className=\"video-element\"\r\n            src={streamUrl}\r\n            onTimeUpdate={handleTimeUpdate}\r\n            onLoadedMetadata={handleLoadedMetadata}\r\n            onPlay={() => setIsPlaying(true)}\r\n            onPause={() => setIsPlaying(false)}\r\n            onClick={handlePlayPause}\r\n            onDoubleClick={toggleFullscreen}\r\n            autoPlay\r\n          />\r\n        ) : (\r\n          /* Pre-play screen */\r\n          <div className=\"pre-play-screen\">\r\n            {media?.backdrop && (\r\n              <img\r\n                src={`${API_URL}${API_ENDPOINTS.backdrop(media.series_id || mediaId)}`}\r\n                alt=\"\"\r\n                className=\"pre-play-backdrop\"\r\n              />\r\n            )}\r\n            <div className=\"pre-play-overlay\"></div>\r\n\r\n            <div className=\"pre-play-content\">\r\n              <h1 className=\"media-title\">\r\n                {media?.series_name || media?.title || 'Video'}\r\n              </h1>\r\n              {media?.episode_number && (\r\n                <p className=\"episode-info\">\r\n                  Temporada {media.season_number} - Episodi {media.episode_number}\r\n                </p>\r\n              )}\r\n\r\n              {/* Track Selection */}\r\n              <div className=\"track-selection\">\r\n                {/* Audio Selection */}\r\n                {media?.audio_tracks && media.audio_tracks.length > 0 && (\r\n                  <div className=\"track-group\">\r\n                    <label>Audio:</label>\r\n                    <select\r\n                      value={selectedAudio}\r\n                      onChange={(e) => setSelectedAudio(parseInt(e.target.value))}\r\n                      className=\"track-select\"\r\n                    >\r\n                      {media.audio_tracks.map((track, index) => (\r\n                        <option key={index} value={index}>\r\n                          {getLanguageName(track.language)}\r\n                          {track.title && ` - ${track.title}`}\r\n                          ({track.codec})\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Subtitle Selection */}\r\n                {media?.subtitle_tracks && media.subtitle_tracks.length > 0 && (\r\n                  <div className=\"track-group\">\r\n                    <label>Subtitols:</label>\r\n                    <select\r\n                      value={selectedSubtitle ?? ''}\r\n                      onChange={(e) => setSelectedSubtitle(e.target.value === '' ? null : parseInt(e.target.value))}\r\n                      className=\"track-select\"\r\n                    >\r\n                      <option value=\"\">Sense subtitols</option>\r\n                      {media.subtitle_tracks.map((track, index) => (\r\n                        <option key={index} value={index}>\r\n                          {getLanguageName(track.language)}\r\n                          ({track.codec})\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Quality Selection */}\r\n                <div className=\"track-group\">\r\n                  <label>Qualitat:</label>\r\n                  <select\r\n                    value={quality}\r\n                    onChange={(e) => {\r\n                      setQuality(e.target.value);\r\n                      localStorage.setItem(STORAGE_KEYS.quality, e.target.value);\r\n                    }}\r\n                    className=\"track-select\"\r\n                  >\r\n                    <option value=\"4k\">4K (Original)</option>\r\n                    <option value=\"1080p\">1080p</option>\r\n                    <option value=\"720p\">720p</option>\r\n                    <option value=\"480p\">480p</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Play Buttons */}\r\n              <div className=\"play-buttons\">\r\n                <button\r\n                  className=\"btn btn-primary play-btn\"\r\n                  onClick={startStream}\r\n                  disabled={preparing}\r\n                >\r\n                  {preparing ? (\r\n                    <>\r\n                      <div className=\"spinner small\"></div>\r\n                      Preparant...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                        <polygon points=\"5,3 19,12 5,21\" />\r\n                      </svg>\r\n                      Reproduir\r\n                    </>\r\n                  )}\r\n                </button>\r\n\r\n                <button\r\n                  className=\"btn btn-secondary play-btn\"\r\n                  onClick={playDirect}\r\n                >\r\n                  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <path d=\"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3\" />\r\n                  </svg>\r\n                  Directe\r\n                </button>\r\n              </div>\r\n\r\n              {/* Keyboard shortcuts hint */}\r\n              <p className=\"shortcuts-hint\">Prem ? per veure les dreceres de teclat</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Back Button */}\r\n        <button className=\"back-btn\" onClick={() => navigate(-1)}>\r\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n            <path d=\"M19 12H5M12 19l-7-7 7-7\" />\r\n          </svg>\r\n        </button>\r\n\r\n        {/* Skip Intro Button */}\r\n        {showSkipIntro && streamUrl && (\r\n          <button className=\"skip-intro-btn\" onClick={skipOpening}>\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n              <path d=\"M5 4l10 8-10 8V4zM19 5h-2v14h2V5z\" />\r\n            </svg>\r\n            Saltar intro\r\n          </button>\r\n        )}\r\n\r\n        {/* Next Episode Button */}\r\n        {showNextEpisode && nextEpisode && streamUrl && (\r\n          <div className=\"next-episode-prompt\">\r\n            <span>Seguent episodi:</span>\r\n            <button className=\"next-episode-btn\" onClick={goToNextEpisode}>\r\n              <span className=\"next-ep-title\">\r\n                {nextEpisode.title || `Episodi ${nextEpisode.episode_number}`}\r\n              </span>\r\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                <path d=\"M5 4l10 8-10 8V4zM19 5h-2v14h2V5z\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Player Controls */}\r\n        {streamUrl && (\r\n          <div className=\"player-controls\">\r\n            {/* Progress Bar */}\r\n            <div className=\"progress-container\" onClick={handleSeek}>\r\n              <div className=\"progress-bar\">\r\n                <div\r\n                  className=\"progress-buffered\"\r\n                  style={{ width: `${(buffered / duration) * 100}%` }}\r\n                />\r\n                <div\r\n                  className=\"progress-fill\"\r\n                  style={{ width: `${(currentTime / duration) * 100}%` }}\r\n                />\r\n                <div\r\n                  className=\"progress-handle\"\r\n                  style={{ left: `${(currentTime / duration) * 100}%` }}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"controls-row\">\r\n              {/* Left Controls */}\r\n              <div className=\"controls-left\">\r\n                {/* Play/Pause */}\r\n                <button className=\"control-btn\" onClick={handlePlayPause} title=\"Play/Pausa (K o Espai)\">\r\n                  {isPlaying ? (\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                      <rect x=\"6\" y=\"4\" width=\"4\" height=\"16\" rx=\"1\" />\r\n                      <rect x=\"14\" y=\"4\" width=\"4\" height=\"16\" rx=\"1\" />\r\n                    </svg>\r\n                  ) : (\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                      <polygon points=\"5,3 19,12 5,21\" />\r\n                    </svg>\r\n                  )}\r\n                </button>\r\n\r\n                {/* Skip -10s */}\r\n                <button className=\"control-btn\" onClick={() => skipTime(-10)} title=\"Retrocedir 10s (J o Fletxa esquerra)\">\r\n                  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <path d=\"M12 8L8 12L12 16\" />\r\n                    <text x=\"14\" y=\"14\" fontSize=\"8\" fill=\"currentColor\" stroke=\"none\">10</text>\r\n                  </svg>\r\n                </button>\r\n\r\n                {/* Skip +10s */}\r\n                <button className=\"control-btn\" onClick={() => skipTime(10)} title=\"Avancar 10s (L o Fletxa dreta)\">\r\n                  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <path d=\"M12 8L16 12L12 16\" />\r\n                    <text x=\"4\" y=\"14\" fontSize=\"8\" fill=\"currentColor\" stroke=\"none\">10</text>\r\n                  </svg>\r\n                </button>\r\n\r\n                {/* Volume */}\r\n                <div className=\"volume-control\">\r\n                  <button className=\"control-btn\" onClick={() => setIsMuted(!isMuted)} title=\"Silenciar (M)\">\r\n                    {isMuted || volume === 0 ? (\r\n                      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                        <path d=\"M11 5L6 9H2v6h4l5 4V5zM23 9l-6 6M17 9l6 6\" />\r\n                      </svg>\r\n                    ) : volume < 0.5 ? (\r\n                      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                        <path d=\"M11 5L6 9H2v6h4l5 4V5zM15.54 8.46a5 5 0 010 7.07\" />\r\n                      </svg>\r\n                    ) : (\r\n                      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                        <path d=\"M11 5L6 9H2v6h4l5 4V5zM15.54 8.46a5 5 0 010 7.07M19.07 4.93a10 10 0 010 14.14\" />\r\n                      </svg>\r\n                    )}\r\n                  </button>\r\n                  <input\r\n                    type=\"range\"\r\n                    min=\"0\"\r\n                    max=\"1\"\r\n                    step=\"0.05\"\r\n                    value={isMuted ? 0 : volume}\r\n                    onChange={handleVolumeChange}\r\n                    className=\"volume-slider\"\r\n                  />\r\n                </div>\r\n\r\n                <span className=\"time-display\">\r\n                  {formatTime(currentTime)} / {formatTime(duration)}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Center - Title */}\r\n              <div className=\"controls-center\">\r\n                <span className=\"now-playing-title\">\r\n                  {media?.series_name && `${media.series_name} - `}\r\n                  {media?.episode_number ? `E${media.episode_number}` : media?.title}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Right Controls */}\r\n              <div className=\"controls-right\">\r\n                {/* Playback Speed */}\r\n                <button\r\n                  className={`control-btn speed-btn ${playbackRate !== 1 ? 'active' : ''}`}\r\n                  onClick={() => setPlaybackRate(prev => prev === 2 ? 0.5 : prev + 0.25)}\r\n                  title=\"Velocitat de reproduccio\"\r\n                >\r\n                  {playbackRate}x\r\n                </button>\r\n\r\n                {/* Audio/Subtitle selector */}\r\n                <button\r\n                  className=\"control-btn\"\r\n                  onClick={() => {\r\n                    setShowTrackSelector(!showTrackSelector);\r\n                    setShowSettings(false);\r\n                  }}\r\n                  title=\"Audio i subtitols\"\r\n                >\r\n                  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <rect x=\"2\" y=\"4\" width=\"20\" height=\"16\" rx=\"2\" />\r\n                    <path d=\"M6 10h4M6 14h8\" />\r\n                  </svg>\r\n                </button>\r\n\r\n                {/* Settings */}\r\n                <button\r\n                  className=\"control-btn\"\r\n                  onClick={() => {\r\n                    setShowSettings(!showSettings);\r\n                    setShowTrackSelector(false);\r\n                  }}\r\n                  title=\"Configuracio\"\r\n                >\r\n                  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <circle cx=\"12\" cy=\"12\" r=\"3\" />\r\n                    <path d=\"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z\" />\r\n                  </svg>\r\n                </button>\r\n\r\n                {/* Fullscreen */}\r\n                <button className=\"control-btn\" onClick={toggleFullscreen} title=\"Pantalla completa (F)\">\r\n                  {isFullscreen ? (\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M8 3v3a2 2 0 01-2 2H3m18 0h-3a2 2 0 01-2-2V3m0 18v-3a2 2 0 012-2h3M3 16h3a2 2 0 012 2v3\" />\r\n                    </svg>\r\n                  ) : (\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3\" />\r\n                    </svg>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Track Selector Panel */}\r\n        {showTrackSelector && streamUrl && (\r\n          <div className=\"track-panel glass\">\r\n            <h3>Audio i Subtitols</h3>\r\n\r\n            {media?.audio_tracks && media.audio_tracks.length > 0 && (\r\n              <div className=\"track-section\">\r\n                <h4>Audio</h4>\r\n                <div className=\"track-list\">\r\n                  {media.audio_tracks.map((track, index) => (\r\n                    <button\r\n                      key={index}\r\n                      className={`track-option ${selectedAudio === index ? 'active' : ''}`}\r\n                      onClick={() => changeTrack('audio', index)}\r\n                    >\r\n                      <span className=\"track-lang\">{getLanguageName(track.language)}</span>\r\n                      <span className=\"track-codec\">{track.codec}</span>\r\n                      {selectedAudio === index && (\r\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                          <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\" />\r\n                        </svg>\r\n                      )}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {media?.subtitle_tracks && media.subtitle_tracks.length > 0 && (\r\n              <div className=\"track-section\">\r\n                <h4>Subtitols</h4>\r\n                <div className=\"track-list\">\r\n                  <button\r\n                    className={`track-option ${selectedSubtitle === null ? 'active' : ''}`}\r\n                    onClick={() => changeTrack('subtitle', null)}\r\n                  >\r\n                    <span className=\"track-lang\">Sense subtitols</span>\r\n                    {selectedSubtitle === null && (\r\n                      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                        <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\" />\r\n                      </svg>\r\n                    )}\r\n                  </button>\r\n                  {media.subtitle_tracks.map((track, index) => (\r\n                    <button\r\n                      key={index}\r\n                      className={`track-option ${selectedSubtitle === index ? 'active' : ''}`}\r\n                      onClick={() => changeTrack('subtitle', index)}\r\n                    >\r\n                      <span className=\"track-lang\">{getLanguageName(track.language)}</span>\r\n                      <span className=\"track-codec\">{track.codec}</span>\r\n                      {selectedSubtitle === index && (\r\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                          <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\" />\r\n                        </svg>\r\n                      )}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <p className=\"track-note\">\r\n              El canvi de pista pot trigar uns segons a aplicar-se.\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Settings Panel */}\r\n        {showSettings && streamUrl && (\r\n          <div className=\"settings-panel glass\">\r\n            <h3>Configuracio</h3>\r\n\r\n            <div className=\"settings-group\">\r\n              <label>Qualitat:</label>\r\n              <select\r\n                value={quality}\r\n                onChange={(e) => {\r\n                  setQuality(e.target.value);\r\n                  localStorage.setItem(STORAGE_KEYS.quality, e.target.value);\r\n                }}\r\n                className=\"settings-select\"\r\n              >\r\n                <option value=\"4k\">4K (Original)</option>\r\n                <option value=\"1080p\">1080p</option>\r\n                <option value=\"720p\">720p</option>\r\n                <option value=\"480p\">480p</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"settings-group\">\r\n              <label>Velocitat:</label>\r\n              <div className=\"speed-options\">\r\n                {[0.5, 0.75, 1, 1.25, 1.5, 2].map(speed => (\r\n                  <button\r\n                    key={speed}\r\n                    className={`speed-option ${playbackRate === speed ? 'active' : ''}`}\r\n                    onClick={() => setPlaybackRate(speed)}\r\n                  >\r\n                    {speed}x\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Keyboard Shortcuts Help */}\r\n        {showShortcutsHelp && (\r\n          <div className=\"shortcuts-modal glass\" onClick={() => setShowShortcutsHelp(false)}>\r\n            <div className=\"shortcuts-content\" onClick={e => e.stopPropagation()}>\r\n              <h3>Dreceres de teclat</h3>\r\n              <div className=\"shortcuts-grid\">\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>Espai</kbd> / <kbd>K</kbd>\r\n                  <span>Play / Pausa</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>J</kbd> / <kbd>Fletxa esquerra</kbd>\r\n                  <span>Retrocedir 10s</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>L</kbd> / <kbd>Fletxa dreta</kbd>\r\n                  <span>Avancar 10s</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>Fletxa amunt</kbd>\r\n                  <span>Pujar volum</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>Fletxa avall</kbd>\r\n                  <span>Baixar volum</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>M</kbd>\r\n                  <span>Silenciar</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>F</kbd>\r\n                  <span>Pantalla completa</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>S</kbd>\r\n                  <span>Saltar intro</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>N</kbd>\r\n                  <span>Seguent episodi</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>&lt;</kbd> / <kbd>&gt;</kbd>\r\n                  <span>Canviar velocitat</span>\r\n                </div>\r\n              </div>\r\n              <button className=\"close-shortcuts\" onClick={() => setShowShortcutsHelp(false)}>\r\n                Tancar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Loading overlay when changing tracks */}\r\n        {preparing && streamUrl && (\r\n          <div className=\"loading-overlay\">\r\n            <div className=\"spinner\"></div>\r\n            <p>Canviant pista...</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Player;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}