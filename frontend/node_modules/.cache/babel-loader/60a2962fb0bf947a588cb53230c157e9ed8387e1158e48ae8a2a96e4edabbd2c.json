{"ast":null,"code":"var _jsxFileName = \"E:\\\\Develop\\\\hermes-backend\\\\frontend\\\\src\\\\pages\\\\Player.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport './Player.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = window.location.hostname === 'localhost' ? 'http://localhost:8000' : '';\naxios.defaults.baseURL = API_URL;\n\n// SVG Icons\nconst PlayIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M8 5v14l11-7z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 14,\n  columnNumber: 3\n}, this);\n_c = PlayIcon;\nconst PauseIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 20,\n  columnNumber: 3\n}, this);\n_c2 = PauseIcon;\nconst SkipBackIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\",\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n    x: \"12\",\n    y: \"15.5\",\n    fontSize: \"7\",\n    textAnchor: \"middle\",\n    fontWeight: \"bold\",\n    fontFamily: \"Arial\",\n    children: \"10\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 26,\n  columnNumber: 3\n}, this);\n_c3 = SkipBackIcon;\nconst SkipForwardIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\",\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 5V1l5 5-5 5V7c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6h2c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n    x: \"12\",\n    y: \"15.5\",\n    fontSize: \"7\",\n    textAnchor: \"middle\",\n    fontWeight: \"bold\",\n    fontFamily: \"Arial\",\n    children: \"10\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 33,\n  columnNumber: 3\n}, this);\n_c4 = SkipForwardIcon;\nconst VolumeHighIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 40,\n  columnNumber: 3\n}, this);\n_c5 = VolumeHighIcon;\nconst VolumeLowIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 46,\n  columnNumber: 3\n}, this);\n_c6 = VolumeLowIcon;\nconst VolumeMuteIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 52,\n  columnNumber: 3\n}, this);\n_c7 = VolumeMuteIcon;\nconst FullscreenIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 58,\n  columnNumber: 3\n}, this);\n_c8 = FullscreenIcon;\nconst FullscreenExitIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 64,\n  columnNumber: 3\n}, this);\n_c9 = FullscreenExitIcon;\nconst SubtitlesIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 70,\n  columnNumber: 3\n}, this);\n_c0 = SubtitlesIcon;\nconst AudioIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 76,\n  columnNumber: 3\n}, this);\n_c1 = AudioIcon;\nconst SpeedIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M10 8v8l6-4-6-4zm11-5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 82,\n  columnNumber: 3\n}, this);\n_c10 = SpeedIcon;\nconst BackIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 88,\n  columnNumber: 3\n}, this);\n\n// Mapa de banderes per idiomes\n_c11 = BackIcon;\nconst languageFlags = {\n  // CatalÃ  - Senyera (Andorra)\n  'cat': 'ðŸ‡¦ðŸ‡©',\n  'catalan': 'ðŸ‡¦ðŸ‡©',\n  'catalÃ ': 'ðŸ‡¦ðŸ‡©',\n  'ca': 'ðŸ‡¦ðŸ‡©',\n  // CastellÃ  (Espanya)\n  'spa': 'ðŸ‡ªðŸ‡¸',\n  'esp': 'ðŸ‡ªðŸ‡¸',\n  'spanish': 'ðŸ‡ªðŸ‡¸',\n  'espaÃ±ol': 'ðŸ‡ªðŸ‡¸',\n  'castellano': 'ðŸ‡ªðŸ‡¸',\n  'es': 'ðŸ‡ªðŸ‡¸',\n  'cas': 'ðŸ‡ªðŸ‡¸',\n  // Espanyol AmericÃ  (LlatinoamÃ¨rica)\n  'spa-la': 'ðŸŒŽ',\n  'es-la': 'ðŸŒŽ',\n  'es-419': 'ðŸŒŽ',\n  'spanish-latin': 'ðŸŒŽ',\n  'lat': 'ðŸŒŽ',\n  'latino': 'ðŸŒŽ',\n  // AnglÃ¨s (EEUU)\n  'eng': 'ðŸ‡ºðŸ‡¸',\n  'english': 'ðŸ‡ºðŸ‡¸',\n  'en': 'ðŸ‡ºðŸ‡¸',\n  'en-us': 'ðŸ‡ºðŸ‡¸',\n  // AnglÃ¨s BritÃ nic\n  'en-gb': 'ðŸ‡¬ðŸ‡§',\n  'british': 'ðŸ‡¬ðŸ‡§',\n  // JaponÃ¨s\n  'jap': 'ðŸ‡¯ðŸ‡µ',\n  'jpn': 'ðŸ‡¯ðŸ‡µ',\n  'japanese': 'ðŸ‡¯ðŸ‡µ',\n  'ja': 'ðŸ‡¯ðŸ‡µ',\n  // FrancÃ¨s\n  'fre': 'ðŸ‡«ðŸ‡·',\n  'fra': 'ðŸ‡«ðŸ‡·',\n  'french': 'ðŸ‡«ðŸ‡·',\n  'fr': 'ðŸ‡«ðŸ‡·',\n  // Alemany\n  'ger': 'ðŸ‡©ðŸ‡ª',\n  'deu': 'ðŸ‡©ðŸ‡ª',\n  'german': 'ðŸ‡©ðŸ‡ª',\n  'de': 'ðŸ‡©ðŸ‡ª',\n  // ItaliÃ \n  'ita': 'ðŸ‡®ðŸ‡¹',\n  'italian': 'ðŸ‡®ðŸ‡¹',\n  'it': 'ðŸ‡®ðŸ‡¹',\n  // PortuguÃ¨s\n  'por': 'ðŸ‡µðŸ‡¹',\n  'portuguese': 'ðŸ‡µðŸ‡¹',\n  'pt': 'ðŸ‡µðŸ‡¹',\n  // PortuguÃ¨s Brasiler\n  'pt-br': 'ðŸ‡§ðŸ‡·',\n  'brazilian': 'ðŸ‡§ðŸ‡·',\n  // CoreÃ \n  'kor': 'ðŸ‡°ðŸ‡·',\n  'korean': 'ðŸ‡°ðŸ‡·',\n  'ko': 'ðŸ‡°ðŸ‡·',\n  // XinÃ¨s\n  'chi': 'ðŸ‡¨ðŸ‡³',\n  'zho': 'ðŸ‡¨ðŸ‡³',\n  'chinese': 'ðŸ‡¨ðŸ‡³',\n  'zh': 'ðŸ‡¨ðŸ‡³',\n  // Rus\n  'rus': 'ðŸ‡·ðŸ‡º',\n  'russian': 'ðŸ‡·ðŸ‡º',\n  'ru': 'ðŸ‡·ðŸ‡º'\n};\n\n// FunciÃ³ per obtenir la bandera d'un idioma\nconst getLanguageFlag = lang => {\n  if (!lang) return 'ðŸŒ';\n  const normalizedLang = lang.toLowerCase().trim();\n  return languageFlags[normalizedLang] || 'ðŸŒ';\n};\n\n// FunciÃ³ per obtenir el nom de l'idioma\nconst getLanguageName = lang => {\n  if (!lang) return 'Desconegut';\n  const normalizedLang = lang.toLowerCase().trim();\n  const names = {\n    'cat': 'CatalÃ ',\n    'catalan': 'CatalÃ ',\n    'catalÃ ': 'CatalÃ ',\n    'ca': 'CatalÃ ',\n    'spa': 'CastellÃ ',\n    'esp': 'CastellÃ ',\n    'spanish': 'CastellÃ ',\n    'espaÃ±ol': 'CastellÃ ',\n    'castellano': 'CastellÃ ',\n    'es': 'CastellÃ ',\n    'cas': 'CastellÃ ',\n    'spa-la': 'Espanyol AmericÃ ',\n    'es-la': 'Espanyol AmericÃ ',\n    'es-419': 'Espanyol AmericÃ ',\n    'spanish-latin': 'Espanyol AmericÃ ',\n    'lat': 'Espanyol AmericÃ ',\n    'latino': 'Espanyol AmericÃ ',\n    'eng': 'AnglÃ¨s',\n    'english': 'AnglÃ¨s',\n    'en': 'AnglÃ¨s',\n    'en-us': 'AnglÃ¨s',\n    'en-gb': 'AnglÃ¨s BritÃ nic',\n    'british': 'AnglÃ¨s BritÃ nic',\n    'jap': 'JaponÃ¨s',\n    'jpn': 'JaponÃ¨s',\n    'japanese': 'JaponÃ¨s',\n    'ja': 'JaponÃ¨s',\n    'fre': 'FrancÃ¨s',\n    'fra': 'FrancÃ¨s',\n    'french': 'FrancÃ¨s',\n    'fr': 'FrancÃ¨s',\n    'ger': 'Alemany',\n    'deu': 'Alemany',\n    'german': 'Alemany',\n    'de': 'Alemany',\n    'ita': 'ItaliÃ ',\n    'italian': 'ItaliÃ ',\n    'it': 'ItaliÃ ',\n    'por': 'PortuguÃ¨s',\n    'portuguese': 'PortuguÃ¨s',\n    'pt': 'PortuguÃ¨s',\n    'pt-br': 'PortuguÃ¨s Brasiler',\n    'brazilian': 'PortuguÃ¨s Brasiler',\n    'kor': 'CoreÃ ',\n    'korean': 'CoreÃ ',\n    'ko': 'CoreÃ ',\n    'chi': 'XinÃ¨s',\n    'zho': 'XinÃ¨s',\n    'chinese': 'XinÃ¨s',\n    'zh': 'XinÃ¨s',\n    'rus': 'Rus',\n    'russian': 'Rus',\n    'ru': 'Rus'\n  };\n  return names[normalizedLang] || 'Desconegut';\n};\nfunction Player() {\n  _s();\n  const {\n    type,\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const videoRef = useRef(null);\n  const controlsTimeoutRef = useRef(null);\n  const progressRef = useRef(null);\n  const [item, setItem] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [videoLoading, setVideoLoading] = useState(true);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [buffered, setBuffered] = useState(0);\n  const [volume, setVolume] = useState(1);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [showControls, setShowControls] = useState(true);\n\n  // Popup states\n  const [showAudioMenu, setShowAudioMenu] = useState(false);\n  const [showSubtitleMenu, setShowSubtitleMenu] = useState(false);\n  const [showSpeedMenu, setShowSpeedMenu] = useState(false);\n\n  // Track selections\n  const [audioTracks, setAudioTracks] = useState([]);\n  const [subtitleTracks, setSubtitleTracks] = useState([]);\n  const [selectedAudio, setSelectedAudio] = useState(0);\n  const [selectedSubtitle, setSelectedSubtitle] = useState(-1);\n  const [playbackSpeed, setPlaybackSpeed] = useState(1);\n  const speeds = [0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2];\n\n  // Preferences from localStorage\n  const preferredAudioLang = localStorage.getItem('hermes_audio_lang') || 'cat';\n  const preferredSubtitleLang = localStorage.getItem('hermes_subtitle_lang') || 'off';\n  useEffect(() => {\n    loadMedia();\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n    };\n  }, [type, id]);\n  const loadMedia = async () => {\n    try {\n      let response;\n      if (type === 'episode') {\n        response = await axios.get(`/api/library/episodes/${id}`);\n      } else {\n        response = await axios.get(`/api/library/movies/${id}`);\n      }\n      setItem(response.data);\n\n      // Parse audio tracks\n      if (response.data.audio_tracks) {\n        try {\n          const tracks = JSON.parse(response.data.audio_tracks);\n          setAudioTracks(tracks);\n          const preferredIndex = tracks.findIndex(t => {\n            var _t$language;\n            return (_t$language = t.language) === null || _t$language === void 0 ? void 0 : _t$language.toLowerCase().includes(preferredAudioLang);\n          });\n          if (preferredIndex >= 0) setSelectedAudio(preferredIndex);\n        } catch (e) {\n          console.error('Error parsing audio tracks:', e);\n        }\n      }\n\n      // Parse subtitles\n      if (response.data.subtitles) {\n        try {\n          const subs = JSON.parse(response.data.subtitles);\n          setSubtitleTracks(subs);\n          if (preferredSubtitleLang !== 'off') {\n            const preferredIndex = subs.findIndex(s => {\n              var _s$language;\n              return (_s$language = s.language) === null || _s$language === void 0 ? void 0 : _s$language.toLowerCase().includes(preferredSubtitleLang);\n            });\n            if (preferredIndex >= 0) setSelectedSubtitle(preferredIndex);\n          }\n        } catch (e) {\n          console.error('Error parsing subtitles:', e);\n        }\n      }\n    } catch (error) {\n      console.error('Error carregant media:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleFullscreenChange = () => {\n    setIsFullscreen(!!document.fullscreenElement);\n  };\n  const closeAllMenus = () => {\n    setShowAudioMenu(false);\n    setShowSubtitleMenu(false);\n    setShowSpeedMenu(false);\n  };\n  const showControlsTemporarily = useCallback(() => {\n    setShowControls(true);\n    if (controlsTimeoutRef.current) {\n      clearTimeout(controlsTimeoutRef.current);\n    }\n    if (isPlaying) {\n      controlsTimeoutRef.current = setTimeout(() => {\n        setShowControls(false);\n        closeAllMenus();\n      }, 3000);\n    }\n  }, [isPlaying]);\n  const handleMouseMove = () => {\n    showControlsTemporarily();\n  };\n  const togglePlay = () => {\n    if (!videoRef.current) return;\n    if (isPlaying) {\n      videoRef.current.pause();\n    } else {\n      videoRef.current.play();\n    }\n  };\n  const [hasAutoFullscreen, setHasAutoFullscreen] = useState(false);\n  const handleVideoPlay = () => {\n    setIsPlaying(true);\n\n    // Auto fullscreen al primer play (especialment per mÃ²bil)\n    if (!hasAutoFullscreen && !document.fullscreenElement) {\n      setHasAutoFullscreen(true);\n\n      // Intentar entrar a fullscreen\n      const elem = document.documentElement;\n      if (elem.requestFullscreen) {\n        elem.requestFullscreen().catch(() => {});\n      } else if (elem.webkitRequestFullscreen) {\n        elem.webkitRequestFullscreen();\n      } else if (elem.msRequestFullscreen) {\n        elem.msRequestFullscreen();\n      }\n\n      // Intentar bloquejar orientaciÃ³ horitzontal (mÃ²bil)\n      if (window.screen.orientation && window.screen.orientation.lock) {\n        window.screen.orientation.lock('landscape').catch(() => {\n          // Si falla, no passa res (alguns navegadors no ho suporten)\n        });\n      }\n    }\n  };\n  const handleVideoPause = () => setIsPlaying(false);\n  const handleVideoWaiting = () => setVideoLoading(true);\n  const handleVideoCanPlay = () => setVideoLoading(false);\n  const handleTimeUpdate = () => {\n    if (!videoRef.current) return;\n    setCurrentTime(videoRef.current.currentTime);\n    if (videoRef.current.buffered.length > 0) {\n      setBuffered(videoRef.current.buffered.end(videoRef.current.buffered.length - 1));\n    }\n  };\n  const handleLoadedMetadata = () => {\n    if (!videoRef.current) return;\n    setDuration(videoRef.current.duration);\n  };\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragTime, setDragTime] = useState(0);\n  const calculateTimeFromEvent = e => {\n    if (!progressRef.current || !duration) return 0;\n    const rect = progressRef.current.getBoundingClientRect();\n    const percent = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));\n    return percent * duration;\n  };\n  const handleProgressMouseDown = e => {\n    e.preventDefault();\n    setIsDragging(true);\n    const newTime = calculateTimeFromEvent(e);\n    setDragTime(newTime);\n  };\n  const handleProgressMouseMove = useCallback(e => {\n    if (!isDragging) return;\n    const newTime = calculateTimeFromEvent(e);\n    setDragTime(newTime);\n  }, [isDragging, duration]);\n  const handleProgressMouseUp = useCallback(e => {\n    if (!isDragging || !videoRef.current) return;\n    setIsDragging(false);\n    const newTime = calculateTimeFromEvent(e);\n    videoRef.current.currentTime = newTime;\n  }, [isDragging, duration]);\n  useEffect(() => {\n    if (isDragging) {\n      document.addEventListener('mousemove', handleProgressMouseMove);\n      document.addEventListener('mouseup', handleProgressMouseUp);\n      return () => {\n        document.removeEventListener('mousemove', handleProgressMouseMove);\n        document.removeEventListener('mouseup', handleProgressMouseUp);\n      };\n    }\n  }, [isDragging, handleProgressMouseMove, handleProgressMouseUp]);\n  const handleProgressClick = e => {\n    if (!progressRef.current || !videoRef.current || !duration) return;\n    const rect = progressRef.current.getBoundingClientRect();\n    const percent = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));\n    videoRef.current.currentTime = percent * duration;\n  };\n  const skip = seconds => {\n    if (!videoRef.current) return;\n    const newTime = Math.max(0, Math.min(duration, videoRef.current.currentTime + seconds));\n    videoRef.current.currentTime = newTime;\n  };\n  const handleVolumeChange = e => {\n    const newVolume = parseFloat(e.target.value);\n    setVolume(newVolume);\n    if (videoRef.current) {\n      videoRef.current.volume = newVolume;\n    }\n    setIsMuted(newVolume === 0);\n  };\n  const toggleMute = () => {\n    if (!videoRef.current) return;\n    if (isMuted) {\n      videoRef.current.volume = volume || 1;\n      setIsMuted(false);\n    } else {\n      videoRef.current.volume = 0;\n      setIsMuted(true);\n    }\n  };\n  const toggleFullscreen = () => {\n    if (!document.fullscreenElement) {\n      document.documentElement.requestFullscreen();\n    } else {\n      document.exitFullscreen();\n    }\n  };\n  const formatTime = seconds => {\n    if (!seconds || isNaN(seconds)) return '0:00';\n    const h = Math.floor(seconds / 3600);\n    const m = Math.floor(seconds % 3600 / 60);\n    const s = Math.floor(seconds % 60);\n    if (h > 0) {\n      return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\n    }\n    return `${m}:${s.toString().padStart(2, '0')}`;\n  };\n\n  // FunciÃ³ per sortir de fullscreen i desbloquejar orientaciÃ³\n  const exitFullscreenMode = () => {\n    if (document.fullscreenElement) {\n      document.exitFullscreen().catch(() => {});\n    }\n    if (window.screen.orientation && window.screen.orientation.unlock) {\n      window.screen.orientation.unlock();\n    }\n  };\n\n  // Cleanup quan es desmunta el component\n  useEffect(() => {\n    return () => {\n      exitFullscreenMode();\n    };\n  }, []);\n  const handleBack = () => {\n    exitFullscreenMode();\n    if (item !== null && item !== void 0 && item.series_id) {\n      navigate(`/series/${item.series_id}`);\n    } else {\n      navigate(-1);\n    }\n  };\n  const handleAudioChange = index => {\n    var _audioTracks$index;\n    setSelectedAudio(index);\n    if ((_audioTracks$index = audioTracks[index]) !== null && _audioTracks$index !== void 0 && _audioTracks$index.language) {\n      localStorage.setItem('hermes_audio_lang', audioTracks[index].language.toLowerCase());\n    }\n    setShowAudioMenu(false);\n  };\n  const handleSubtitleChange = index => {\n    var _subtitleTracks$index;\n    setSelectedSubtitle(index);\n    if (index === -1) {\n      localStorage.setItem('hermes_subtitle_lang', 'off');\n    } else if ((_subtitleTracks$index = subtitleTracks[index]) !== null && _subtitleTracks$index !== void 0 && _subtitleTracks$index.language) {\n      localStorage.setItem('hermes_subtitle_lang', subtitleTracks[index].language.toLowerCase());\n    }\n    setShowSubtitleMenu(false);\n  };\n  const handleSpeedChange = speed => {\n    setPlaybackSpeed(speed);\n    if (videoRef.current) {\n      videoRef.current.playbackRate = speed;\n    }\n    setShowSpeedMenu(false);\n  };\n  const getVideoUrl = () => {\n    if (type === 'episode') {\n      return `${API_URL}/api/stream/episode/${id}`;\n    }\n    return `${API_URL}/api/stream/movie/${id}`;\n  };\n  const VolumeIcon = () => {\n    if (isMuted || volume === 0) return /*#__PURE__*/_jsxDEV(VolumeMuteIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 522,\n      columnNumber: 41\n    }, this);\n    if (volume > 0.5) return /*#__PURE__*/_jsxDEV(VolumeHighIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 30\n    }, this);\n    return /*#__PURE__*/_jsxDEV(VolumeLowIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 12\n    }, this);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-loading\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"player-container\",\n    onMouseMove: handleMouseMove,\n    onClick: e => {\n      if (e.target === e.currentTarget) {\n        closeAllMenus();\n      }\n      showControlsTemporarily();\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"video-player\",\n        src: getVideoUrl(),\n        autoPlay: true,\n        onPlay: handleVideoPlay,\n        onPause: handleVideoPause,\n        onWaiting: handleVideoWaiting,\n        onCanPlay: handleVideoCanPlay,\n        onTimeUpdate: handleTimeUpdate,\n        onLoadedMetadata: handleLoadedMetadata,\n        onClick: togglePlay\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 9\n      }, this), videoLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-loading\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `player-controls ${showControls ? 'visible' : 'hidden'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"player-top-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"back-btn\",\n            onClick: handleBack,\n            children: [/*#__PURE__*/_jsxDEV(BackIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Tornar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"player-title\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: (item === null || item === void 0 ? void 0 : item.name) || 'Reproduint'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 15\n            }, this), (item === null || item === void 0 ? void 0 : item.series_name) && /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [item.series_name, \" - T\", item.season_number, \" E\", item.episode_number]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '100px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 582,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"player-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"center-btn skip-btn\",\n            onClick: () => skip(-10),\n            children: /*#__PURE__*/_jsxDEV(SkipBackIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 587,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"center-btn play-pause-btn\",\n            onClick: togglePlay,\n            children: isPlaying ? /*#__PURE__*/_jsxDEV(PauseIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 28\n            }, this) : /*#__PURE__*/_jsxDEV(PlayIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 44\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"center-btn skip-btn\",\n            onClick: () => skip(10),\n            children: /*#__PURE__*/_jsxDEV(SkipForwardIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"player-bottom-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              ref: progressRef,\n              className: `progress-bar ${isDragging ? 'dragging' : ''}`,\n              onMouseDown: handleProgressMouseDown,\n              onClick: handleProgressClick,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"progress-buffered\",\n                style: {\n                  width: `${buffered / duration * 100}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"progress-played\",\n                style: {\n                  width: `${(isDragging ? dragTime : currentTime) / duration * 100}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 612,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"progress-handle\",\n                style: {\n                  left: `${(isDragging ? dragTime : currentTime) / duration * 100}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 616,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 602,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"time-display\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: formatTime(isDragging ? dragTime : currentTime)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 622,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"/\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 623,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: formatTime(duration)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 624,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 621,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bottom-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"left-controls\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"control-btn\",\n                onClick: togglePlay,\n                children: isPlaying ? /*#__PURE__*/_jsxDEV(PauseIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 632,\n                  columnNumber: 32\n                }, this) : /*#__PURE__*/_jsxDEV(PlayIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 632,\n                  columnNumber: 48\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 631,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"control-btn\",\n                onClick: () => skip(-10),\n                children: /*#__PURE__*/_jsxDEV(SkipBackIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 635,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"control-btn\",\n                onClick: () => skip(10),\n                children: /*#__PURE__*/_jsxDEV(SkipForwardIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 638,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"volume-control\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"control-btn\",\n                  onClick: toggleMute,\n                  children: /*#__PURE__*/_jsxDEV(VolumeIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 642,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 641,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"volume-slider\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"range\",\n                    min: \"0\",\n                    max: \"1\",\n                    step: \"0.1\",\n                    value: isMuted ? 0 : volume,\n                    onChange: handleVolumeChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 645,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 644,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 640,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 630,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"right-controls\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"control-wrapper\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `control-btn ${showSpeedMenu ? 'active' : ''}`,\n                  onClick: () => {\n                    closeAllMenus();\n                    setShowSpeedMenu(!showSpeedMenu);\n                  },\n                  title: \"Velocitat\",\n                  children: [/*#__PURE__*/_jsxDEV(SpeedIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 668,\n                    columnNumber: 21\n                  }, this), playbackSpeed !== 1 && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"control-badge\",\n                    children: [playbackSpeed, \"x\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 670,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 660,\n                  columnNumber: 19\n                }, this), showSpeedMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"control-menu\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"menu-header\",\n                    children: \"Velocitat\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 675,\n                    columnNumber: 23\n                  }, this), speeds.map(speed => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `menu-item ${playbackSpeed === speed ? 'selected' : ''}`,\n                    onClick: () => handleSpeedChange(speed),\n                    children: [playbackSpeed === speed && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"check-icon\",\n                      children: \"\\u2713\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 682,\n                      columnNumber: 55\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: speed === 1 ? 'Normal' : `${speed}x`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 683,\n                      columnNumber: 27\n                    }, this)]\n                  }, speed, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 677,\n                    columnNumber: 25\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 674,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 659,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"control-wrapper\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `control-btn ${showAudioMenu ? 'active' : ''}`,\n                  onClick: () => {\n                    closeAllMenus();\n                    setShowAudioMenu(!showAudioMenu);\n                  },\n                  title: \"Audio\",\n                  children: /*#__PURE__*/_jsxDEV(AudioIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 700,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 692,\n                  columnNumber: 19\n                }, this), showAudioMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"control-menu\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"menu-header\",\n                    children: \"Audio\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 704,\n                    columnNumber: 23\n                  }, this), audioTracks.length > 0 ? audioTracks.map((track, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `menu-item ${selectedAudio === index ? 'selected' : ''}`,\n                    onClick: () => handleAudioChange(index),\n                    children: [selectedAudio === index && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"check-icon\",\n                      children: \"\\u2713\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 712,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"track-info\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"track-name\",\n                        children: getLanguageName(track.language)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 714,\n                        columnNumber: 31\n                      }, this), track.codec && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"track-detail\",\n                        children: [track.codec, \" \", track.channels ? `${track.channels}ch` : '']\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 718,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 713,\n                      columnNumber: 29\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 707,\n                    columnNumber: 27\n                  }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"menu-item disabled\",\n                    children: \"No hi ha pistes alternatives\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 726,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 703,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 691,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"control-wrapper\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: `control-btn ${showSubtitleMenu ? 'active' : ''} ${selectedSubtitle >= 0 ? 'has-selection' : ''}`,\n                  onClick: () => {\n                    closeAllMenus();\n                    setShowSubtitleMenu(!showSubtitleMenu);\n                  },\n                  title: \"Subtitols\",\n                  children: /*#__PURE__*/_jsxDEV(SubtitlesIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 742,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 734,\n                  columnNumber: 19\n                }, this), showSubtitleMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"control-menu\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"menu-header\",\n                    children: \"Subtitols\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 746,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `menu-item ${selectedSubtitle === -1 ? 'selected' : ''}`,\n                    onClick: () => handleSubtitleChange(-1),\n                    children: [selectedSubtitle === -1 && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"check-icon\",\n                      children: \"\\u2713\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 751,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"Desactivats\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 752,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 747,\n                    columnNumber: 23\n                  }, this), subtitleTracks.map((track, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `menu-item ${selectedSubtitle === index ? 'selected' : ''}`,\n                    onClick: () => handleSubtitleChange(index),\n                    children: [selectedSubtitle === index && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"check-icon\",\n                      children: \"\\u2713\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 760,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"track-info\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"track-name\",\n                        children: getLanguageName(track.language)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 762,\n                        columnNumber: 29\n                      }, this), track.forced && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"track-detail\",\n                        children: \"For\\xE7at\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 765,\n                        columnNumber: 46\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 761,\n                      columnNumber: 27\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 755,\n                    columnNumber: 25\n                  }, this)), subtitleTracks.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"menu-item disabled\",\n                    children: \"No hi ha subtitols\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 770,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 745,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 733,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"control-btn\",\n                onClick: toggleFullscreen,\n                children: isFullscreen ? /*#__PURE__*/_jsxDEV(FullscreenExitIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 778,\n                  columnNumber: 35\n                }, this) : /*#__PURE__*/_jsxDEV(FullscreenIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 778,\n                  columnNumber: 60\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 777,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 629,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 548,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 538,\n    columnNumber: 5\n  }, this);\n}\n_s(Player, \"GIO/zipvwiXCFwL+Cue5FRHuBGI=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c12 = Player;\nexport default Player;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12;\n$RefreshReg$(_c, \"PlayIcon\");\n$RefreshReg$(_c2, \"PauseIcon\");\n$RefreshReg$(_c3, \"SkipBackIcon\");\n$RefreshReg$(_c4, \"SkipForwardIcon\");\n$RefreshReg$(_c5, \"VolumeHighIcon\");\n$RefreshReg$(_c6, \"VolumeLowIcon\");\n$RefreshReg$(_c7, \"VolumeMuteIcon\");\n$RefreshReg$(_c8, \"FullscreenIcon\");\n$RefreshReg$(_c9, \"FullscreenExitIcon\");\n$RefreshReg$(_c0, \"SubtitlesIcon\");\n$RefreshReg$(_c1, \"AudioIcon\");\n$RefreshReg$(_c10, \"SpeedIcon\");\n$RefreshReg$(_c11, \"BackIcon\");\n$RefreshReg$(_c12, \"Player\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useParams","useNavigate","axios","jsxDEV","_jsxDEV","API_URL","window","location","hostname","defaults","baseURL","PlayIcon","viewBox","fill","children","d","fileName","_jsxFileName","lineNumber","columnNumber","_c","PauseIcon","_c2","SkipBackIcon","x","y","fontSize","textAnchor","fontWeight","fontFamily","_c3","SkipForwardIcon","_c4","VolumeHighIcon","_c5","VolumeLowIcon","_c6","VolumeMuteIcon","_c7","FullscreenIcon","_c8","FullscreenExitIcon","_c9","SubtitlesIcon","_c0","AudioIcon","_c1","SpeedIcon","_c10","BackIcon","_c11","languageFlags","getLanguageFlag","lang","normalizedLang","toLowerCase","trim","getLanguageName","names","Player","_s","type","id","navigate","videoRef","controlsTimeoutRef","progressRef","item","setItem","loading","setLoading","videoLoading","setVideoLoading","isPlaying","setIsPlaying","currentTime","setCurrentTime","duration","setDuration","buffered","setBuffered","volume","setVolume","isMuted","setIsMuted","isFullscreen","setIsFullscreen","showControls","setShowControls","showAudioMenu","setShowAudioMenu","showSubtitleMenu","setShowSubtitleMenu","showSpeedMenu","setShowSpeedMenu","audioTracks","setAudioTracks","subtitleTracks","setSubtitleTracks","selectedAudio","setSelectedAudio","selectedSubtitle","setSelectedSubtitle","playbackSpeed","setPlaybackSpeed","speeds","preferredAudioLang","localStorage","getItem","preferredSubtitleLang","loadMedia","document","addEventListener","handleFullscreenChange","removeEventListener","response","get","data","audio_tracks","tracks","JSON","parse","preferredIndex","findIndex","t","_t$language","language","includes","e","console","error","subtitles","subs","s","_s$language","fullscreenElement","closeAllMenus","showControlsTemporarily","current","clearTimeout","setTimeout","handleMouseMove","togglePlay","pause","play","hasAutoFullscreen","setHasAutoFullscreen","handleVideoPlay","elem","documentElement","requestFullscreen","catch","webkitRequestFullscreen","msRequestFullscreen","screen","orientation","lock","handleVideoPause","handleVideoWaiting","handleVideoCanPlay","handleTimeUpdate","length","end","handleLoadedMetadata","isDragging","setIsDragging","dragTime","setDragTime","calculateTimeFromEvent","rect","getBoundingClientRect","percent","Math","max","min","clientX","left","width","handleProgressMouseDown","preventDefault","newTime","handleProgressMouseMove","handleProgressMouseUp","handleProgressClick","skip","seconds","handleVolumeChange","newVolume","parseFloat","target","value","toggleMute","toggleFullscreen","exitFullscreen","formatTime","isNaN","h","floor","m","toString","padStart","exitFullscreenMode","unlock","handleBack","series_id","handleAudioChange","index","_audioTracks$index","handleSubtitleChange","_subtitleTracks$index","handleSpeedChange","speed","playbackRate","getVideoUrl","VolumeIcon","className","onMouseMove","onClick","currentTarget","ref","src","autoPlay","onPlay","onPause","onWaiting","onCanPlay","onTimeUpdate","onLoadedMetadata","name","series_name","season_number","episode_number","style","onMouseDown","step","onChange","title","map","track","codec","channels","forced","_c12","$RefreshReg$"],"sources":["E:/Develop/hermes-backend/frontend/src/pages/Player.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Player.css';\r\n\r\nconst API_URL = window.location.hostname === 'localhost'\r\n  ? 'http://localhost:8000'\r\n  : '';\r\n\r\naxios.defaults.baseURL = API_URL;\r\n\r\n// SVG Icons\r\nconst PlayIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M8 5v14l11-7z\"/>\r\n  </svg>\r\n);\r\n\r\nconst PauseIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"/>\r\n  </svg>\r\n);\r\n\r\nconst SkipBackIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z\"/>\r\n    <text x=\"12\" y=\"15.5\" fontSize=\"7\" textAnchor=\"middle\" fontWeight=\"bold\" fontFamily=\"Arial\">10</text>\r\n  </svg>\r\n);\r\n\r\nconst SkipForwardIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M12 5V1l5 5-5 5V7c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6h2c0 4.42-3.58 8-8 8s-8-3.58-8-8 3.58-8 8-8z\"/>\r\n    <text x=\"12\" y=\"15.5\" fontSize=\"7\" textAnchor=\"middle\" fontWeight=\"bold\" fontFamily=\"Arial\">10</text>\r\n  </svg>\r\n);\r\n\r\nconst VolumeHighIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"/>\r\n  </svg>\r\n);\r\n\r\nconst VolumeLowIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\"/>\r\n  </svg>\r\n);\r\n\r\nconst VolumeMuteIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z\"/>\r\n  </svg>\r\n);\r\n\r\nconst FullscreenIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"/>\r\n  </svg>\r\n);\r\n\r\nconst FullscreenExitIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"/>\r\n  </svg>\r\n);\r\n\r\nconst SubtitlesIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z\"/>\r\n  </svg>\r\n);\r\n\r\nconst AudioIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z\"/>\r\n  </svg>\r\n);\r\n\r\nconst SpeedIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M10 8v8l6-4-6-4zm11-5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14z\"/>\r\n  </svg>\r\n);\r\n\r\nconst BackIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n    <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"/>\r\n  </svg>\r\n);\r\n\r\n// Mapa de banderes per idiomes\r\nconst languageFlags = {\r\n  // CatalÃ  - Senyera (Andorra)\r\n  'cat': 'ðŸ‡¦ðŸ‡©',\r\n  'catalan': 'ðŸ‡¦ðŸ‡©',\r\n  'catalÃ ': 'ðŸ‡¦ðŸ‡©',\r\n  'ca': 'ðŸ‡¦ðŸ‡©',\r\n  // CastellÃ  (Espanya)\r\n  'spa': 'ðŸ‡ªðŸ‡¸',\r\n  'esp': 'ðŸ‡ªðŸ‡¸',\r\n  'spanish': 'ðŸ‡ªðŸ‡¸',\r\n  'espaÃ±ol': 'ðŸ‡ªðŸ‡¸',\r\n  'castellano': 'ðŸ‡ªðŸ‡¸',\r\n  'es': 'ðŸ‡ªðŸ‡¸',\r\n  'cas': 'ðŸ‡ªðŸ‡¸',\r\n  // Espanyol AmericÃ  (LlatinoamÃ¨rica)\r\n  'spa-la': 'ðŸŒŽ',\r\n  'es-la': 'ðŸŒŽ',\r\n  'es-419': 'ðŸŒŽ',\r\n  'spanish-latin': 'ðŸŒŽ',\r\n  'lat': 'ðŸŒŽ',\r\n  'latino': 'ðŸŒŽ',\r\n  // AnglÃ¨s (EEUU)\r\n  'eng': 'ðŸ‡ºðŸ‡¸',\r\n  'english': 'ðŸ‡ºðŸ‡¸',\r\n  'en': 'ðŸ‡ºðŸ‡¸',\r\n  'en-us': 'ðŸ‡ºðŸ‡¸',\r\n  // AnglÃ¨s BritÃ nic\r\n  'en-gb': 'ðŸ‡¬ðŸ‡§',\r\n  'british': 'ðŸ‡¬ðŸ‡§',\r\n  // JaponÃ¨s\r\n  'jap': 'ðŸ‡¯ðŸ‡µ',\r\n  'jpn': 'ðŸ‡¯ðŸ‡µ',\r\n  'japanese': 'ðŸ‡¯ðŸ‡µ',\r\n  'ja': 'ðŸ‡¯ðŸ‡µ',\r\n  // FrancÃ¨s\r\n  'fre': 'ðŸ‡«ðŸ‡·',\r\n  'fra': 'ðŸ‡«ðŸ‡·',\r\n  'french': 'ðŸ‡«ðŸ‡·',\r\n  'fr': 'ðŸ‡«ðŸ‡·',\r\n  // Alemany\r\n  'ger': 'ðŸ‡©ðŸ‡ª',\r\n  'deu': 'ðŸ‡©ðŸ‡ª',\r\n  'german': 'ðŸ‡©ðŸ‡ª',\r\n  'de': 'ðŸ‡©ðŸ‡ª',\r\n  // ItaliÃ \r\n  'ita': 'ðŸ‡®ðŸ‡¹',\r\n  'italian': 'ðŸ‡®ðŸ‡¹',\r\n  'it': 'ðŸ‡®ðŸ‡¹',\r\n  // PortuguÃ¨s\r\n  'por': 'ðŸ‡µðŸ‡¹',\r\n  'portuguese': 'ðŸ‡µðŸ‡¹',\r\n  'pt': 'ðŸ‡µðŸ‡¹',\r\n  // PortuguÃ¨s Brasiler\r\n  'pt-br': 'ðŸ‡§ðŸ‡·',\r\n  'brazilian': 'ðŸ‡§ðŸ‡·',\r\n  // CoreÃ \r\n  'kor': 'ðŸ‡°ðŸ‡·',\r\n  'korean': 'ðŸ‡°ðŸ‡·',\r\n  'ko': 'ðŸ‡°ðŸ‡·',\r\n  // XinÃ¨s\r\n  'chi': 'ðŸ‡¨ðŸ‡³',\r\n  'zho': 'ðŸ‡¨ðŸ‡³',\r\n  'chinese': 'ðŸ‡¨ðŸ‡³',\r\n  'zh': 'ðŸ‡¨ðŸ‡³',\r\n  // Rus\r\n  'rus': 'ðŸ‡·ðŸ‡º',\r\n  'russian': 'ðŸ‡·ðŸ‡º',\r\n  'ru': 'ðŸ‡·ðŸ‡º',\r\n};\r\n\r\n// FunciÃ³ per obtenir la bandera d'un idioma\r\nconst getLanguageFlag = (lang) => {\r\n  if (!lang) return 'ðŸŒ';\r\n  const normalizedLang = lang.toLowerCase().trim();\r\n  return languageFlags[normalizedLang] || 'ðŸŒ';\r\n};\r\n\r\n// FunciÃ³ per obtenir el nom de l'idioma\r\nconst getLanguageName = (lang) => {\r\n  if (!lang) return 'Desconegut';\r\n  const normalizedLang = lang.toLowerCase().trim();\r\n\r\n  const names = {\r\n    'cat': 'CatalÃ ', 'catalan': 'CatalÃ ', 'catalÃ ': 'CatalÃ ', 'ca': 'CatalÃ ',\r\n    'spa': 'CastellÃ ', 'esp': 'CastellÃ ', 'spanish': 'CastellÃ ', 'espaÃ±ol': 'CastellÃ ', 'castellano': 'CastellÃ ', 'es': 'CastellÃ ', 'cas': 'CastellÃ ',\r\n    'spa-la': 'Espanyol AmericÃ ', 'es-la': 'Espanyol AmericÃ ', 'es-419': 'Espanyol AmericÃ ', 'spanish-latin': 'Espanyol AmericÃ ', 'lat': 'Espanyol AmericÃ ', 'latino': 'Espanyol AmericÃ ',\r\n    'eng': 'AnglÃ¨s', 'english': 'AnglÃ¨s', 'en': 'AnglÃ¨s', 'en-us': 'AnglÃ¨s',\r\n    'en-gb': 'AnglÃ¨s BritÃ nic', 'british': 'AnglÃ¨s BritÃ nic',\r\n    'jap': 'JaponÃ¨s', 'jpn': 'JaponÃ¨s', 'japanese': 'JaponÃ¨s', 'ja': 'JaponÃ¨s',\r\n    'fre': 'FrancÃ¨s', 'fra': 'FrancÃ¨s', 'french': 'FrancÃ¨s', 'fr': 'FrancÃ¨s',\r\n    'ger': 'Alemany', 'deu': 'Alemany', 'german': 'Alemany', 'de': 'Alemany',\r\n    'ita': 'ItaliÃ ', 'italian': 'ItaliÃ ', 'it': 'ItaliÃ ',\r\n    'por': 'PortuguÃ¨s', 'portuguese': 'PortuguÃ¨s', 'pt': 'PortuguÃ¨s',\r\n    'pt-br': 'PortuguÃ¨s Brasiler', 'brazilian': 'PortuguÃ¨s Brasiler',\r\n    'kor': 'CoreÃ ', 'korean': 'CoreÃ ', 'ko': 'CoreÃ ',\r\n    'chi': 'XinÃ¨s', 'zho': 'XinÃ¨s', 'chinese': 'XinÃ¨s', 'zh': 'XinÃ¨s',\r\n    'rus': 'Rus', 'russian': 'Rus', 'ru': 'Rus',\r\n  };\r\n\r\n  return names[normalizedLang] || 'Desconegut';\r\n};\r\n\r\nfunction Player() {\r\n  const { type, id } = useParams();\r\n  const navigate = useNavigate();\r\n  const videoRef = useRef(null);\r\n  const controlsTimeoutRef = useRef(null);\r\n  const progressRef = useRef(null);\r\n\r\n  const [item, setItem] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [videoLoading, setVideoLoading] = useState(true);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [buffered, setBuffered] = useState(0);\r\n  const [volume, setVolume] = useState(1);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [showControls, setShowControls] = useState(true);\r\n\r\n  // Popup states\r\n  const [showAudioMenu, setShowAudioMenu] = useState(false);\r\n  const [showSubtitleMenu, setShowSubtitleMenu] = useState(false);\r\n  const [showSpeedMenu, setShowSpeedMenu] = useState(false);\r\n\r\n  // Track selections\r\n  const [audioTracks, setAudioTracks] = useState([]);\r\n  const [subtitleTracks, setSubtitleTracks] = useState([]);\r\n  const [selectedAudio, setSelectedAudio] = useState(0);\r\n  const [selectedSubtitle, setSelectedSubtitle] = useState(-1);\r\n  const [playbackSpeed, setPlaybackSpeed] = useState(1);\r\n\r\n  const speeds = [0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2];\r\n\r\n  // Preferences from localStorage\r\n  const preferredAudioLang = localStorage.getItem('hermes_audio_lang') || 'cat';\r\n  const preferredSubtitleLang = localStorage.getItem('hermes_subtitle_lang') || 'off';\r\n\r\n  useEffect(() => {\r\n    loadMedia();\r\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\r\n    return () => {\r\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\r\n    };\r\n  }, [type, id]);\r\n\r\n  const loadMedia = async () => {\r\n    try {\r\n      let response;\r\n      if (type === 'episode') {\r\n        response = await axios.get(`/api/library/episodes/${id}`);\r\n      } else {\r\n        response = await axios.get(`/api/library/movies/${id}`);\r\n      }\r\n      setItem(response.data);\r\n\r\n      // Parse audio tracks\r\n      if (response.data.audio_tracks) {\r\n        try {\r\n          const tracks = JSON.parse(response.data.audio_tracks);\r\n          setAudioTracks(tracks);\r\n          const preferredIndex = tracks.findIndex(t =>\r\n            t.language?.toLowerCase().includes(preferredAudioLang)\r\n          );\r\n          if (preferredIndex >= 0) setSelectedAudio(preferredIndex);\r\n        } catch (e) {\r\n          console.error('Error parsing audio tracks:', e);\r\n        }\r\n      }\r\n\r\n      // Parse subtitles\r\n      if (response.data.subtitles) {\r\n        try {\r\n          const subs = JSON.parse(response.data.subtitles);\r\n          setSubtitleTracks(subs);\r\n          if (preferredSubtitleLang !== 'off') {\r\n            const preferredIndex = subs.findIndex(s =>\r\n              s.language?.toLowerCase().includes(preferredSubtitleLang)\r\n            );\r\n            if (preferredIndex >= 0) setSelectedSubtitle(preferredIndex);\r\n          }\r\n        } catch (e) {\r\n          console.error('Error parsing subtitles:', e);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error carregant media:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFullscreenChange = () => {\r\n    setIsFullscreen(!!document.fullscreenElement);\r\n  };\r\n\r\n  const closeAllMenus = () => {\r\n    setShowAudioMenu(false);\r\n    setShowSubtitleMenu(false);\r\n    setShowSpeedMenu(false);\r\n  };\r\n\r\n  const showControlsTemporarily = useCallback(() => {\r\n    setShowControls(true);\r\n    if (controlsTimeoutRef.current) {\r\n      clearTimeout(controlsTimeoutRef.current);\r\n    }\r\n    if (isPlaying) {\r\n      controlsTimeoutRef.current = setTimeout(() => {\r\n        setShowControls(false);\r\n        closeAllMenus();\r\n      }, 3000);\r\n    }\r\n  }, [isPlaying]);\r\n\r\n  const handleMouseMove = () => {\r\n    showControlsTemporarily();\r\n  };\r\n\r\n  const togglePlay = () => {\r\n    if (!videoRef.current) return;\r\n    if (isPlaying) {\r\n      videoRef.current.pause();\r\n    } else {\r\n      videoRef.current.play();\r\n    }\r\n  };\r\n\r\n  const [hasAutoFullscreen, setHasAutoFullscreen] = useState(false);\r\n\r\n  const handleVideoPlay = () => {\r\n    setIsPlaying(true);\r\n\r\n    // Auto fullscreen al primer play (especialment per mÃ²bil)\r\n    if (!hasAutoFullscreen && !document.fullscreenElement) {\r\n      setHasAutoFullscreen(true);\r\n\r\n      // Intentar entrar a fullscreen\r\n      const elem = document.documentElement;\r\n      if (elem.requestFullscreen) {\r\n        elem.requestFullscreen().catch(() => {});\r\n      } else if (elem.webkitRequestFullscreen) {\r\n        elem.webkitRequestFullscreen();\r\n      } else if (elem.msRequestFullscreen) {\r\n        elem.msRequestFullscreen();\r\n      }\r\n\r\n      // Intentar bloquejar orientaciÃ³ horitzontal (mÃ²bil)\r\n      if (window.screen.orientation && window.screen.orientation.lock) {\r\n        window.screen.orientation.lock('landscape').catch(() => {\r\n          // Si falla, no passa res (alguns navegadors no ho suporten)\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleVideoPause = () => setIsPlaying(false);\r\n  const handleVideoWaiting = () => setVideoLoading(true);\r\n  const handleVideoCanPlay = () => setVideoLoading(false);\r\n\r\n  const handleTimeUpdate = () => {\r\n    if (!videoRef.current) return;\r\n    setCurrentTime(videoRef.current.currentTime);\r\n\r\n    if (videoRef.current.buffered.length > 0) {\r\n      setBuffered(videoRef.current.buffered.end(videoRef.current.buffered.length - 1));\r\n    }\r\n  };\r\n\r\n  const handleLoadedMetadata = () => {\r\n    if (!videoRef.current) return;\r\n    setDuration(videoRef.current.duration);\r\n  };\r\n\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragTime, setDragTime] = useState(0);\r\n\r\n  const calculateTimeFromEvent = (e) => {\r\n    if (!progressRef.current || !duration) return 0;\r\n    const rect = progressRef.current.getBoundingClientRect();\r\n    const percent = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));\r\n    return percent * duration;\r\n  };\r\n\r\n  const handleProgressMouseDown = (e) => {\r\n    e.preventDefault();\r\n    setIsDragging(true);\r\n    const newTime = calculateTimeFromEvent(e);\r\n    setDragTime(newTime);\r\n  };\r\n\r\n  const handleProgressMouseMove = useCallback((e) => {\r\n    if (!isDragging) return;\r\n    const newTime = calculateTimeFromEvent(e);\r\n    setDragTime(newTime);\r\n  }, [isDragging, duration]);\r\n\r\n  const handleProgressMouseUp = useCallback((e) => {\r\n    if (!isDragging || !videoRef.current) return;\r\n    setIsDragging(false);\r\n    const newTime = calculateTimeFromEvent(e);\r\n    videoRef.current.currentTime = newTime;\r\n  }, [isDragging, duration]);\r\n\r\n  useEffect(() => {\r\n    if (isDragging) {\r\n      document.addEventListener('mousemove', handleProgressMouseMove);\r\n      document.addEventListener('mouseup', handleProgressMouseUp);\r\n      return () => {\r\n        document.removeEventListener('mousemove', handleProgressMouseMove);\r\n        document.removeEventListener('mouseup', handleProgressMouseUp);\r\n      };\r\n    }\r\n  }, [isDragging, handleProgressMouseMove, handleProgressMouseUp]);\r\n\r\n  const handleProgressClick = (e) => {\r\n    if (!progressRef.current || !videoRef.current || !duration) return;\r\n    const rect = progressRef.current.getBoundingClientRect();\r\n    const percent = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));\r\n    videoRef.current.currentTime = percent * duration;\r\n  };\r\n\r\n  const skip = (seconds) => {\r\n    if (!videoRef.current) return;\r\n    const newTime = Math.max(0, Math.min(duration, videoRef.current.currentTime + seconds));\r\n    videoRef.current.currentTime = newTime;\r\n  };\r\n\r\n  const handleVolumeChange = (e) => {\r\n    const newVolume = parseFloat(e.target.value);\r\n    setVolume(newVolume);\r\n    if (videoRef.current) {\r\n      videoRef.current.volume = newVolume;\r\n    }\r\n    setIsMuted(newVolume === 0);\r\n  };\r\n\r\n  const toggleMute = () => {\r\n    if (!videoRef.current) return;\r\n    if (isMuted) {\r\n      videoRef.current.volume = volume || 1;\r\n      setIsMuted(false);\r\n    } else {\r\n      videoRef.current.volume = 0;\r\n      setIsMuted(true);\r\n    }\r\n  };\r\n\r\n  const toggleFullscreen = () => {\r\n    if (!document.fullscreenElement) {\r\n      document.documentElement.requestFullscreen();\r\n    } else {\r\n      document.exitFullscreen();\r\n    }\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    if (!seconds || isNaN(seconds)) return '0:00';\r\n    const h = Math.floor(seconds / 3600);\r\n    const m = Math.floor((seconds % 3600) / 60);\r\n    const s = Math.floor(seconds % 60);\r\n    if (h > 0) {\r\n      return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${m}:${s.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  // FunciÃ³ per sortir de fullscreen i desbloquejar orientaciÃ³\r\n  const exitFullscreenMode = () => {\r\n    if (document.fullscreenElement) {\r\n      document.exitFullscreen().catch(() => {});\r\n    }\r\n    if (window.screen.orientation && window.screen.orientation.unlock) {\r\n      window.screen.orientation.unlock();\r\n    }\r\n  };\r\n\r\n  // Cleanup quan es desmunta el component\r\n  useEffect(() => {\r\n    return () => {\r\n      exitFullscreenMode();\r\n    };\r\n  }, []);\r\n\r\n  const handleBack = () => {\r\n    exitFullscreenMode();\r\n    if (item?.series_id) {\r\n      navigate(`/series/${item.series_id}`);\r\n    } else {\r\n      navigate(-1);\r\n    }\r\n  };\r\n\r\n  const handleAudioChange = (index) => {\r\n    setSelectedAudio(index);\r\n    if (audioTracks[index]?.language) {\r\n      localStorage.setItem('hermes_audio_lang', audioTracks[index].language.toLowerCase());\r\n    }\r\n    setShowAudioMenu(false);\r\n  };\r\n\r\n  const handleSubtitleChange = (index) => {\r\n    setSelectedSubtitle(index);\r\n    if (index === -1) {\r\n      localStorage.setItem('hermes_subtitle_lang', 'off');\r\n    } else if (subtitleTracks[index]?.language) {\r\n      localStorage.setItem('hermes_subtitle_lang', subtitleTracks[index].language.toLowerCase());\r\n    }\r\n    setShowSubtitleMenu(false);\r\n  };\r\n\r\n  const handleSpeedChange = (speed) => {\r\n    setPlaybackSpeed(speed);\r\n    if (videoRef.current) {\r\n      videoRef.current.playbackRate = speed;\r\n    }\r\n    setShowSpeedMenu(false);\r\n  };\r\n\r\n  const getVideoUrl = () => {\r\n    if (type === 'episode') {\r\n      return `${API_URL}/api/stream/episode/${id}`;\r\n    }\r\n    return `${API_URL}/api/stream/movie/${id}`;\r\n  };\r\n\r\n  const VolumeIcon = () => {\r\n    if (isMuted || volume === 0) return <VolumeMuteIcon />;\r\n    if (volume > 0.5) return <VolumeHighIcon />;\r\n    return <VolumeLowIcon />;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"player-container\">\r\n        <div className=\"player-loading\">\r\n          <div className=\"loading-spinner\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"player-container\"\r\n      onMouseMove={handleMouseMove}\r\n      onClick={(e) => {\r\n        if (e.target === e.currentTarget) {\r\n          closeAllMenus();\r\n        }\r\n        showControlsTemporarily();\r\n      }}\r\n    >\r\n      <div className=\"player-wrapper\">\r\n        <video\r\n          ref={videoRef}\r\n          className=\"video-player\"\r\n          src={getVideoUrl()}\r\n          autoPlay\r\n          onPlay={handleVideoPlay}\r\n          onPause={handleVideoPause}\r\n          onWaiting={handleVideoWaiting}\r\n          onCanPlay={handleVideoCanPlay}\r\n          onTimeUpdate={handleTimeUpdate}\r\n          onLoadedMetadata={handleLoadedMetadata}\r\n          onClick={togglePlay}\r\n        />\r\n\r\n        {videoLoading && (\r\n          <div className=\"player-loading\">\r\n            <div className=\"loading-spinner\"></div>\r\n          </div>\r\n        )}\r\n\r\n        <div className={`player-controls ${showControls ? 'visible' : 'hidden'}`}>\r\n          {/* Top Bar */}\r\n          <div className=\"player-top-bar\">\r\n            <button className=\"back-btn\" onClick={handleBack}>\r\n              <BackIcon />\r\n              <span>Tornar</span>\r\n            </button>\r\n            <div className=\"player-title\">\r\n              <h2>{item?.name || 'Reproduint'}</h2>\r\n              {item?.series_name && (\r\n                <span>{item.series_name} - T{item.season_number} E{item.episode_number}</span>\r\n              )}\r\n            </div>\r\n            <div style={{ width: '100px' }}></div>\r\n          </div>\r\n\r\n          {/* Center Controls */}\r\n          <div className=\"player-center\">\r\n            <button className=\"center-btn skip-btn\" onClick={() => skip(-10)}>\r\n              <SkipBackIcon />\r\n            </button>\r\n            <button className=\"center-btn play-pause-btn\" onClick={togglePlay}>\r\n              {isPlaying ? <PauseIcon /> : <PlayIcon />}\r\n            </button>\r\n            <button className=\"center-btn skip-btn\" onClick={() => skip(10)}>\r\n              <SkipForwardIcon />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Bottom Bar */}\r\n          <div className=\"player-bottom-bar\">\r\n            {/* Progress Bar */}\r\n            <div className=\"progress-container\">\r\n              <div\r\n                ref={progressRef}\r\n                className={`progress-bar ${isDragging ? 'dragging' : ''}`}\r\n                onMouseDown={handleProgressMouseDown}\r\n                onClick={handleProgressClick}\r\n              >\r\n                <div\r\n                  className=\"progress-buffered\"\r\n                  style={{ width: `${(buffered / duration) * 100}%` }}\r\n                />\r\n                <div\r\n                  className=\"progress-played\"\r\n                  style={{ width: `${((isDragging ? dragTime : currentTime) / duration) * 100}%` }}\r\n                />\r\n                <div\r\n                  className=\"progress-handle\"\r\n                  style={{ left: `${((isDragging ? dragTime : currentTime) / duration) * 100}%` }}\r\n                />\r\n              </div>\r\n              <div className=\"time-display\">\r\n                <span>{formatTime(isDragging ? dragTime : currentTime)}</span>\r\n                <span>/</span>\r\n                <span>{formatTime(duration)}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Bottom Controls Row */}\r\n            <div className=\"bottom-controls\">\r\n              <div className=\"left-controls\">\r\n                <button className=\"control-btn\" onClick={togglePlay}>\r\n                  {isPlaying ? <PauseIcon /> : <PlayIcon />}\r\n                </button>\r\n                <button className=\"control-btn\" onClick={() => skip(-10)}>\r\n                  <SkipBackIcon />\r\n                </button>\r\n                <button className=\"control-btn\" onClick={() => skip(10)}>\r\n                  <SkipForwardIcon />\r\n                </button>\r\n                <div className=\"volume-control\">\r\n                  <button className=\"control-btn\" onClick={toggleMute}>\r\n                    <VolumeIcon />\r\n                  </button>\r\n                  <div className=\"volume-slider\">\r\n                    <input\r\n                      type=\"range\"\r\n                      min=\"0\"\r\n                      max=\"1\"\r\n                      step=\"0.1\"\r\n                      value={isMuted ? 0 : volume}\r\n                      onChange={handleVolumeChange}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"right-controls\">\r\n                {/* Speed Button */}\r\n                <div className=\"control-wrapper\">\r\n                  <button\r\n                    className={`control-btn ${showSpeedMenu ? 'active' : ''}`}\r\n                    onClick={() => {\r\n                      closeAllMenus();\r\n                      setShowSpeedMenu(!showSpeedMenu);\r\n                    }}\r\n                    title=\"Velocitat\"\r\n                  >\r\n                    <SpeedIcon />\r\n                    {playbackSpeed !== 1 && (\r\n                      <span className=\"control-badge\">{playbackSpeed}x</span>\r\n                    )}\r\n                  </button>\r\n                  {showSpeedMenu && (\r\n                    <div className=\"control-menu\">\r\n                      <div className=\"menu-header\">Velocitat</div>\r\n                      {speeds.map((speed) => (\r\n                        <div\r\n                          key={speed}\r\n                          className={`menu-item ${playbackSpeed === speed ? 'selected' : ''}`}\r\n                          onClick={() => handleSpeedChange(speed)}\r\n                        >\r\n                          {playbackSpeed === speed && <span className=\"check-icon\">&#10003;</span>}\r\n                          <span>{speed === 1 ? 'Normal' : `${speed}x`}</span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Audio Button */}\r\n                <div className=\"control-wrapper\">\r\n                  <button\r\n                    className={`control-btn ${showAudioMenu ? 'active' : ''}`}\r\n                    onClick={() => {\r\n                      closeAllMenus();\r\n                      setShowAudioMenu(!showAudioMenu);\r\n                    }}\r\n                    title=\"Audio\"\r\n                  >\r\n                    <AudioIcon />\r\n                  </button>\r\n                  {showAudioMenu && (\r\n                    <div className=\"control-menu\">\r\n                      <div className=\"menu-header\">Audio</div>\r\n                      {audioTracks.length > 0 ? (\r\n                        audioTracks.map((track, index) => (\r\n                          <div\r\n                            key={index}\r\n                            className={`menu-item ${selectedAudio === index ? 'selected' : ''}`}\r\n                            onClick={() => handleAudioChange(index)}\r\n                          >\r\n                            {selectedAudio === index && <span className=\"check-icon\">&#10003;</span>}\r\n                            <div className=\"track-info\">\r\n                              <span className=\"track-name\">\r\n                                {getLanguageName(track.language)}\r\n                              </span>\r\n                              {track.codec && (\r\n                                <span className=\"track-detail\">\r\n                                  {track.codec} {track.channels ? `${track.channels}ch` : ''}\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        ))\r\n                      ) : (\r\n                        <div className=\"menu-item disabled\">No hi ha pistes alternatives</div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Subtitles Button */}\r\n                <div className=\"control-wrapper\">\r\n                  <button\r\n                    className={`control-btn ${showSubtitleMenu ? 'active' : ''} ${selectedSubtitle >= 0 ? 'has-selection' : ''}`}\r\n                    onClick={() => {\r\n                      closeAllMenus();\r\n                      setShowSubtitleMenu(!showSubtitleMenu);\r\n                    }}\r\n                    title=\"Subtitols\"\r\n                  >\r\n                    <SubtitlesIcon />\r\n                  </button>\r\n                  {showSubtitleMenu && (\r\n                    <div className=\"control-menu\">\r\n                      <div className=\"menu-header\">Subtitols</div>\r\n                      <div\r\n                        className={`menu-item ${selectedSubtitle === -1 ? 'selected' : ''}`}\r\n                        onClick={() => handleSubtitleChange(-1)}\r\n                      >\r\n                        {selectedSubtitle === -1 && <span className=\"check-icon\">&#10003;</span>}\r\n                        <span>Desactivats</span>\r\n                      </div>\r\n                      {subtitleTracks.map((track, index) => (\r\n                        <div\r\n                          key={index}\r\n                          className={`menu-item ${selectedSubtitle === index ? 'selected' : ''}`}\r\n                          onClick={() => handleSubtitleChange(index)}\r\n                        >\r\n                          {selectedSubtitle === index && <span className=\"check-icon\">&#10003;</span>}\r\n                          <div className=\"track-info\">\r\n                            <span className=\"track-name\">\r\n                              {getLanguageName(track.language)}\r\n                            </span>\r\n                            {track.forced && <span className=\"track-detail\">ForÃ§at</span>}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                      {subtitleTracks.length === 0 && (\r\n                        <div className=\"menu-item disabled\">No hi ha subtitols</div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Fullscreen Button */}\r\n                <button className=\"control-btn\" onClick={toggleFullscreen}>\r\n                  {isFullscreen ? <FullscreenExitIcon /> : <FullscreenIcon />}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Player;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}