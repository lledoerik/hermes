{"ast":null,"code":"var _jsxFileName = \"E:\\\\Develop\\\\hermes-backend\\\\frontend\\\\src\\\\pages\\\\Player.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { API_URL, API_ENDPOINTS, STORAGE_KEYS, DEFAULTS } from '../config';\nimport './Player.css';\n\n// Opening detection constants (typical anime/series opening times)\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst OPENING_START = 60; // Typically starts around 1 minute\nconst OPENING_END = 150; // Typically ends around 2:30\n\nfunction Player() {\n  _s();\n  var _media$audio_tracks2, _media$audio_tracks2$, _media$audio_tracks3, _media$audio_tracks3$;\n  const {\n    mediaId\n  } = useParams();\n  const navigate = useNavigate();\n  const videoRef = useRef(null);\n  const playerContainerRef = useRef(null);\n  const [media, setMedia] = useState(null);\n  const [nextEpisode, setNextEpisode] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [streamUrl, setStreamUrl] = useState(null);\n  const [preparing, setPreparing] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Track selection - can be changed during playback\n  const [selectedAudio, setSelectedAudio] = useState(0);\n  const [selectedSubtitle, setSelectedSubtitle] = useState(null);\n  const [quality, setQuality] = useState(localStorage.getItem(STORAGE_KEYS.quality) || DEFAULTS.quality);\n\n  // Player controls\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [buffered, setBuffered] = useState(0);\n  const [volume, setVolume] = useState(parseFloat(localStorage.getItem(STORAGE_KEYS.volume)) || DEFAULTS.volume);\n  const [isMuted, setIsMuted] = useState(false);\n  const [showControls, setShowControls] = useState(true);\n  const [showSettings, setShowSettings] = useState(false);\n  const [showTrackSelector, setShowTrackSelector] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [playbackRate, setPlaybackRate] = useState(1);\n\n  // Skip intro/opening state\n  const [showSkipIntro, setShowSkipIntro] = useState(false);\n  const [showNextEpisode, setShowNextEpisode] = useState(false);\n\n  // Keyboard shortcuts enabled\n  const [showShortcutsHelp, setShowShortcutsHelp] = useState(false);\n  const controlsTimeoutRef = useRef(null);\n  const savedTimeRef = useRef(0);\n\n  // Auto-play mode - start directly without asking for language\n  const [autoPlay, setAutoPlay] = useState(true);\n  useEffect(() => {\n    loadMediaInfo();\n    return () => {\n      if (controlsTimeoutRef.current) {\n        clearTimeout(controlsTimeoutRef.current);\n      }\n      // Save progress on unmount\n      if (videoRef.current && currentTime > 0) {\n        localStorage.setItem(`progress_${mediaId}`, currentTime.toString());\n      }\n    };\n  }, [mediaId]);\n  useEffect(() => {\n    if (videoRef.current) {\n      videoRef.current.volume = isMuted ? 0 : volume;\n    }\n    localStorage.setItem(STORAGE_KEYS.volume, volume.toString());\n  }, [volume, isMuted]);\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (!streamUrl) return;\n      switch (e.key.toLowerCase()) {\n        case ' ':\n        case 'k':\n          e.preventDefault();\n          handlePlayPause();\n          break;\n        case 'arrowleft':\n          e.preventDefault();\n          skipTime(-10);\n          break;\n        case 'arrowright':\n          e.preventDefault();\n          skipTime(10);\n          break;\n        case 'j':\n          e.preventDefault();\n          skipTime(-10);\n          break;\n        case 'l':\n          e.preventDefault();\n          skipTime(10);\n          break;\n        case 'arrowup':\n          e.preventDefault();\n          setVolume(prev => Math.min(1, prev + 0.1));\n          break;\n        case 'arrowdown':\n          e.preventDefault();\n          setVolume(prev => Math.max(0, prev - 0.1));\n          break;\n        case 'm':\n          e.preventDefault();\n          setIsMuted(prev => !prev);\n          break;\n        case 'f':\n          e.preventDefault();\n          toggleFullscreen();\n          break;\n        case 's':\n          e.preventDefault();\n          if (showSkipIntro) skipOpening();\n          break;\n        case 'n':\n          e.preventDefault();\n          if (showNextEpisode && nextEpisode) goToNextEpisode();\n          break;\n        case 'escape':\n          setShowSettings(false);\n          setShowTrackSelector(false);\n          setShowShortcutsHelp(false);\n          break;\n        case '?':\n          setShowShortcutsHelp(prev => !prev);\n          break;\n        default:\n          // Speed controls\n          if (e.key === '>' && e.shiftKey) {\n            setPlaybackRate(prev => Math.min(2, prev + 0.25));\n          } else if (e.key === '<' && e.shiftKey) {\n            setPlaybackRate(prev => Math.max(0.25, prev - 0.25));\n          }\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [streamUrl, showSkipIntro, showNextEpisode, nextEpisode]);\n\n  // Update playback rate\n  useEffect(() => {\n    if (videoRef.current) {\n      videoRef.current.playbackRate = playbackRate;\n    }\n  }, [playbackRate]);\n  const loadMediaInfo = async () => {\n    try {\n      const response = await axios.get(`${API_URL}${API_ENDPOINTS.mediaDetail(mediaId)}`);\n      setMedia(response.data);\n\n      // Set default audio based on preference (Catalan first)\n      const preferredLang = localStorage.getItem(STORAGE_KEYS.audioLanguage) || DEFAULTS.audioLanguage;\n      let bestAudioIndex = 0;\n      if (response.data.audio_tracks) {\n        const catIndex = response.data.audio_tracks.findIndex(t => t.language === 'cat');\n        const preferredIndex = response.data.audio_tracks.findIndex(t => t.language === preferredLang);\n        if (catIndex >= 0) {\n          bestAudioIndex = catIndex;\n        } else if (preferredIndex >= 0) {\n          bestAudioIndex = preferredIndex;\n        }\n        setSelectedAudio(bestAudioIndex);\n      }\n\n      // Default: no subtitles (as per user preference)\n      setSelectedSubtitle(null);\n\n      // Load next episode if this is a series\n      if (response.data.series_id && response.data.episode_number) {\n        loadNextEpisode(response.data.series_id, response.data.season_number, response.data.episode_number);\n      }\n\n      // Load saved progress\n      const savedProgress = localStorage.getItem(`progress_${mediaId}`);\n      if (savedProgress) {\n        savedTimeRef.current = parseFloat(savedProgress);\n      }\n\n      // AUTO-PLAY: Start streaming automatically with preferences (like Netflix)\n      if (autoPlay) {\n        startStreamAuto(bestAudioIndex, null, response.data);\n      }\n    } catch (err) {\n      console.error('Error loading media:', err);\n      setError('No s\\'ha pogut carregar el contingut');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Start stream automatically with given settings\n  const startStreamAuto = async (audioIdx, subtitleIdx, mediaData) => {\n    setPreparing(true);\n    setError(null);\n    try {\n      const response = await axios.post(`${API_URL}${API_ENDPOINTS.streamHls(mediaId)}`, {\n        audio_index: audioIdx,\n        subtitle_index: subtitleIdx,\n        quality: quality\n      });\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      setStreamUrl(`${API_URL}${response.data.playlist_url}`);\n    } catch (err) {\n      console.error('Error starting stream:', err);\n      setError('Error iniciant el streaming');\n    } finally {\n      setPreparing(false);\n    }\n  };\n  const loadNextEpisode = async (seriesId, seasonNum, episodeNum) => {\n    try {\n      const response = await axios.get(`${API_URL}${API_ENDPOINTS.seasonEpisodes(seriesId, seasonNum)}`);\n      const episodes = response.data;\n      const nextEp = episodes.find(ep => ep.episode_number === episodeNum + 1);\n      if (nextEp) {\n        setNextEpisode(nextEp);\n      }\n    } catch (err) {\n      console.error('Error loading next episode:', err);\n    }\n  };\n  const startStream = async () => {\n    setPreparing(true);\n    setError(null);\n    try {\n      const response = await axios.post(`${API_URL}${API_ENDPOINTS.streamHls(mediaId)}`, {\n        audio_index: selectedAudio,\n        subtitle_index: selectedSubtitle,\n        quality: quality\n      });\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      setStreamUrl(`${API_URL}${response.data.playlist_url}`);\n    } catch (err) {\n      console.error('Error starting stream:', err);\n      setError('Error iniciant el streaming');\n    } finally {\n      setPreparing(false);\n    }\n  };\n  const playDirect = () => {\n    setStreamUrl(`${API_URL}${API_ENDPOINTS.streamDirect(mediaId)}`);\n  };\n\n  // Change audio/subtitle during playback - maintains position\n  const changeTrack = async (type, index) => {\n    var _videoRef$current;\n    const newAudioIdx = type === 'audio' ? index : selectedAudio;\n    const newSubtitleIdx = type === 'subtitle' ? index : selectedSubtitle;\n    if (type === 'audio') {\n      var _media$audio_tracks;\n      setSelectedAudio(index);\n      // Save preference\n      const track = media === null || media === void 0 ? void 0 : (_media$audio_tracks = media.audio_tracks) === null || _media$audio_tracks === void 0 ? void 0 : _media$audio_tracks[index];\n      if (track !== null && track !== void 0 && track.language) {\n        localStorage.setItem(STORAGE_KEYS.audioLanguage, track.language);\n      }\n    } else {\n      setSelectedSubtitle(index);\n    }\n\n    // Save current time BEFORE changing anything\n    const currentPos = ((_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.currentTime) || 0;\n    const wasPlaying = isPlaying;\n\n    // Set the saved time ref so it will be restored after loading\n    savedTimeRef.current = currentPos;\n\n    // Show loading overlay\n    setPreparing(true);\n    try {\n      const response = await axios.post(`${API_URL}${API_ENDPOINTS.streamHls(mediaId)}`, {\n        audio_index: newAudioIdx,\n        subtitle_index: newSubtitleIdx,\n        quality: quality\n      });\n\n      // Wait for HLS to prepare\n      await new Promise(resolve => setTimeout(resolve, 1500));\n\n      // Update stream URL - this will trigger video reload\n      setStreamUrl(`${API_URL}${response.data.playlist_url}`);\n\n      // The handleLoadedMetadata will restore the position from savedTimeRef\n    } catch (err) {\n      console.error('Error changing track:', err);\n      setError('Error canviant la pista');\n    } finally {\n      setPreparing(false);\n    }\n  };\n  const handlePlayPause = () => {\n    if (videoRef.current) {\n      if (isPlaying) {\n        videoRef.current.pause();\n      } else {\n        videoRef.current.play();\n      }\n    }\n  };\n  const skipTime = seconds => {\n    if (videoRef.current) {\n      videoRef.current.currentTime = Math.max(0, Math.min(duration, videoRef.current.currentTime + seconds));\n    }\n  };\n  const skipOpening = () => {\n    if (videoRef.current) {\n      videoRef.current.currentTime = OPENING_END;\n      setShowSkipIntro(false);\n    }\n  };\n  const goToNextEpisode = () => {\n    if (nextEpisode) {\n      navigate(`/play/${nextEpisode.id}`);\n    }\n  };\n  const handleTimeUpdate = () => {\n    if (videoRef.current) {\n      const time = videoRef.current.currentTime;\n      setCurrentTime(time);\n\n      // Check if we're in the opening zone\n      if (time >= OPENING_START && time < OPENING_END) {\n        setShowSkipIntro(true);\n      } else {\n        setShowSkipIntro(false);\n      }\n\n      // Check if near the end for next episode prompt\n      if (duration > 0 && time >= duration - 30 && nextEpisode) {\n        setShowNextEpisode(true);\n      }\n\n      // Update buffered\n      if (videoRef.current.buffered.length > 0) {\n        setBuffered(videoRef.current.buffered.end(videoRef.current.buffered.length - 1));\n      }\n    }\n  };\n  const handleLoadedMetadata = () => {\n    if (videoRef.current) {\n      setDuration(videoRef.current.duration);\n\n      // Resume from saved position\n      if (savedTimeRef.current > 0) {\n        videoRef.current.currentTime = savedTimeRef.current;\n        savedTimeRef.current = 0;\n      }\n    }\n  };\n  const handleSeek = e => {\n    const rect = e.currentTarget.getBoundingClientRect();\n    const pos = (e.clientX - rect.left) / rect.width;\n    if (videoRef.current) {\n      videoRef.current.currentTime = pos * duration;\n    }\n  };\n  const handleVolumeChange = e => {\n    const newVolume = parseFloat(e.target.value);\n    setVolume(newVolume);\n    setIsMuted(newVolume === 0);\n  };\n  const toggleFullscreen = useCallback(() => {\n    const container = playerContainerRef.current;\n    if (!container) return;\n    if (!document.fullscreenElement) {\n      container.requestFullscreen().then(() => setIsFullscreen(true));\n    } else {\n      document.exitFullscreen().then(() => setIsFullscreen(false));\n    }\n  }, []);\n  const handleMouseMove = () => {\n    setShowControls(true);\n    if (controlsTimeoutRef.current) {\n      clearTimeout(controlsTimeoutRef.current);\n    }\n    controlsTimeoutRef.current = setTimeout(() => {\n      if (isPlaying) {\n        setShowControls(false);\n        setShowSettings(false);\n        setShowTrackSelector(false);\n      }\n    }, 3000);\n  };\n  const formatTime = seconds => {\n    if (!seconds || isNaN(seconds)) return '0:00';\n    const h = Math.floor(seconds / 3600);\n    const m = Math.floor(seconds % 3600 / 60);\n    const s = Math.floor(seconds % 60);\n    if (h > 0) {\n      return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\n    }\n    return `${m}:${s.toString().padStart(2, '0')}`;\n  };\n  const getLanguageName = code => {\n    const languages = {\n      cat: 'Catala',\n      spa: 'Castella',\n      eng: 'Angles',\n      jpn: 'Japones',\n      kor: 'Korea',\n      fra: 'Frances',\n      deu: 'Alemany',\n      ita: 'Italia',\n      por: 'Portugues',\n      und: 'Desconegut'\n    };\n    return languages[code] || code || 'Desconegut';\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-page loading\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Carregant...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 7\n    }, this);\n  }\n  if (error && !streamUrl) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-page error\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => navigate(-1),\n        children: \"Tornar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"player-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: playerContainerRef,\n      className: `player-container ${showControls ? 'show-controls' : ''}`,\n      onMouseMove: handleMouseMove,\n      onMouseLeave: () => isPlaying && setShowControls(false),\n      children: [streamUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        className: \"video-element\",\n        src: streamUrl,\n        onTimeUpdate: handleTimeUpdate,\n        onLoadedMetadata: handleLoadedMetadata,\n        onPlay: () => setIsPlaying(true),\n        onPause: () => setIsPlaying(false),\n        onClick: handlePlayPause,\n        onDoubleClick: toggleFullscreen,\n        autoPlay: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 11\n      }, this) :\n      /*#__PURE__*/\n      /* Pre-play / Loading screen */\n      _jsxDEV(\"div\", {\n        className: \"pre-play-screen\",\n        children: [(media === null || media === void 0 ? void 0 : media.backdrop) && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: `${API_URL}${API_ENDPOINTS.backdrop(media.series_id || mediaId)}`,\n          alt: \"\",\n          className: \"pre-play-backdrop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pre-play-overlay\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pre-play-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"media-title\",\n            children: (media === null || media === void 0 ? void 0 : media.series_name) || (media === null || media === void 0 ? void 0 : media.title) || 'Video'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 15\n          }, this), (media === null || media === void 0 ? void 0 : media.episode_number) && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"episode-info\",\n            children: [\"Temporada \", media.season_number, \" - Episodi \", media.episode_number]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 17\n          }, this), (preparing || autoPlay) && !error ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auto-play-loading\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"spinner\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"loading-text\",\n              children: \"Preparant reproducci\\xF3...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"loading-subtext\",\n              children: [(media === null || media === void 0 ? void 0 : (_media$audio_tracks2 = media.audio_tracks) === null || _media$audio_tracks2 === void 0 ? void 0 : (_media$audio_tracks2$ = _media$audio_tracks2[selectedAudio]) === null || _media$audio_tracks2$ === void 0 ? void 0 : _media$audio_tracks2$.language) === 'cat' ? 'Àudio en català' : getLanguageName((media === null || media === void 0 ? void 0 : (_media$audio_tracks3 = media.audio_tracks) === null || _media$audio_tracks3 === void 0 ? void 0 : (_media$audio_tracks3$ = _media$audio_tracks3[selectedAudio]) === null || _media$audio_tracks3$ === void 0 ? void 0 : _media$audio_tracks3$.language) || 'und'), selectedSubtitle === null ? ' • Sense subtítols' : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 17\n          }, this) :\n          /*#__PURE__*/\n          /* Manual selection mode - shown only if autoPlay is disabled */\n          _jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"track-selection\",\n              children: [(media === null || media === void 0 ? void 0 : media.audio_tracks) && media.audio_tracks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"track-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Audio:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 531,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: selectedAudio,\n                  onChange: e => setSelectedAudio(parseInt(e.target.value)),\n                  className: \"track-select\",\n                  children: media.audio_tracks.map((track, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: index,\n                    children: [getLanguageName(track.language), track.title && ` - ${track.title}`, \"(\", track.codec, \")\"]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 538,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 532,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 530,\n                columnNumber: 23\n              }, this), (media === null || media === void 0 ? void 0 : media.subtitle_tracks) && media.subtitle_tracks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"track-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Subtitols:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 551,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: selectedSubtitle !== null && selectedSubtitle !== void 0 ? selectedSubtitle : '',\n                  onChange: e => setSelectedSubtitle(e.target.value === '' ? null : parseInt(e.target.value)),\n                  className: \"track-select\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Sense subtitols\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 557,\n                    columnNumber: 27\n                  }, this), media.subtitle_tracks.map((track, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: index,\n                    children: [getLanguageName(track.language), \"(\", track.codec, \")\"]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 559,\n                    columnNumber: 29\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 552,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"track-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Qualitat:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 570,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: quality,\n                  onChange: e => {\n                    setQuality(e.target.value);\n                    localStorage.setItem(STORAGE_KEYS.quality, e.target.value);\n                  },\n                  className: \"track-select\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"4k\",\n                    children: \"4K (Original)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 579,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"1080p\",\n                    children: \"1080p\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 580,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"720p\",\n                    children: \"720p\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 581,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"480p\",\n                    children: \"480p\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 582,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 571,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 569,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"play-buttons\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary play-btn\",\n                onClick: startStream,\n                disabled: preparing,\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"24\",\n                  height: \"24\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n                    points: \"5,3 19,12 5,21\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 595,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 594,\n                  columnNumber: 23\n                }, this), \"Reproduir\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 589,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-secondary play-btn\",\n                onClick: playDirect,\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"24\",\n                  height: \"24\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  strokeWidth: \"2\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 605,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 23\n                }, this), \"Directe\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 600,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"shortcuts-hint\",\n              children: \"Prem ? per veure les dreceres de teclat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 612,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-btn\",\n        onClick: () => navigate(-1),\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"24\",\n          height: \"24\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M19 12H5M12 19l-7-7 7-7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 620,\n        columnNumber: 9\n      }, this), showSkipIntro && streamUrl && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"skip-intro-btn\",\n        onClick: skipOpening,\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"20\",\n          height: \"20\",\n          viewBox: \"0 0 24 24\",\n          fill: \"currentColor\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M5 4l10 8-10 8V4zM19 5h-2v14h2V5z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 13\n        }, this), \"Saltar intro\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 628,\n        columnNumber: 11\n      }, this), showNextEpisode && nextEpisode && streamUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"next-episode-prompt\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Seguent episodi:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"next-episode-btn\",\n          onClick: goToNextEpisode,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"next-ep-title\",\n            children: nextEpisode.title || `Episodi ${nextEpisode.episode_number}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"20\",\n            height: \"20\",\n            viewBox: \"0 0 24 24\",\n            fill: \"currentColor\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M5 4l10 8-10 8V4zM19 5h-2v14h2V5z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 640,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 11\n      }, this), streamUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-container\",\n          onClick: handleSeek,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-buffered\",\n              style: {\n                width: `${buffered / duration * 100}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-fill\",\n              style: {\n                width: `${currentTime / duration * 100}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 661,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-handle\",\n              style: {\n                left: `${currentTime / duration * 100}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 665,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 656,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 655,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"controls-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"controls-left\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn\",\n              onClick: handlePlayPause,\n              title: \"Play/Pausa (K o Espai)\",\n              children: isPlaying ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                  x: \"6\",\n                  y: \"4\",\n                  width: \"4\",\n                  height: \"16\",\n                  rx: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 679,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"rect\", {\n                  x: \"14\",\n                  y: \"4\",\n                  width: \"4\",\n                  height: \"16\",\n                  rx: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 680,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 678,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"polygon\", {\n                  points: \"5,3 19,12 5,21\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 684,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 683,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn\",\n              onClick: () => skipTime(-10),\n              title: \"Retrocedir 10s (J o Fletxa esquerra)\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M12 8L8 12L12 16\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 692,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n                  x: \"14\",\n                  y: \"14\",\n                  fontSize: \"8\",\n                  fill: \"currentColor\",\n                  stroke: \"none\",\n                  children: \"10\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 693,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 691,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn\",\n              onClick: () => skipTime(10),\n              title: \"Avancar 10s (L o Fletxa dreta)\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M12 8L16 12L12 16\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 700,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n                  x: \"4\",\n                  y: \"14\",\n                  fontSize: \"8\",\n                  fill: \"currentColor\",\n                  stroke: \"none\",\n                  children: \"10\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 701,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 699,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 698,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"volume-control\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"control-btn\",\n                onClick: () => setIsMuted(!isMuted),\n                title: \"Silenciar (M)\",\n                children: isMuted || volume === 0 ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"24\",\n                  height: \"24\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M11 5L6 9H2v6h4l5 4V5zM23 9l-6 6M17 9l6 6\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 710,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 709,\n                  columnNumber: 23\n                }, this) : volume < 0.5 ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"24\",\n                  height: \"24\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M11 5L6 9H2v6h4l5 4V5zM15.54 8.46a5 5 0 010 7.07\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 714,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 713,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"24\",\n                  height: \"24\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M11 5L6 9H2v6h4l5 4V5zM15.54 8.46a5 5 0 010 7.07M19.07 4.93a10 10 0 010 14.14\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 718,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 717,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 707,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"range\",\n                min: \"0\",\n                max: \"1\",\n                step: \"0.05\",\n                value: isMuted ? 0 : volume,\n                onChange: handleVolumeChange,\n                className: \"volume-slider\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 722,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 706,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"time-display\",\n              children: [formatTime(currentTime), \" / \", formatTime(duration)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 733,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 674,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"controls-center\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"now-playing-title\",\n              children: [(media === null || media === void 0 ? void 0 : media.series_name) && `${media.series_name} - `, media !== null && media !== void 0 && media.episode_number ? `E${media.episode_number}` : media === null || media === void 0 ? void 0 : media.title]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 740,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 739,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"controls-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `control-btn speed-btn ${playbackRate !== 1 ? 'active' : ''}`,\n              onClick: () => setPlaybackRate(prev => prev === 2 ? 0.5 : prev + 0.25),\n              title: \"Velocitat de reproduccio\",\n              children: [playbackRate, \"x\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 749,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn\",\n              onClick: () => {\n                setShowTrackSelector(!showTrackSelector);\n                setShowSettings(false);\n              },\n              title: \"Audio i subtitols\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                  x: \"2\",\n                  y: \"4\",\n                  width: \"20\",\n                  height: \"16\",\n                  rx: \"2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 767,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M6 10h4M6 14h8\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 768,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 766,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 758,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn\",\n              onClick: () => {\n                setShowSettings(!showSettings);\n                setShowTrackSelector(false);\n              },\n              title: \"Configuracio\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n                  cx: \"12\",\n                  cy: \"12\",\n                  r: \"3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 782,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 783,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 781,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 773,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"control-btn\",\n              onClick: toggleFullscreen,\n              title: \"Pantalla completa (F)\",\n              children: isFullscreen ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M8 3v3a2 2 0 01-2 2H3m18 0h-3a2 2 0 01-2-2V3m0 18v-3a2 2 0 012-2h3M3 16h3a2 2 0 012 2v3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 791,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 790,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                strokeWidth: \"2\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 795,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 794,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 788,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 747,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 672,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 653,\n        columnNumber: 11\n      }, this), showTrackSelector && streamUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"track-panel glass\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Audio i Subtitols\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 807,\n          columnNumber: 13\n        }, this), (media === null || media === void 0 ? void 0 : media.audio_tracks) && media.audio_tracks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"track-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Audio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 811,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"track-list\",\n            children: media.audio_tracks.map((track, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `track-option ${selectedAudio === index ? 'active' : ''}`,\n              onClick: () => changeTrack('audio', index),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"track-lang\",\n                children: getLanguageName(track.language)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 819,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"track-codec\",\n                children: track.codec\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 820,\n                columnNumber: 23\n              }, this), selectedAudio === index && /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"16\",\n                height: \"16\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 823,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 822,\n                columnNumber: 25\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 814,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 812,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 810,\n          columnNumber: 15\n        }, this), (media === null || media === void 0 ? void 0 : media.subtitle_tracks) && media.subtitle_tracks.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"track-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Subtitols\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 834,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"track-list\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `track-option ${selectedSubtitle === null ? 'active' : ''}`,\n              onClick: () => changeTrack('subtitle', null),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"track-lang\",\n                children: \"Sense subtitols\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 840,\n                columnNumber: 21\n              }, this), selectedSubtitle === null && /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"16\",\n                height: \"16\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 843,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 842,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 836,\n              columnNumber: 19\n            }, this), media.subtitle_tracks.map((track, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `track-option ${selectedSubtitle === index ? 'active' : ''}`,\n              onClick: () => changeTrack('subtitle', index),\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"track-lang\",\n                children: getLanguageName(track.language)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 853,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"track-codec\",\n                children: track.codec\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 854,\n                columnNumber: 23\n              }, this), selectedSubtitle === index && /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"16\",\n                height: \"16\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 857,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 856,\n                columnNumber: 25\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 848,\n              columnNumber: 21\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 835,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 833,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"track-note\",\n          children: \"El canvi de pista pot trigar uns segons a aplicar-se.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 866,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 806,\n        columnNumber: 11\n      }, this), showSettings && streamUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"settings-panel glass\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Configuracio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 875,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settings-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Qualitat:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 878,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: quality,\n            onChange: e => {\n              setQuality(e.target.value);\n              localStorage.setItem(STORAGE_KEYS.quality, e.target.value);\n            },\n            className: \"settings-select\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"4k\",\n              children: \"4K (Original)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 887,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"1080p\",\n              children: \"1080p\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 888,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"720p\",\n              children: \"720p\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 889,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"480p\",\n              children: \"480p\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 890,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 879,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 877,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settings-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Velocitat:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 895,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"speed-options\",\n            children: [0.5, 0.75, 1, 1.25, 1.5, 2].map(speed => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `speed-option ${playbackRate === speed ? 'active' : ''}`,\n              onClick: () => setPlaybackRate(speed),\n              children: [speed, \"x\"]\n            }, speed, true, {\n              fileName: _jsxFileName,\n              lineNumber: 898,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 896,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 894,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 874,\n        columnNumber: 11\n      }, this), showShortcutsHelp && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"shortcuts-modal glass\",\n        onClick: () => setShowShortcutsHelp(false),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shortcuts-content\",\n          onClick: e => e.stopPropagation(),\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Dreceres de teclat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 915,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"shortcuts-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"Espai\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 918,\n                columnNumber: 19\n              }, this), \" / \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"K\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 918,\n                columnNumber: 38\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Play / Pausa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 919,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 917,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"J\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 922,\n                columnNumber: 19\n              }, this), \" / \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"Fletxa esquerra\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 922,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Retrocedir 10s\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 923,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 921,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"L\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 926,\n                columnNumber: 19\n              }, this), \" / \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"Fletxa dreta\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 926,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Avancar 10s\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 927,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 925,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"Fletxa amunt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 930,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Pujar volum\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 931,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 929,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"Fletxa avall\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 934,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Baixar volum\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 935,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 933,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"M\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 938,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Silenciar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 939,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 937,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 942,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Pantalla completa\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 943,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 941,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"S\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 946,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Saltar intro\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 947,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 945,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"N\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 950,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Seguent episodi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 951,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 949,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shortcut-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"<\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 954,\n                columnNumber: 19\n              }, this), \" / \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \">\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 954,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Canviar velocitat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 955,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 953,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 916,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-shortcuts\",\n            onClick: () => setShowShortcutsHelp(false),\n            children: \"Tancar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 958,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 914,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 913,\n        columnNumber: 11\n      }, this), preparing && streamUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-overlay\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 968,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Canviant pista...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 969,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 967,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 469,\n    columnNumber: 5\n  }, this);\n}\n_s(Player, \"G5N/2Xik2nRYDlnL+pHpxdDY31w=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Player;\nexport default Player;\nvar _c;\n$RefreshReg$(_c, \"Player\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useParams","useNavigate","Link","axios","API_URL","API_ENDPOINTS","STORAGE_KEYS","DEFAULTS","jsxDEV","_jsxDEV","Fragment","_Fragment","OPENING_START","OPENING_END","Player","_s","_media$audio_tracks2","_media$audio_tracks2$","_media$audio_tracks3","_media$audio_tracks3$","mediaId","navigate","videoRef","playerContainerRef","media","setMedia","nextEpisode","setNextEpisode","loading","setLoading","streamUrl","setStreamUrl","preparing","setPreparing","error","setError","selectedAudio","setSelectedAudio","selectedSubtitle","setSelectedSubtitle","quality","setQuality","localStorage","getItem","isPlaying","setIsPlaying","currentTime","setCurrentTime","duration","setDuration","buffered","setBuffered","volume","setVolume","parseFloat","isMuted","setIsMuted","showControls","setShowControls","showSettings","setShowSettings","showTrackSelector","setShowTrackSelector","isFullscreen","setIsFullscreen","playbackRate","setPlaybackRate","showSkipIntro","setShowSkipIntro","showNextEpisode","setShowNextEpisode","showShortcutsHelp","setShowShortcutsHelp","controlsTimeoutRef","savedTimeRef","autoPlay","setAutoPlay","loadMediaInfo","current","clearTimeout","setItem","toString","handleKeyDown","e","key","toLowerCase","preventDefault","handlePlayPause","skipTime","prev","Math","min","max","toggleFullscreen","skipOpening","goToNextEpisode","shiftKey","window","addEventListener","removeEventListener","response","get","mediaDetail","data","preferredLang","audioLanguage","bestAudioIndex","audio_tracks","catIndex","findIndex","t","language","preferredIndex","series_id","episode_number","loadNextEpisode","season_number","savedProgress","startStreamAuto","err","console","audioIdx","subtitleIdx","mediaData","post","streamHls","audio_index","subtitle_index","Promise","resolve","setTimeout","playlist_url","seriesId","seasonNum","episodeNum","seasonEpisodes","episodes","nextEp","find","ep","startStream","playDirect","streamDirect","changeTrack","type","index","_videoRef$current","newAudioIdx","newSubtitleIdx","_media$audio_tracks","track","currentPos","wasPlaying","pause","play","seconds","id","handleTimeUpdate","time","length","end","handleLoadedMetadata","handleSeek","rect","currentTarget","getBoundingClientRect","pos","clientX","left","width","handleVolumeChange","newVolume","target","value","container","document","fullscreenElement","requestFullscreen","then","exitFullscreen","handleMouseMove","formatTime","isNaN","h","floor","m","s","padStart","getLanguageName","code","languages","cat","spa","eng","jpn","kor","fra","deu","ita","por","und","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","ref","onMouseMove","onMouseLeave","src","onTimeUpdate","onLoadedMetadata","onPlay","onPause","onDoubleClick","backdrop","alt","series_name","title","onChange","parseInt","map","codec","subtitle_tracks","disabled","height","viewBox","fill","points","stroke","strokeWidth","d","style","x","y","rx","fontSize","step","cx","cy","r","speed","stopPropagation","_c","$RefreshReg$"],"sources":["E:/Develop/hermes-backend/frontend/src/pages/Player.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { API_URL, API_ENDPOINTS, STORAGE_KEYS, DEFAULTS } from '../config';\r\nimport './Player.css';\r\n\r\n// Opening detection constants (typical anime/series opening times)\r\nconst OPENING_START = 60; // Typically starts around 1 minute\r\nconst OPENING_END = 150; // Typically ends around 2:30\r\n\r\nfunction Player() {\r\n  const { mediaId } = useParams();\r\n  const navigate = useNavigate();\r\n  const videoRef = useRef(null);\r\n  const playerContainerRef = useRef(null);\r\n\r\n  const [media, setMedia] = useState(null);\r\n  const [nextEpisode, setNextEpisode] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [streamUrl, setStreamUrl] = useState(null);\r\n  const [preparing, setPreparing] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Track selection - can be changed during playback\r\n  const [selectedAudio, setSelectedAudio] = useState(0);\r\n  const [selectedSubtitle, setSelectedSubtitle] = useState(null);\r\n  const [quality, setQuality] = useState(\r\n    localStorage.getItem(STORAGE_KEYS.quality) || DEFAULTS.quality\r\n  );\r\n\r\n  // Player controls\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const [buffered, setBuffered] = useState(0);\r\n  const [volume, setVolume] = useState(\r\n    parseFloat(localStorage.getItem(STORAGE_KEYS.volume)) || DEFAULTS.volume\r\n  );\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [showControls, setShowControls] = useState(true);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [showTrackSelector, setShowTrackSelector] = useState(false);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [playbackRate, setPlaybackRate] = useState(1);\r\n\r\n  // Skip intro/opening state\r\n  const [showSkipIntro, setShowSkipIntro] = useState(false);\r\n  const [showNextEpisode, setShowNextEpisode] = useState(false);\r\n\r\n  // Keyboard shortcuts enabled\r\n  const [showShortcutsHelp, setShowShortcutsHelp] = useState(false);\r\n\r\n  const controlsTimeoutRef = useRef(null);\r\n  const savedTimeRef = useRef(0);\r\n\r\n  // Auto-play mode - start directly without asking for language\r\n  const [autoPlay, setAutoPlay] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadMediaInfo();\r\n    return () => {\r\n      if (controlsTimeoutRef.current) {\r\n        clearTimeout(controlsTimeoutRef.current);\r\n      }\r\n      // Save progress on unmount\r\n      if (videoRef.current && currentTime > 0) {\r\n        localStorage.setItem(`progress_${mediaId}`, currentTime.toString());\r\n      }\r\n    };\r\n  }, [mediaId]);\r\n\r\n  useEffect(() => {\r\n    if (videoRef.current) {\r\n      videoRef.current.volume = isMuted ? 0 : volume;\r\n    }\r\n    localStorage.setItem(STORAGE_KEYS.volume, volume.toString());\r\n  }, [volume, isMuted]);\r\n\r\n  // Keyboard shortcuts\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (!streamUrl) return;\r\n\r\n      switch (e.key.toLowerCase()) {\r\n        case ' ':\r\n        case 'k':\r\n          e.preventDefault();\r\n          handlePlayPause();\r\n          break;\r\n        case 'arrowleft':\r\n          e.preventDefault();\r\n          skipTime(-10);\r\n          break;\r\n        case 'arrowright':\r\n          e.preventDefault();\r\n          skipTime(10);\r\n          break;\r\n        case 'j':\r\n          e.preventDefault();\r\n          skipTime(-10);\r\n          break;\r\n        case 'l':\r\n          e.preventDefault();\r\n          skipTime(10);\r\n          break;\r\n        case 'arrowup':\r\n          e.preventDefault();\r\n          setVolume(prev => Math.min(1, prev + 0.1));\r\n          break;\r\n        case 'arrowdown':\r\n          e.preventDefault();\r\n          setVolume(prev => Math.max(0, prev - 0.1));\r\n          break;\r\n        case 'm':\r\n          e.preventDefault();\r\n          setIsMuted(prev => !prev);\r\n          break;\r\n        case 'f':\r\n          e.preventDefault();\r\n          toggleFullscreen();\r\n          break;\r\n        case 's':\r\n          e.preventDefault();\r\n          if (showSkipIntro) skipOpening();\r\n          break;\r\n        case 'n':\r\n          e.preventDefault();\r\n          if (showNextEpisode && nextEpisode) goToNextEpisode();\r\n          break;\r\n        case 'escape':\r\n          setShowSettings(false);\r\n          setShowTrackSelector(false);\r\n          setShowShortcutsHelp(false);\r\n          break;\r\n        case '?':\r\n          setShowShortcutsHelp(prev => !prev);\r\n          break;\r\n        default:\r\n          // Speed controls\r\n          if (e.key === '>' && e.shiftKey) {\r\n            setPlaybackRate(prev => Math.min(2, prev + 0.25));\r\n          } else if (e.key === '<' && e.shiftKey) {\r\n            setPlaybackRate(prev => Math.max(0.25, prev - 0.25));\r\n          }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [streamUrl, showSkipIntro, showNextEpisode, nextEpisode]);\r\n\r\n  // Update playback rate\r\n  useEffect(() => {\r\n    if (videoRef.current) {\r\n      videoRef.current.playbackRate = playbackRate;\r\n    }\r\n  }, [playbackRate]);\r\n\r\n  const loadMediaInfo = async () => {\r\n    try {\r\n      const response = await axios.get(`${API_URL}${API_ENDPOINTS.mediaDetail(mediaId)}`);\r\n      setMedia(response.data);\r\n\r\n      // Set default audio based on preference (Catalan first)\r\n      const preferredLang = localStorage.getItem(STORAGE_KEYS.audioLanguage) || DEFAULTS.audioLanguage;\r\n      let bestAudioIndex = 0;\r\n\r\n      if (response.data.audio_tracks) {\r\n        const catIndex = response.data.audio_tracks.findIndex(t => t.language === 'cat');\r\n        const preferredIndex = response.data.audio_tracks.findIndex(t => t.language === preferredLang);\r\n\r\n        if (catIndex >= 0) {\r\n          bestAudioIndex = catIndex;\r\n        } else if (preferredIndex >= 0) {\r\n          bestAudioIndex = preferredIndex;\r\n        }\r\n        setSelectedAudio(bestAudioIndex);\r\n      }\r\n\r\n      // Default: no subtitles (as per user preference)\r\n      setSelectedSubtitle(null);\r\n\r\n      // Load next episode if this is a series\r\n      if (response.data.series_id && response.data.episode_number) {\r\n        loadNextEpisode(response.data.series_id, response.data.season_number, response.data.episode_number);\r\n      }\r\n\r\n      // Load saved progress\r\n      const savedProgress = localStorage.getItem(`progress_${mediaId}`);\r\n      if (savedProgress) {\r\n        savedTimeRef.current = parseFloat(savedProgress);\r\n      }\r\n\r\n      // AUTO-PLAY: Start streaming automatically with preferences (like Netflix)\r\n      if (autoPlay) {\r\n        startStreamAuto(bestAudioIndex, null, response.data);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error loading media:', err);\r\n      setError('No s\\'ha pogut carregar el contingut');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Start stream automatically with given settings\r\n  const startStreamAuto = async (audioIdx, subtitleIdx, mediaData) => {\r\n    setPreparing(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await axios.post(`${API_URL}${API_ENDPOINTS.streamHls(mediaId)}`, {\r\n        audio_index: audioIdx,\r\n        subtitle_index: subtitleIdx,\r\n        quality: quality,\r\n      });\r\n\r\n      await new Promise(resolve => setTimeout(resolve, 2000));\r\n      setStreamUrl(`${API_URL}${response.data.playlist_url}`);\r\n    } catch (err) {\r\n      console.error('Error starting stream:', err);\r\n      setError('Error iniciant el streaming');\r\n    } finally {\r\n      setPreparing(false);\r\n    }\r\n  };\r\n\r\n  const loadNextEpisode = async (seriesId, seasonNum, episodeNum) => {\r\n    try {\r\n      const response = await axios.get(\r\n        `${API_URL}${API_ENDPOINTS.seasonEpisodes(seriesId, seasonNum)}`\r\n      );\r\n      const episodes = response.data;\r\n      const nextEp = episodes.find(ep => ep.episode_number === episodeNum + 1);\r\n      if (nextEp) {\r\n        setNextEpisode(nextEp);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error loading next episode:', err);\r\n    }\r\n  };\r\n\r\n  const startStream = async () => {\r\n    setPreparing(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await axios.post(`${API_URL}${API_ENDPOINTS.streamHls(mediaId)}`, {\r\n        audio_index: selectedAudio,\r\n        subtitle_index: selectedSubtitle,\r\n        quality: quality,\r\n      });\r\n\r\n      await new Promise(resolve => setTimeout(resolve, 2000));\r\n\r\n      setStreamUrl(`${API_URL}${response.data.playlist_url}`);\r\n    } catch (err) {\r\n      console.error('Error starting stream:', err);\r\n      setError('Error iniciant el streaming');\r\n    } finally {\r\n      setPreparing(false);\r\n    }\r\n  };\r\n\r\n  const playDirect = () => {\r\n    setStreamUrl(`${API_URL}${API_ENDPOINTS.streamDirect(mediaId)}`);\r\n  };\r\n\r\n  // Change audio/subtitle during playback - maintains position\r\n  const changeTrack = async (type, index) => {\r\n    const newAudioIdx = type === 'audio' ? index : selectedAudio;\r\n    const newSubtitleIdx = type === 'subtitle' ? index : selectedSubtitle;\r\n\r\n    if (type === 'audio') {\r\n      setSelectedAudio(index);\r\n      // Save preference\r\n      const track = media?.audio_tracks?.[index];\r\n      if (track?.language) {\r\n        localStorage.setItem(STORAGE_KEYS.audioLanguage, track.language);\r\n      }\r\n    } else {\r\n      setSelectedSubtitle(index);\r\n    }\r\n\r\n    // Save current time BEFORE changing anything\r\n    const currentPos = videoRef.current?.currentTime || 0;\r\n    const wasPlaying = isPlaying;\r\n\r\n    // Set the saved time ref so it will be restored after loading\r\n    savedTimeRef.current = currentPos;\r\n\r\n    // Show loading overlay\r\n    setPreparing(true);\r\n\r\n    try {\r\n      const response = await axios.post(`${API_URL}${API_ENDPOINTS.streamHls(mediaId)}`, {\r\n        audio_index: newAudioIdx,\r\n        subtitle_index: newSubtitleIdx,\r\n        quality: quality,\r\n      });\r\n\r\n      // Wait for HLS to prepare\r\n      await new Promise(resolve => setTimeout(resolve, 1500));\r\n\r\n      // Update stream URL - this will trigger video reload\r\n      setStreamUrl(`${API_URL}${response.data.playlist_url}`);\r\n\r\n      // The handleLoadedMetadata will restore the position from savedTimeRef\r\n    } catch (err) {\r\n      console.error('Error changing track:', err);\r\n      setError('Error canviant la pista');\r\n    } finally {\r\n      setPreparing(false);\r\n    }\r\n  };\r\n\r\n  const handlePlayPause = () => {\r\n    if (videoRef.current) {\r\n      if (isPlaying) {\r\n        videoRef.current.pause();\r\n      } else {\r\n        videoRef.current.play();\r\n      }\r\n    }\r\n  };\r\n\r\n  const skipTime = (seconds) => {\r\n    if (videoRef.current) {\r\n      videoRef.current.currentTime = Math.max(0, Math.min(duration, videoRef.current.currentTime + seconds));\r\n    }\r\n  };\r\n\r\n  const skipOpening = () => {\r\n    if (videoRef.current) {\r\n      videoRef.current.currentTime = OPENING_END;\r\n      setShowSkipIntro(false);\r\n    }\r\n  };\r\n\r\n  const goToNextEpisode = () => {\r\n    if (nextEpisode) {\r\n      navigate(`/play/${nextEpisode.id}`);\r\n    }\r\n  };\r\n\r\n  const handleTimeUpdate = () => {\r\n    if (videoRef.current) {\r\n      const time = videoRef.current.currentTime;\r\n      setCurrentTime(time);\r\n\r\n      // Check if we're in the opening zone\r\n      if (time >= OPENING_START && time < OPENING_END) {\r\n        setShowSkipIntro(true);\r\n      } else {\r\n        setShowSkipIntro(false);\r\n      }\r\n\r\n      // Check if near the end for next episode prompt\r\n      if (duration > 0 && time >= duration - 30 && nextEpisode) {\r\n        setShowNextEpisode(true);\r\n      }\r\n\r\n      // Update buffered\r\n      if (videoRef.current.buffered.length > 0) {\r\n        setBuffered(videoRef.current.buffered.end(videoRef.current.buffered.length - 1));\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLoadedMetadata = () => {\r\n    if (videoRef.current) {\r\n      setDuration(videoRef.current.duration);\r\n\r\n      // Resume from saved position\r\n      if (savedTimeRef.current > 0) {\r\n        videoRef.current.currentTime = savedTimeRef.current;\r\n        savedTimeRef.current = 0;\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSeek = (e) => {\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    const pos = (e.clientX - rect.left) / rect.width;\r\n    if (videoRef.current) {\r\n      videoRef.current.currentTime = pos * duration;\r\n    }\r\n  };\r\n\r\n  const handleVolumeChange = (e) => {\r\n    const newVolume = parseFloat(e.target.value);\r\n    setVolume(newVolume);\r\n    setIsMuted(newVolume === 0);\r\n  };\r\n\r\n  const toggleFullscreen = useCallback(() => {\r\n    const container = playerContainerRef.current;\r\n    if (!container) return;\r\n\r\n    if (!document.fullscreenElement) {\r\n      container.requestFullscreen().then(() => setIsFullscreen(true));\r\n    } else {\r\n      document.exitFullscreen().then(() => setIsFullscreen(false));\r\n    }\r\n  }, []);\r\n\r\n  const handleMouseMove = () => {\r\n    setShowControls(true);\r\n    if (controlsTimeoutRef.current) {\r\n      clearTimeout(controlsTimeoutRef.current);\r\n    }\r\n    controlsTimeoutRef.current = setTimeout(() => {\r\n      if (isPlaying) {\r\n        setShowControls(false);\r\n        setShowSettings(false);\r\n        setShowTrackSelector(false);\r\n      }\r\n    }, 3000);\r\n  };\r\n\r\n  const formatTime = (seconds) => {\r\n    if (!seconds || isNaN(seconds)) return '0:00';\r\n    const h = Math.floor(seconds / 3600);\r\n    const m = Math.floor((seconds % 3600) / 60);\r\n    const s = Math.floor(seconds % 60);\r\n    if (h > 0) {\r\n      return `${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${m}:${s.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const getLanguageName = (code) => {\r\n    const languages = {\r\n      cat: 'Catala',\r\n      spa: 'Castella',\r\n      eng: 'Angles',\r\n      jpn: 'Japones',\r\n      kor: 'Korea',\r\n      fra: 'Frances',\r\n      deu: 'Alemany',\r\n      ita: 'Italia',\r\n      por: 'Portugues',\r\n      und: 'Desconegut',\r\n    };\r\n    return languages[code] || code || 'Desconegut';\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"player-page loading\">\r\n        <div className=\"spinner\"></div>\r\n        <p>Carregant...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error && !streamUrl) {\r\n    return (\r\n      <div className=\"player-page error\">\r\n        <h2>{error}</h2>\r\n        <button className=\"btn btn-primary\" onClick={() => navigate(-1)}>\r\n          Tornar\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"player-page\">\r\n      <div\r\n        ref={playerContainerRef}\r\n        className={`player-container ${showControls ? 'show-controls' : ''}`}\r\n        onMouseMove={handleMouseMove}\r\n        onMouseLeave={() => isPlaying && setShowControls(false)}\r\n      >\r\n        {/* Video */}\r\n        {streamUrl ? (\r\n          <video\r\n            ref={videoRef}\r\n            className=\"video-element\"\r\n            src={streamUrl}\r\n            onTimeUpdate={handleTimeUpdate}\r\n            onLoadedMetadata={handleLoadedMetadata}\r\n            onPlay={() => setIsPlaying(true)}\r\n            onPause={() => setIsPlaying(false)}\r\n            onClick={handlePlayPause}\r\n            onDoubleClick={toggleFullscreen}\r\n            autoPlay\r\n          />\r\n        ) : (\r\n          /* Pre-play / Loading screen */\r\n          <div className=\"pre-play-screen\">\r\n            {media?.backdrop && (\r\n              <img\r\n                src={`${API_URL}${API_ENDPOINTS.backdrop(media.series_id || mediaId)}`}\r\n                alt=\"\"\r\n                className=\"pre-play-backdrop\"\r\n              />\r\n            )}\r\n            <div className=\"pre-play-overlay\"></div>\r\n\r\n            <div className=\"pre-play-content\">\r\n              <h1 className=\"media-title\">\r\n                {media?.series_name || media?.title || 'Video'}\r\n              </h1>\r\n              {media?.episode_number && (\r\n                <p className=\"episode-info\">\r\n                  Temporada {media.season_number} - Episodi {media.episode_number}\r\n                </p>\r\n              )}\r\n\r\n              {/* Show loading when auto-playing */}\r\n              {(preparing || autoPlay) && !error ? (\r\n                <div className=\"auto-play-loading\">\r\n                  <div className=\"spinner\"></div>\r\n                  <p className=\"loading-text\">Preparant reproducció...</p>\r\n                  <p className=\"loading-subtext\">\r\n                    {media?.audio_tracks?.[selectedAudio]?.language === 'cat' ? 'Àudio en català' :\r\n                     getLanguageName(media?.audio_tracks?.[selectedAudio]?.language || 'und')}\r\n                    {selectedSubtitle === null ? ' • Sense subtítols' : ''}\r\n                  </p>\r\n                </div>\r\n              ) : (\r\n                /* Manual selection mode - shown only if autoPlay is disabled */\r\n                <>\r\n                  {/* Track Selection */}\r\n                  <div className=\"track-selection\">\r\n                    {/* Audio Selection */}\r\n                    {media?.audio_tracks && media.audio_tracks.length > 0 && (\r\n                      <div className=\"track-group\">\r\n                        <label>Audio:</label>\r\n                        <select\r\n                          value={selectedAudio}\r\n                          onChange={(e) => setSelectedAudio(parseInt(e.target.value))}\r\n                          className=\"track-select\"\r\n                        >\r\n                          {media.audio_tracks.map((track, index) => (\r\n                            <option key={index} value={index}>\r\n                              {getLanguageName(track.language)}\r\n                              {track.title && ` - ${track.title}`}\r\n                              ({track.codec})\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Subtitle Selection */}\r\n                    {media?.subtitle_tracks && media.subtitle_tracks.length > 0 && (\r\n                      <div className=\"track-group\">\r\n                        <label>Subtitols:</label>\r\n                        <select\r\n                          value={selectedSubtitle ?? ''}\r\n                          onChange={(e) => setSelectedSubtitle(e.target.value === '' ? null : parseInt(e.target.value))}\r\n                          className=\"track-select\"\r\n                        >\r\n                          <option value=\"\">Sense subtitols</option>\r\n                          {media.subtitle_tracks.map((track, index) => (\r\n                            <option key={index} value={index}>\r\n                              {getLanguageName(track.language)}\r\n                              ({track.codec})\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Quality Selection */}\r\n                    <div className=\"track-group\">\r\n                      <label>Qualitat:</label>\r\n                      <select\r\n                        value={quality}\r\n                        onChange={(e) => {\r\n                          setQuality(e.target.value);\r\n                          localStorage.setItem(STORAGE_KEYS.quality, e.target.value);\r\n                        }}\r\n                        className=\"track-select\"\r\n                      >\r\n                        <option value=\"4k\">4K (Original)</option>\r\n                        <option value=\"1080p\">1080p</option>\r\n                        <option value=\"720p\">720p</option>\r\n                        <option value=\"480p\">480p</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Play Buttons */}\r\n                  <div className=\"play-buttons\">\r\n                    <button\r\n                      className=\"btn btn-primary play-btn\"\r\n                      onClick={startStream}\r\n                      disabled={preparing}\r\n                    >\r\n                      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                        <polygon points=\"5,3 19,12 5,21\" />\r\n                      </svg>\r\n                      Reproduir\r\n                    </button>\r\n\r\n                    <button\r\n                      className=\"btn btn-secondary play-btn\"\r\n                      onClick={playDirect}\r\n                    >\r\n                      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                        <path d=\"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3\" />\r\n                      </svg>\r\n                      Directe\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Keyboard shortcuts hint */}\r\n                  <p className=\"shortcuts-hint\">Prem ? per veure les dreceres de teclat</p>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Back Button */}\r\n        <button className=\"back-btn\" onClick={() => navigate(-1)}>\r\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n            <path d=\"M19 12H5M12 19l-7-7 7-7\" />\r\n          </svg>\r\n        </button>\r\n\r\n        {/* Skip Intro Button */}\r\n        {showSkipIntro && streamUrl && (\r\n          <button className=\"skip-intro-btn\" onClick={skipOpening}>\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n              <path d=\"M5 4l10 8-10 8V4zM19 5h-2v14h2V5z\" />\r\n            </svg>\r\n            Saltar intro\r\n          </button>\r\n        )}\r\n\r\n        {/* Next Episode Button */}\r\n        {showNextEpisode && nextEpisode && streamUrl && (\r\n          <div className=\"next-episode-prompt\">\r\n            <span>Seguent episodi:</span>\r\n            <button className=\"next-episode-btn\" onClick={goToNextEpisode}>\r\n              <span className=\"next-ep-title\">\r\n                {nextEpisode.title || `Episodi ${nextEpisode.episode_number}`}\r\n              </span>\r\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                <path d=\"M5 4l10 8-10 8V4zM19 5h-2v14h2V5z\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Player Controls */}\r\n        {streamUrl && (\r\n          <div className=\"player-controls\">\r\n            {/* Progress Bar */}\r\n            <div className=\"progress-container\" onClick={handleSeek}>\r\n              <div className=\"progress-bar\">\r\n                <div\r\n                  className=\"progress-buffered\"\r\n                  style={{ width: `${(buffered / duration) * 100}%` }}\r\n                />\r\n                <div\r\n                  className=\"progress-fill\"\r\n                  style={{ width: `${(currentTime / duration) * 100}%` }}\r\n                />\r\n                <div\r\n                  className=\"progress-handle\"\r\n                  style={{ left: `${(currentTime / duration) * 100}%` }}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"controls-row\">\r\n              {/* Left Controls */}\r\n              <div className=\"controls-left\">\r\n                {/* Play/Pause */}\r\n                <button className=\"control-btn\" onClick={handlePlayPause} title=\"Play/Pausa (K o Espai)\">\r\n                  {isPlaying ? (\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                      <rect x=\"6\" y=\"4\" width=\"4\" height=\"16\" rx=\"1\" />\r\n                      <rect x=\"14\" y=\"4\" width=\"4\" height=\"16\" rx=\"1\" />\r\n                    </svg>\r\n                  ) : (\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                      <polygon points=\"5,3 19,12 5,21\" />\r\n                    </svg>\r\n                  )}\r\n                </button>\r\n\r\n                {/* Skip -10s */}\r\n                <button className=\"control-btn\" onClick={() => skipTime(-10)} title=\"Retrocedir 10s (J o Fletxa esquerra)\">\r\n                  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <path d=\"M12 8L8 12L12 16\" />\r\n                    <text x=\"14\" y=\"14\" fontSize=\"8\" fill=\"currentColor\" stroke=\"none\">10</text>\r\n                  </svg>\r\n                </button>\r\n\r\n                {/* Skip +10s */}\r\n                <button className=\"control-btn\" onClick={() => skipTime(10)} title=\"Avancar 10s (L o Fletxa dreta)\">\r\n                  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <path d=\"M12 8L16 12L12 16\" />\r\n                    <text x=\"4\" y=\"14\" fontSize=\"8\" fill=\"currentColor\" stroke=\"none\">10</text>\r\n                  </svg>\r\n                </button>\r\n\r\n                {/* Volume */}\r\n                <div className=\"volume-control\">\r\n                  <button className=\"control-btn\" onClick={() => setIsMuted(!isMuted)} title=\"Silenciar (M)\">\r\n                    {isMuted || volume === 0 ? (\r\n                      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                        <path d=\"M11 5L6 9H2v6h4l5 4V5zM23 9l-6 6M17 9l6 6\" />\r\n                      </svg>\r\n                    ) : volume < 0.5 ? (\r\n                      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                        <path d=\"M11 5L6 9H2v6h4l5 4V5zM15.54 8.46a5 5 0 010 7.07\" />\r\n                      </svg>\r\n                    ) : (\r\n                      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                        <path d=\"M11 5L6 9H2v6h4l5 4V5zM15.54 8.46a5 5 0 010 7.07M19.07 4.93a10 10 0 010 14.14\" />\r\n                      </svg>\r\n                    )}\r\n                  </button>\r\n                  <input\r\n                    type=\"range\"\r\n                    min=\"0\"\r\n                    max=\"1\"\r\n                    step=\"0.05\"\r\n                    value={isMuted ? 0 : volume}\r\n                    onChange={handleVolumeChange}\r\n                    className=\"volume-slider\"\r\n                  />\r\n                </div>\r\n\r\n                <span className=\"time-display\">\r\n                  {formatTime(currentTime)} / {formatTime(duration)}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Center - Title */}\r\n              <div className=\"controls-center\">\r\n                <span className=\"now-playing-title\">\r\n                  {media?.series_name && `${media.series_name} - `}\r\n                  {media?.episode_number ? `E${media.episode_number}` : media?.title}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Right Controls */}\r\n              <div className=\"controls-right\">\r\n                {/* Playback Speed */}\r\n                <button\r\n                  className={`control-btn speed-btn ${playbackRate !== 1 ? 'active' : ''}`}\r\n                  onClick={() => setPlaybackRate(prev => prev === 2 ? 0.5 : prev + 0.25)}\r\n                  title=\"Velocitat de reproduccio\"\r\n                >\r\n                  {playbackRate}x\r\n                </button>\r\n\r\n                {/* Audio/Subtitle selector */}\r\n                <button\r\n                  className=\"control-btn\"\r\n                  onClick={() => {\r\n                    setShowTrackSelector(!showTrackSelector);\r\n                    setShowSettings(false);\r\n                  }}\r\n                  title=\"Audio i subtitols\"\r\n                >\r\n                  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <rect x=\"2\" y=\"4\" width=\"20\" height=\"16\" rx=\"2\" />\r\n                    <path d=\"M6 10h4M6 14h8\" />\r\n                  </svg>\r\n                </button>\r\n\r\n                {/* Settings */}\r\n                <button\r\n                  className=\"control-btn\"\r\n                  onClick={() => {\r\n                    setShowSettings(!showSettings);\r\n                    setShowTrackSelector(false);\r\n                  }}\r\n                  title=\"Configuracio\"\r\n                >\r\n                  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <circle cx=\"12\" cy=\"12\" r=\"3\" />\r\n                    <path d=\"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z\" />\r\n                  </svg>\r\n                </button>\r\n\r\n                {/* Fullscreen */}\r\n                <button className=\"control-btn\" onClick={toggleFullscreen} title=\"Pantalla completa (F)\">\r\n                  {isFullscreen ? (\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M8 3v3a2 2 0 01-2 2H3m18 0h-3a2 2 0 01-2-2V3m0 18v-3a2 2 0 012-2h3M3 16h3a2 2 0 012 2v3\" />\r\n                    </svg>\r\n                  ) : (\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3\" />\r\n                    </svg>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Track Selector Panel */}\r\n        {showTrackSelector && streamUrl && (\r\n          <div className=\"track-panel glass\">\r\n            <h3>Audio i Subtitols</h3>\r\n\r\n            {media?.audio_tracks && media.audio_tracks.length > 0 && (\r\n              <div className=\"track-section\">\r\n                <h4>Audio</h4>\r\n                <div className=\"track-list\">\r\n                  {media.audio_tracks.map((track, index) => (\r\n                    <button\r\n                      key={index}\r\n                      className={`track-option ${selectedAudio === index ? 'active' : ''}`}\r\n                      onClick={() => changeTrack('audio', index)}\r\n                    >\r\n                      <span className=\"track-lang\">{getLanguageName(track.language)}</span>\r\n                      <span className=\"track-codec\">{track.codec}</span>\r\n                      {selectedAudio === index && (\r\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                          <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\" />\r\n                        </svg>\r\n                      )}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {media?.subtitle_tracks && media.subtitle_tracks.length > 0 && (\r\n              <div className=\"track-section\">\r\n                <h4>Subtitols</h4>\r\n                <div className=\"track-list\">\r\n                  <button\r\n                    className={`track-option ${selectedSubtitle === null ? 'active' : ''}`}\r\n                    onClick={() => changeTrack('subtitle', null)}\r\n                  >\r\n                    <span className=\"track-lang\">Sense subtitols</span>\r\n                    {selectedSubtitle === null && (\r\n                      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                        <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\" />\r\n                      </svg>\r\n                    )}\r\n                  </button>\r\n                  {media.subtitle_tracks.map((track, index) => (\r\n                    <button\r\n                      key={index}\r\n                      className={`track-option ${selectedSubtitle === index ? 'active' : ''}`}\r\n                      onClick={() => changeTrack('subtitle', index)}\r\n                    >\r\n                      <span className=\"track-lang\">{getLanguageName(track.language)}</span>\r\n                      <span className=\"track-codec\">{track.codec}</span>\r\n                      {selectedSubtitle === index && (\r\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                          <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\" />\r\n                        </svg>\r\n                      )}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <p className=\"track-note\">\r\n              El canvi de pista pot trigar uns segons a aplicar-se.\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Settings Panel */}\r\n        {showSettings && streamUrl && (\r\n          <div className=\"settings-panel glass\">\r\n            <h3>Configuracio</h3>\r\n\r\n            <div className=\"settings-group\">\r\n              <label>Qualitat:</label>\r\n              <select\r\n                value={quality}\r\n                onChange={(e) => {\r\n                  setQuality(e.target.value);\r\n                  localStorage.setItem(STORAGE_KEYS.quality, e.target.value);\r\n                }}\r\n                className=\"settings-select\"\r\n              >\r\n                <option value=\"4k\">4K (Original)</option>\r\n                <option value=\"1080p\">1080p</option>\r\n                <option value=\"720p\">720p</option>\r\n                <option value=\"480p\">480p</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"settings-group\">\r\n              <label>Velocitat:</label>\r\n              <div className=\"speed-options\">\r\n                {[0.5, 0.75, 1, 1.25, 1.5, 2].map(speed => (\r\n                  <button\r\n                    key={speed}\r\n                    className={`speed-option ${playbackRate === speed ? 'active' : ''}`}\r\n                    onClick={() => setPlaybackRate(speed)}\r\n                  >\r\n                    {speed}x\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Keyboard Shortcuts Help */}\r\n        {showShortcutsHelp && (\r\n          <div className=\"shortcuts-modal glass\" onClick={() => setShowShortcutsHelp(false)}>\r\n            <div className=\"shortcuts-content\" onClick={e => e.stopPropagation()}>\r\n              <h3>Dreceres de teclat</h3>\r\n              <div className=\"shortcuts-grid\">\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>Espai</kbd> / <kbd>K</kbd>\r\n                  <span>Play / Pausa</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>J</kbd> / <kbd>Fletxa esquerra</kbd>\r\n                  <span>Retrocedir 10s</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>L</kbd> / <kbd>Fletxa dreta</kbd>\r\n                  <span>Avancar 10s</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>Fletxa amunt</kbd>\r\n                  <span>Pujar volum</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>Fletxa avall</kbd>\r\n                  <span>Baixar volum</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>M</kbd>\r\n                  <span>Silenciar</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>F</kbd>\r\n                  <span>Pantalla completa</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>S</kbd>\r\n                  <span>Saltar intro</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>N</kbd>\r\n                  <span>Seguent episodi</span>\r\n                </div>\r\n                <div className=\"shortcut-item\">\r\n                  <kbd>&lt;</kbd> / <kbd>&gt;</kbd>\r\n                  <span>Canviar velocitat</span>\r\n                </div>\r\n              </div>\r\n              <button className=\"close-shortcuts\" onClick={() => setShowShortcutsHelp(false)}>\r\n                Tancar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Loading overlay when changing tracks */}\r\n        {preparing && streamUrl && (\r\n          <div className=\"loading-overlay\">\r\n            <div className=\"spinner\"></div>\r\n            <p>Canviant pista...</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Player;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}